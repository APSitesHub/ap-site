"use strict";(self.webpackChunkap_education=self.webpackChunkap_education||[]).push([[9311],{5550:(n,e,t)=>{t.r(e),t.d(e,{default:()=>he});var o=t(1488),a=t(5294),i=t(8313),r=t(610),s=t(3201),c=t(2791),l=t(7689),d=t(7269),h=t(184);const p=n=>{let{page:e,sectionWidth:t,sectionHeight:o,isKahootOpen:i,isOpenedLast:r}=n;const[s,l]=(0,c.useState)(!1),[p,m]=(0,c.useState)(!1),[u,g]=(0,c.useState)({}),[x,f]=(0,c.useState)(1),b=p?"1024px":t/10*4,w="124px",k="70px",v=async n=>{const e=parseInt(n.currentTarget.innerText);g((await a.Z.get("/host-kahoots")).data),f(e)};(0,c.useLayoutEffect)((()=>{(async()=>{try{g((await a.Z.get("/host-kahoots")).data)}catch(n){console.log(n)}})()}),[]);return(0,h.jsx)(h.Fragment,{children:Object.keys(u).length&&(0,h.jsxs)(d.K1,{className:(()=>{let n="";return n=i?"shown":"hidden",n=s?n+" minimized":n,n})(),style:{zIndex:"kahoot"===r?"3":s?"5":"1",width:s?w:b,height:s?k:o},onTransitionEnd:async n=>{n.target===n.currentTarget&&g((await a.Z.get("/host-kahoots")).data)},children:[s&&(0,h.jsxs)(d.zD,{children:[(0,h.jsx)(d.Tv,{}),(0,h.jsx)(d.sc,{})]}),(0,h.jsx)(d.PM,{onClick:()=>{l((n=>!n))},className:i?"":"hidden",children:s?(0,h.jsx)(d.$M,{}):(0,h.jsx)(d.cA,{})}),(0,h.jsx)(d.sN,{onClick:()=>{m(!p)},children:"+"}),Object.values(u[e].links).length>1&&(0,h.jsx)(d.X$,{children:Object.values(u[e].links).map(((n,e)=>(0,h.jsx)(d._L,{onClick:v,className:x===e+1?"active":"",tabIndex:-1,children:e+1},e)))}),(()=>{const n=[];return Object.values(u[e].links).map((e=>(n.push(e),n))),n})().map(((n,e)=>(0,h.jsx)(d.qe,{className:x===e+1?"active":"",children:(0,h.jsx)("iframe",{id:"host-kahoot-window-".concat(e+1),title:"host-kahoot-".concat(e+1),src:n,width:s?w:b,height:s?k:o})},e)))]})})};var m=t(7364);const u=n=>{let{page:e,isPlatformOpen:t,isOpenedLast:o,sectionWidth:a}=n;const[i,r]=(0,c.useState)(1),[s,l]=(0,c.useState)(1),[p,u]=(0,c.useState)([i]),g=async n=>{const e=parseInt(n.currentTarget.innerText);l(e)};return(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)(m.vn,{className:t?"shown":"hidden",style:{zIndex:"platform"===o?"4":"1",width:a/10*4},children:[1===i&&(0,h.jsx)(m.gs,{onClick:()=>{e.includes("polski")&&(r((n=>n+2)),u((n=>[...n,i+2]))),r((n=>n+1)),u((n=>[...n,i+1]))},children:"+"}),i>1&&(0,h.jsx)(d.X$,{children:p.map(((n,e)=>(0,h.jsx)(d._L,{onClick:g,className:s===e+1?"active":"",tabIndex:-1,children:e+1},e)))}),(0,h.jsx)("iframe",{className:1===s&&"active",id:"platform-window",title:"platform-pin",src:"https://online.ap.education/school/",width:"58.83%",height:"58.83%"},i),i>1&&(0,h.jsx)("iframe",{className:2===s&&"active",id:"platform-window-".concat(i),title:"platform-pin-".concat(i),src:"https://online.ap.education/school/",width:"58.83%",height:"58.83%"},i+1),i>2&&(0,h.jsx)("iframe",{className:3===s&&"active",id:"platform-window-".concat(i),title:"platform-pin-".concat(i),src:"https://online.ap.education/school/",width:"58.83%",height:"58.83%"},i+2)]})})};var g,x=t(5984),f=t(1608),b=t(5070),w=t(168),k=t(6487),v=t(4770),j=t(3509),Z=t(8025),y=t(3260),P=t(5484),S=t(3677);function I(){return I=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o])}return n},I.apply(this,arguments)}function z(n,e){let{title:t,titleId:o,...a}=n;return c.createElement("svg",I({width:16,height:26,viewBox:"0 0 8 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:e,"aria-labelledby":o},a),t?c.createElement("title",{id:o},t):null,g||(g=c.createElement("path",{d:"M6.5 1L1 6.5L6.5 12",stroke:"#0b4943",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})))}const N=c.forwardRef(z);t.p;var O;function C(){return C=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o])}return n},C.apply(this,arguments)}function L(n,e){let{title:t,titleId:o,...a}=n;return c.createElement("svg",C({width:16,height:26,viewBox:"0 0 8 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:e,"aria-labelledby":o},a),t?c.createElement("title",{id:o},t):null,O||(O=c.createElement("path",{d:"M1 12L6.5 6.5L1 1",stroke:"#0b4943",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})))}const _=c.forwardRef(L);t.p;var T,D,W,E,H,M,B,F,A,R,$,K,X,Y,q,U,V,G,J,Q,nn,en,tn,on,an,rn,sn,cn,ln,dn,hn,pn,mn,un,gn,xn,fn,bn,wn,kn,vn,jn,Zn,yn,Pn;const Sn=k.ZP.div(T||(T=(0,w.Z)(["\n  position: absolute;\n  top: 0;\n  right: 0;\n  z-index: 8;\n  height: 40vh;\n  width: 40%;\n  /* overflow: hidden; */\n  border-top-left-radius: 5px;\n\n  font-family: var(--streams-font-family);\n  background-color: #0f0f0f;\n\n  box-shadow: -10px -10px 30px 0px rgba(0, 0, 0, 0.25);\n\n  transition: transform var(--animation-global);\n\n  &.hidden {\n    transform: translateX(100%);\n  }\n\n  &.shown {\n    transform: translateX(0);\n  }\n"]))),In=(k.ZP.form(D||(D=(0,w.Z)(["\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n  justify-content: center;\n  align-items: center;\n\n  background-size: 100% auto;\n  background-position: top 40% center;\n  background-repeat: no-repeat;\n\n  @media screen and (min-width: 1280px) {\n    height: 100vh;\n  }\n"]))),k.ZP.h2(W||(W=(0,w.Z)(["\n  font-size: 30px;\n  color: var(--chat-font-color);\n"]))),k.ZP.label(E||(E=(0,w.Z)(["\n  font-size: 18px;\n  max-width: 280px;\n  text-align: center;\n"]))),k.ZP.input(H||(H=(0,w.Z)(["\n  border: 1.5px solid var(--accent-color);\n  border-radius: 8px;\n  padding: 8px;\n  font-size: 18px;\n  width: 80%;\n\n  transition: background-color var(--animation-global);\n\n  &:hover,\n  &:focus {\n    background-color: var(--accent-transparent-color);\n  }\n"]))),k.ZP.p(M||(M=(0,w.Z)(["\n  color: red;\n  font-size: 14px;\n  max-width: 250px;\n  text-align: center;\n"]))),k.ZP.button(B||(B=(0,w.Z)(["\n  width: 55%;\n  padding: 8px;\n  font-size: 18px;\n  cursor: pointer;\n  background-color: #607eaa;\n  color: #f9f5eb;\n  outline: none;\n  border: none;\n  border-radius: 5px;\n\n  transition: background-color var(--animation-global),\n    color var(--animation-global);\n\n  &:hover,\n  &:focus {\n    background-color: var(--main-color);\n    color: var(--accent-color);\n  }\n"]))),k.ZP.div(F||(F=(0,w.Z)(["\n  position: relative;\n\n  width: 100%;\n  height: 100%;\n\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n\n  background-size: auto 40%;\n  background-position: top 30px right -44px;\n  background-repeat: no-repeat;\n  background-color: transparent;\n"])))),zn=k.ZP.div(A||(A=(0,w.Z)(["\n  width: 100%;\n  height: 95%;\n  padding: 10px;\n  padding-top: 0;\n  overflow-x: hidden;\n  overflow-y: scroll;\n\n  display: flex;\n  flex-direction: column;\n  flex-wrap: nowrap;\n\n  scrollbar-width: none;\n  scrollbar-gutter: stable;\n\n  & :first-child:not(#chat-pin):not(svg) {\n    margin-top: auto;\n  }\n\n  & :nth-child(2) {\n    margin-top: auto;\n  }\n\n  & #chat-pin {\n    margin-top: 0;\n  }\n"]))),Nn=(0,k.ZP)(zn)(R||(R=(0,w.Z)(["\n  padding-top: 8px;\n  height: 95vh;\n\n  & :first-child:not(svg) {\n    margin-top: auto !important;\n  }\n\n  & :nth-child(2) {\n    margin-top: 0;\n  }\n"]))),On=k.ZP.div($||($=(0,w.Z)(["\n  position: relative;\n  margin-bottom: 8px;\n"]))),Cn=k.ZP.p(K||(K=(0,w.Z)(["\n  color: #fff;\n  text-align: right;\n  font-size: 18px;\n  line-height: 22px;\n  margin-bottom: 1px;\n"]))),Ln=k.ZP.p(X||(X=(0,w.Z)(["\n  color: #fff;\n  font-size: 18px;\n  line-height: 22px;\n  font-weight: 500;\n  margin-bottom: 1px;\n"]))),_n=k.ZP.span(Y||(Y=(0,w.Z)(["\n  color: #fff;\n  font-size: 18px;\n  line-height: 22px;\n  font-weight: 500;\n  margin-bottom: 1px;\n\n  display: flex;\n  gap: 6px;\n  align-items: center;\n"]))),Tn=k.ZP.div(q||(q=(0,w.Z)(["\n  position: relative;\n  background-color: var(--accent-transparent-color);\n  max-width: 65%;\n  padding: 8px;\n  border-radius: 10px;\n  margin-left: auto;\n  font-size: 15px;\n  line-height: 18px;\n\n  @media screen and (orientation: landscape) {\n    max-width: 230px;\n  }\n\n  @media screen and (min-width: 1280px) {\n    max-width: 230px;\n  }\n"]))),Dn=(0,k.ZP)(Tn)(U||(U=(0,w.Z)(["\n  max-width: 95%;\n  font-size: 32px;\n  line-height: 36px;\n\n  @media screen and (orientation: landscape) {\n    max-width: 95%;\n  }\n\n  @media screen and (min-width: 1280px) {\n    max-width: 95%;\n  }\n"]))),Wn=k.ZP.div(V||(V=(0,w.Z)(["\n  position: relative;\n  background-color: var(--main-transparent-color);\n  max-width: 65%;\n  padding: 8px;\n  border-radius: 10px;\n  font-size: 15px;\n  line-height: 18px;\n\n  @media screen and (orientation: landscape) {\n    max-width: 230px;\n  }\n\n  @media screen and (min-width: 1280px) {\n    max-width: 230px;\n  }\n"]))),En=(0,k.ZP)(Wn)(G||(G=(0,w.Z)(["\n  max-width: 95%;\n  font-size: 32px;\n  line-height: 36px;\n\n  @media screen and (orientation: landscape) {\n    max-width: 95%;\n  }\n\n  @media screen and (min-width: 1280px) {\n    max-width: 95%;\n  }\n"]))),Hn=((0,k.ZP)(Wn)(J||(J=(0,w.Z)(["\n  background-color: transparent;\n  max-width: 95%;\n"]))),k.ZP.p(Q||(Q=(0,w.Z)(["\n  word-wrap: break-word;\n  white-space: normal;\n  color: var(--chat-font-color);\n\n  & > a {\n    color: var(--link-color);\n  }\n"])))),Mn=(0,k.ZP)(Hn)(nn||(nn=(0,w.Z)(["\n  color: #ffffffdd;\n\n  & > a {\n    color: var(--accent-color);\n  }\n"]))),Bn=(k.ZP.p(en||(en=(0,w.Z)(["\n  position: absolute;\n  bottom: 5px;\n  right: 5px;\n  font-size: 11px;\n  color: #00000081;\n"]))),k.ZP.div(tn||(tn=(0,w.Z)(["\n  width: 100%;\n  padding: 10px;\n  height: 5vh;\n  min-height: 48px;\n"])))),Fn=k.ZP.form(on||(on=(0,w.Z)(["\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  justify-content: space-between;\n"]))),An=k.ZP.input(an||(an=(0,w.Z)(["\n  width: 100%;\n  height: 100%;\n  border-radius: 10px;\n  border: 1px solid #ddd;\n  outline: none;\n  padding: 8px;\n  padding-right: 32px;\n\n  font-family: var(--streams-secondary-font-family);\n  font-weight: 500;\n  font-size: 16px;\n\n  word-wrap: break-word;\n  white-space: normal;\n  background-color: var(--chat-background-color);\n  color: var(--chat-font-color);\n\n  &::placeholder {\n    user-select: none;\n\n    color: var(--chat-font-color);\n    font-size: 12px;\n  }\n"]))),Rn=(0,k.ZP)(An)(rn||(rn=(0,w.Z)(["\n  width: calc(100% - 54px);\n\n  background-color: #0f0f0f;\n  color: #ffffffdd;\n\n  &::placeholder {\n    color: #ffffffdd;\n  }\n"]))),$n=(0,k.ZP)(S.r)(sn||(sn=(0,w.Z)(["\n  width: 24px;\n  height: 24px;\n  fill: var(--accent-color);\n\n  transition: fill var(--animation-global);\n"]))),Kn=k.ZP.button(cn||(cn=(0,w.Z)(["\n  background-color: var(--main-color);\n  padding: 10px;\n  border: none;\n  border-radius: 50%;\n  outline: none;\n  color: #eae3d2;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: background-color var(--animation-global),\n    box-shadow var(--animation-global);\n\n  &:hover,\n  &:focus {\n    box-shadow: 2px 2px 12px 0px rgba(0, 0, 0, 0.5);\n  }\n\n  &:hover > svg,\n  &:focus > svg {\n    fill: var(--chat-background-color);\n  }\n"]))),Xn=(0,k.ZP)(Kn)(ln||(ln=(0,w.Z)(["\n  position: absolute;\n  bottom: 75px;\n  z-index: 5;\n\n  width: 36px;\n  height: 36px;\n\n  background-color: var(--main-semi-transparent-color);\n\n  &:hover > svg,\n  &:focus > svg {\n    fill: none;\n  }\n"]))),Yn=(0,k.ZP)(Z.r)(dn||(dn=(0,w.Z)(["\n  flex-shrink: 0;\n  stroke-width: 2;\n"]))),qn=(k.ZP.div(hn||(hn=(0,w.Z)(["\n  position: sticky;\n  top: 0;\n  right: 0;\n  z-index: 1;\n  padding: 4px;\n\n  margin-left: auto;\n  margin-bottom: 8px;\n\n  width: 100%;\n\n  background-color: var(--pinned-message-color);\n\n  border-radius: 10px;\n\n  transition: all var(--animation-global);\n\n  & div:last-child {\n    margin-bottom: 0;\n  }\n\n  & > p {\n    font-size: 12px;\n    line-height: 14px;\n    transition: font-size var(--animation-global);\n  }\n\n  & div {\n    font-size: 15px;\n    line-height: 18px;\n    transition: font-size var(--animation-global);\n  }\n\n  &.minimized {\n    width: 25px;\n    height: 25px;\n\n    right: 0;\n\n    border-radius: 50%;\n\n    & p,\n    & div {\n      font-size: 0px;\n      margin: 0px;\n      opacity: 0;\n    }\n\n    & svg {\n      visibility: visible;\n    }\n  }\n"]))),(0,k.ZP)(P.r)(pn||(pn=(0,w.Z)(["\n  position: absolute;\n  top: 2px;\n  right: 1px;\n  z-index: 5;\n\n  width: 22px;\n  height: 22px;\n\n  fill: var(--pin-icon-fill);\n\n  transition: transform var(--animation-global);\n\n  &.minimized {\n    transform: rotate(60deg);\n  }\n"])))),Un=(0,k.ZP)(qn)(mn||(mn=(0,w.Z)(["\n  top: 2px;\n  right: 0;\n  fill: var(--accent-color);\n  transform: rotate(60deg);\n  transition: transform var(--animation-global);\n\n  &.pinned {\n    transform: rotate(0deg);\n  }\n"]))),Vn=(0,k.ZP)(j.r)(un||(un=(0,w.Z)(["\n  position: absolute;\n  top: 2px;\n  right: 2px;\n\n  width: 22px;\n  height: 22px;\n\n  fill: #f9c8389e;\n\n  &:hover,\n  &:focus {\n    fill: var(--accent-color);\n  }\n"]))),Gn=(0,k.ZP)(Vn)(gn||(gn=(0,w.Z)(["\n  top: 2px;\n  right: 22px;\n"]))),Jn=(0,k.ZP)(v.r)(xn||(xn=(0,w.Z)(["\n  width: 12px;\n  height: 12px;\n\n  fill: #800000;\n\n  &:hover,\n  &:focus {\n    fill: var(--accent-color);\n  }\n"]))),Qn=((0,k.ZP)(y.r)(fn||(fn=(0,w.Z)(["\n  width: 20px;\n  height: 20px;\n\n  position: absolute;\n  top: 50%;\n  right: 6px;\n\n  transform: translateY(-50%);\n\n  fill: var(--link-color);\n\n  &:hover,\n  &:focus {\n    fill: var(--pinned-message-color);\n  }\n"]))),k.ZP.label(bn||(bn=(0,w.Z)(["\n  position: relative;\n  width: 100%;\n"]))),k.ZP.header(wn||(wn=(0,w.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n\n  width: 100%;\n  padding: 8px 12px;\n"]))),k.ZP.h2(kn||(kn=(0,w.Z)(["\n  display: flex;\n  align-items: center;\n  gap: 10px;\n\n  color: var(--chat-font-color);\n  font-size: 12px;\n  font-family: var(--streams-secondary-font-family);\n"]))),(0,k.ZP)(s.DS)(vn||(vn=(0,w.Z)(["\n  width: 20px;\n  height: 20px;\n"]))),k.ZP.button(jn||(jn=(0,w.Z)(["\n  position: absolute;\n  bottom: 40px;\n  left: -40px;\n\n  border: none;\n  outline: transparent;\n  border-top-left-radius: 5px;\n  border-bottom-left-radius: 5px;\n  padding: 0;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  height: 60px;\n  width: 42px;\n"])))),ne=k.ZP.div(Zn||(Zn=(0,w.Z)(["\n  position: absolute;\n  bottom: 5px;\n  left: -35px;\n\n  color: var(--main-color);\n  background-color: rgb(240, 240, 240);\n  border-radius: 50%;\n  overflow: hidden;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  font-size: 18px;\n  font-weight: 600;\n  height: 30px;\n  width: 30px;\n\n  &.big-number{\n    bottom: -5px;\n    left: -40px;\n\n    height: 40px;\n  width: 40px;\n  }\n"]))),ee=(0,k.ZP)(N)(yn||(yn=(0,w.Z)(["\n  stroke: var(--main-color);\n  transition: stroke var(--animation-global);\n"]))),te=(0,k.ZP)(_)(Pn||(Pn=(0,w.Z)(["\n  stroke: var(--main-color);\n  transition: stroke var(--animation-global);\n"])));var oe=t(5667);const ae=n=>{let{messages:e,socket:t,room:o}=n;const a=(0,c.useRef)(),[i,r]=(0,c.useState)(!0),s=/\b(?:https?|ftp):\/\/\S+\b/g;(0,c.useEffect)((()=>{l()})),console.log(29,"chatbody - room",o);const l=()=>{i&&oe.NY.scrollToBottom({containerId:"chat-box",duration:0})},d=async n=>{t.emit("message:delete",n.id)};return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(Nn,{id:"chat-box",ref:a,onScroll:()=>{r((n=>a.current.offsetHeight===a.current.scrollHeight-Math.ceil(a.current.scrollTop)||a.current.scrollHeight-Math.floor(a.current.scrollTop)&&a.current.scrollHeight-Math.ceil(a.current.scrollTop)<=a.current.offsetHeight&&a.current.scrollHeight-Math.floor(a.current.scrollTop)<=a.current.offsetHeight))},children:e.map((n=>n.roomLocation===o?n.username===localStorage.getItem("userName")&&n.userID===localStorage.getItem("userID")?(0,h.jsxs)(On,{children:[(0,h.jsxs)(Cn,{className:"sender__name",children:["\u0412\u0438 (",n.username,")"]}),(0,h.jsxs)(Dn,{children:[(0,h.jsx)(Gn,{onClick:()=>d(n),id:n._id}),(0,h.jsx)(Un,{className:n.isPinned?"pinned":"",onClick:()=>(n=>{t.emit("message:pin",n.id,{isPinned:!n.isPinned})})(n),id:n.id}),(0,h.jsx)(Mn,{dangerouslySetInnerHTML:{__html:n.text.replace(s,(n=>'<a href="'.concat(n,'" target="_blank">').concat(n,"</a>")))}})]})]},n.id):(0,h.jsxs)(On,{children:[(0,h.jsx)(Ln,{children:(0,h.jsxs)(_n,{children:[n.username,(0,h.jsx)(Jn,{onClick:()=>(async(n,e)=>{console.log(n,e),t.emit("user:ban",n,e)})(n.userID,n.userIP)})]})}),(0,h.jsxs)(En,{className:"message__recipient",children:[(0,h.jsx)(Vn,{onClick:()=>d(n),id:n._id}),(0,h.jsx)(Mn,{dangerouslySetInnerHTML:{__html:n.text.replace(s,(n=>'<a href="'.concat(n,'" target="_blank">').concat(n,"</a>")))}})]})]},n.id):null))}),!i&&(0,h.jsx)(Xn,{onClick:()=>{oe.NY.scrollToBottom({containerId:"chat-box",duration:0})},children:(0,h.jsx)(Yn,{})})]})},ie=n=>{let{socket:e,room:t}=n;const[o,i]=(0,c.useState)("");return(0,h.jsx)(Bn,{children:(0,h.jsxs)(Fn,{className:"form",onSubmit:async n=>{n.preventDefault(),console.log(o),console.log(o.trim()&&localStorage.getItem("userName"));const r=await a.Z.get("https://jsonip.com/");o.trim()&&localStorage.getItem("userName")&&e.emit("message",{text:o,username:localStorage.getItem("userName"),userID:localStorage.getItem("userID"),userIP:r.data.ip,id:"".concat(e.id).concat(Math.random()),socketID:e.id,roomLocation:t}),console.log({userName:localStorage.getItem("userName"),message:o}),i(""),oe.NY.scrollToBottom({containerId:"chat-box",duration:0})},children:[(0,h.jsx)(Rn,{type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043f\u043e\u0432\u0456\u0434\u043e\u043c\u043b\u0435\u043d\u043d\u044f",value:o,onChange:n=>i(n.target.value)}),(0,h.jsx)(Kn,{children:(0,h.jsx)($n,{})})]})})},re=n=>{let{socket:e,messages:t,room:o}=n;return(0,h.jsxs)(In,{children:[(0,h.jsx)(ae,{socket:e,messages:t,room:o}),(0,h.jsx)(ie,{socket:e,room:o})]})},se=n=>{let{page:e}=n;const[t,o]=(0,c.useState)(""),[i,r]=(0,c.useState)(""),[s,l]=(0,c.useState)(!1),[d,p]=(0,c.useState)(!1),[m,u]=(0,c.useState)([]),[g,w]=(0,c.useState)(0);console.log(33,e);const k=(n=>n.includes("dekidsfree")||n.includes("plkidsfree")?"/streams-kids/"+n.replace("kids","a1"):n.includes("kidsfree")||n.includes("beginner")?"/streams-kids/"+n.replace("kids",""):n.includes("kids")?"/streams-kids/"+n.split("kids")[0]:n.includes("trendets")?"/streams-kids/"+n:"/streams/"+n)(e);console.log(46,k);console.log("counter",g);const v=(0,c.useRef)(null);return(0,c.useEffect)((()=>{document.title="AP Chat Window",v.current=(0,f.io)("https://ap-chat-server.onrender.com/"),(n=>{const e=localStorage.getItem("userName"),t=localStorage.getItem("userID");if(!t&&e){const n=(0,x.x0)(8);r((e=>n)),localStorage.setItem("userID",n)}t&&e&&l((n=>!0))})(),v.current.on("connected",((n,e)=>{console.log(n),console.log(e),w((n=>n+1))})),v.current.on("connected:user",((n,e)=>{console.log("connected:user"),console.log("90",new Date),console.log("91",n),console.log("92",e),k===e&&w((n=>n+1))})),v.current.on("connected:disconnect",((n,e)=>{console.log("connected:disconnect"),console.log("99",new Date),console.log("100",n),console.log("101",e),k===e&&w((n=>n-1))}));return(async()=>{console.log("get");try{const n=(await a.Z.get("https://ap-chat-server.onrender.com/messages/room",{params:{room:k}})).data.filter((n=>new Date(n.createdAt).getDate()===(new Date).getDate()));console.log(n),u((e=>n))}catch(n){console.log(n)}})(),v.current.on("message",(async n=>{u((e=>[...e,n]));await(async()=>{try{await a.Z.post("https://ap-chat-server.onrender.com/messages",n)}catch(e){console.log(e)}})()})),v.current.on("message:get",(async n=>{console.log(n),u((e=>[...e,n]))})),v.current.on("message:pin",(async(n,e)=>{u((t=>(t[t.findIndex((e=>e.id===n))].isPinned=e.isPinned,[...t])));await(async()=>{try{await a.Z.patch("https://ap-chat-server.onrender.com/messages/".concat(n),e)}catch(t){console.log(t)}})()})),v.current.on("message:delete",(async n=>{console.log("delete fired"),u((e=>[...e.filter((e=>e.id!==n))]));await(async()=>{try{await a.Z.delete("https://ap-chat-server.onrender.com/messages/".concat(n))}catch(e){console.log(e)}})()})),v.current.on("user:ban",(async(n,e)=>{console.log("ban fired");await(async()=>{console.log("request fired"),console.log(n),console.log(e);try{await a.Z.patch("https://ap-chat-server.onrender.com/users/".concat(n),{isBanned:!0})}catch(t){console.log(t)}})()})),()=>{v.current.off("connected"),v.current.off("message"),v.current.disconnect()}}),[k]),(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)(Sn,{className:d?"shown":"hidden",children:[(0,h.jsx)(Qn,{onClick:()=>{p(!d)},children:d?(0,h.jsx)(te,{}):(0,h.jsx)(ee,{})}),(0,h.jsx)(ne,{className:g>99&&"big-number",children:g}),s?(0,h.jsx)(re,{socket:v.current,messages:m,room:k}):(0,h.jsxs)(b._Y,{onSubmit:n=>{n.preventDefault();const e=(0,x.x0)(8);r((n=>e)),localStorage.setItem("userName",t.trim()),localStorage.setItem("userID",e),localStorage.setItem("APLoggedIn",!0),l((n=>!n))},children:[(0,h.jsx)(b.mD,{children:"AP Open Chat"}),(0,h.jsx)(b.bt,{htmlFor:"username",children:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u0432\u0430\u0448\u0435 \u0456\u043c'\u044f \u0442\u0430 \u043f\u0440\u0456\u0437\u0432\u0438\u0449\u0435 \u043f\u043e\u0432\u043d\u0456\u0441\u0442\u044e"}),(0,h.jsx)(b._8,{type:"text",minLength:3,name:"username",id:"username",value:t,onChange:n=>o(n.target.value)}),(0,h.jsx)(b.bh,{children:"\u0413\u043e\u0442\u043e\u0432\u043e!"})]})]})})};var ce=t(3084),le=t(3899),de=t(2925);const he=()=>{const[n,e]=(0,c.useState)(!1),[t,d]=(0,c.useState)(!1),[m,g]=(0,c.useState)(!1),[x,f]=(0,c.useState)(!1),[b,w]=(0,c.useState)(!0),[k,v]=(0,c.useState)(""),[j,Z]=(0,c.useState)(!1),[y,P]=(0,c.useState)({}),[S,I]=(0,o.Z)(document.body),z=(n=>{switch(n){case"deutsch-a0":return"deutscha0";case"deutsch-a0_2":return"deutscha0_2";case"deutsch-a1":return"deutsch";case"deutsch-a1free":return"deutschfree";case"deutsch-a2":return"deutscha2";case"deutsch-a2free":return"deutscha2free";case"deutsch-b1":return"deutschb1";case"polski-a0":return"polskia0";case"polski-a0_2":return"polskia0_2";case"polski-a1":return"polski";case"polski-a1free":return"polskifree";case"polski-a2":return"polskia2";case"polski-b1":return"polskib1";default:return n}})((0,l.TH)().pathname.split("/teacher/")[1]);(0,c.useEffect)((()=>{document.title="Teacher ".concat(z.toLocaleUpperCase()," | AP Education");(async()=>{try{Z((n=>!0)),P((await a.Z.get("/collections")).data)}catch(n){console.log(n)}finally{Z((n=>!1))}})()}),[z]);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(ce.MS,{className:b?"":"hidden",children:[(0,h.jsx)(ce.n8,{onClick:()=>{k?"viewer"===k&&d((n=>!n)):d((n=>!n)),v(n||m||x?n=>"viewer":n=>"")},children:(0,h.jsx)(ce.nj,{})}),(0,h.jsx)(ce.zF,{onClick:()=>{k?"whiteboard"===k&&e((n=>!n)):e((n=>!n)),v(t||m||x?n=>"whiteboard":n=>"")},children:(0,h.jsx)(ce.$w,{})}),(0,h.jsx)(ce.hf,{onClick:()=>{k?"platform"===k&&g((n=>!n)):g((n=>!n)),v(t||n||x?n=>"platform":n=>"")},children:(0,h.jsx)(ce.fV,{})}),(0,h.jsx)(s.kd,{onClick:()=>{k?"kahoot"===k&&f((n=>!n)):f((n=>!n)),v(m||n||t?n=>"kahoot":n=>"")},children:(0,h.jsx)(s.ev,{})})]}),(0,h.jsx)(ce.Cq,{id:"no-transform",onClick:()=>{w((n=>!n))},children:b?(0,h.jsx)(ce.IL,{}):(0,h.jsx)(ce.cz,{})}),y.length&&(0,h.jsx)(le.A,{page:z,collection:y,sectionWidth:S,isViewerOpen:t,isOpenedLast:k}),(0,h.jsx)(de.s,{page:z,sectionWidth:S,isWhiteBoardOpen:n,isOpenedLast:k}),(0,h.jsx)(u,{page:z,sectionWidth:S,isPlatformOpen:m,isOpenedLast:k}),(0,h.jsx)(p,{page:z,sectionWidth:S,sectionHeight:I,isKahootOpen:x,isOpenedLast:k}),(0,h.jsx)(se,{page:z}),j&&(0,h.jsx)(r.sb,{children:(0,h.jsx)(i.a,{})})]})}},2810:(n,e,t)=>{t.r(e),t.d(e,{default:()=>f});var o=t(1488),a=t(5294),i=t(8313),r=t(610),s=t(2791),c=t(7689),l=t(7269),d=t(7364),h=t(184);const p=n=>{let{page:e,isPlatformOpen:t,isOpenedLast:o}=n;const[a,i]=(0,s.useState)(1),[r,c]=(0,s.useState)(1),[p,m]=(0,s.useState)([a]),u=async n=>{const e=parseInt(n.currentTarget.innerText);c(e)};return(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)(d.ke,{className:t?"shown":"hidden",style:{zIndex:"platform"===o?"4":"1"},children:[1===a&&(0,h.jsx)(d.gs,{onClick:()=>{e.includes("polski")&&(i((n=>n+2)),m((n=>[...n,a+2]))),i((n=>n+1)),m((n=>[...n,a+1]))},children:"+"}),a>1&&(0,h.jsx)(l.X$,{children:p.map(((n,e)=>(0,h.jsx)(l._L,{onClick:u,className:r===e+1?"active":"",tabIndex:-1,children:e+1},e)))}),(0,h.jsx)("iframe",{className:1===r&&"active",id:"platform-window",title:"platform-pin",src:"https://online.ap.education/school/",width:"100%",height:"100%"},a),a>1&&(0,h.jsx)("iframe",{className:2===r&&"active",id:"platform-window-".concat(a),title:"platform-pin-".concat(a),src:"https://online.ap.education/school/",width:"100%",height:"100%"},a+1),a>2&&(0,h.jsx)("iframe",{className:3===r&&"active",id:"platform-window-".concat(a),title:"platform-pin-".concat(a),src:"https://online.ap.education/school/",width:"100%",height:"100%"},a+2)]})})};var m=t(3084),u=t(3838),g=t(3857);const x=n=>{let{page:e,isWhiteBoardOpen:t,isOpenedLast:o,sectionWidth:a}=n;const[i,r]=(0,s.useState)(!0);return(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)(g.i,{className:t?"shown":"hidden",style:{zIndex:"whiteboard"===o?"3":"1",width:i?a:a/10*4},children:[(0,h.jsx)(u.xA,{onClick:()=>{r((n=>!n))},children:i?(0,h.jsx)(u.IC,{}):(0,h.jsx)(u.s2,{})}),(0,h.jsx)("iframe",{id:"whiteboard window",title:"whiteboard-pin",src:{a0:"http://go.limnu.com/poppy-naked",a0_2:"http://go.limnu.com/butterfly-organic",a1:"http://go.limnu.com/browallia-bursting",a2:"http://go.limnu.com/sealion-nasty",b1:"http://go.limnu.com/marker-powerless",b2:"http://go.limnu.com/skunk-outraged",c1:"http://go.limnu.com/hyacinth-dumb",a1free:"http://go.limnu.com/honda-patchy",a2free:"http://go.limnu.com/mirabilis-candied",a0kids:"https://limnu.com/d/draw.html?b=B_ot1T09RzScMNjo&",a1kids:"http://go.limnu.com/saucer-nutritious",a2kids:"http://go.limnu.com/tulip-hollow",b1kids:"http://go.limnu.com/boxwood-flexible",b2kids:"http://go.limnu.com/rattlesnake-naughty",c1kids:"http://go.limnu.com/rattlesnake-naughty",a1kidsfree:"http://go.limnu.com/cyclamen-depressed",dea1kids:"http://go.limnu.com/bellflower-hot",dekidsfree:"http://go.limnu.com/hyssop-dried",pla1kids:"http://go.limnu.com/duscle-bumpy",plkidsfree:"http://go.limnu.com/dahlia-bulky",b1kidsbeginner:"http://go.limnu.com/goatsbeard-naked",b2kidsbeginner:"http://go.limnu.com/caladium-pasteurized",test:"https://limnu.com/d/draw.html?b=B_N65K69RyegUKa5&",trendets:"http://go.limnu.com/phoenix-plump",deutscha0:"http://go.limnu.com/blanket-mealy",deutsch:"http://go.limnu.com/cobra-potent",deutscha2:"http://go.limnu.com/woodruff-dreamy",deutschb1:"http://go.limnu.com/backpack-obnoxious",deutschfree:"http://go.limnu.com/artemisia-exquisite",deutscha2free:"http://go.limnu.com/mouse-melodic",polskia0:"http://go.limnu.com/dahlia-junior",polski:"http://go.limnu.com/hippogryph-pouched",polskia2:"http://go.limnu.com/emu-meek",polskib1:"http://go.limnu.com/beetle-meek",polskifree:"http://go.limnu.com/bluebell-mammoth",trials:"http://go.limnu.com/hare-patchy",trials_kids:"http://go.limnu.com/pine-brisk",trials_pl:"http://go.limnu.com/cherry-arcane",trials_de:"http://go.limnu.com/blimp-numb"}[e],width:"100%",height:"100%"})]})})},f=()=>{const[n,e]=(0,s.useState)(!1),[t,l]=(0,s.useState)(!1),[d,u]=(0,s.useState)(!1),[g,f]=(0,s.useState)(!0),[b,w]=(0,s.useState)(""),[k,v]=(0,s.useState)(!1),[j,Z]=(0,s.useState)({}),[y,P]=(0,o.Z)(document.body),S=(n=>{switch(n){case"deutsch-a0":return"deutscha0";case"deutsch-a1":return"deutsch";case"deutsch-a1free":return"deutschfree";case"deutsch-a2":return"deutscha2";case"deutsch-a2free":return"deutscha2free";case"deutsch-b1":return"deutschb1";case"polski-a0":return"polskia0";case"polski-a1":return"polski";case"polski-a1free":return"polskifree";case"polski-a2":return"polskia2";case"polski-b1":return"polskib1";case"record":return"record";default:return n}})((0,c.TH)().pathname.split("/teacher/")[1]);(0,s.useEffect)((()=>{document.title="Teacher ".concat(S.toLocaleUpperCase()," | AP Education");(async()=>{try{v((n=>!0)),Z((await a.Z.get("/collections")).data)}catch(n){console.log(n)}finally{v((n=>!1))}})()}),[S]);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(m.N0,{className:g?"":"hidden",children:[(0,h.jsx)(m.zF,{onClick:()=>{b?"whiteboard"===b&&e((n=>!n)):e((n=>!n)),w(t||d?n=>"whiteboard":n=>"")},children:(0,h.jsx)(m.$w,{})}),(0,h.jsx)(m.hf,{onClick:()=>{b?"platform"===b&&u((n=>!n)):u((n=>!n)),w(t||n?n=>"platform":n=>"")},children:(0,h.jsx)(m.fV,{})})]}),(0,h.jsx)(m.We,{id:"no-transform",onClick:()=>{f((n=>!n))},children:g?(0,h.jsx)(m.IL,{}):(0,h.jsx)(m.cz,{})}),(0,h.jsx)(x,{page:S,sectionWidth:y,isWhiteBoardOpen:n,isOpenedLast:b}),(0,h.jsx)(p,{page:S,isPlatformOpen:d,isOpenedLast:b}),k&&(0,h.jsx)(r.sb,{children:(0,h.jsx)(i.a,{})})]})}}}]);
//# sourceMappingURL=Teacher Page.a9444982.chunk.js.map