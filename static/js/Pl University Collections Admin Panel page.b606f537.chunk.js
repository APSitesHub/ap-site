"use strict";(self.webpackChunkap_education=self.webpackChunkap_education||[]).push([[2974],{4600:(e,s,o)=>{o.r(s),o.d(s,{UniCollectionsAdminPanel:()=>h});var i=o(55294),t=o(97723),a=o(8313),n=o(55705),l=o(72791),c=o(8007),r=o(90026),p=o(17102),d=o(80184);i.Z.defaults.baseURL="https://ap-server-8qi1.onrender.com";const m=e=>{i.Z.defaults.headers.common.Authorization="Bearer ".concat(e)},h=()=>{const[e,s]=(0,l.useState)(!1),[o,h]=(0,l.useState)(!1);(0,l.useEffect)((()=>{document.title="Pl Uni 3D Collections Admin Panel | AP Education";(async()=>{console.log("token refresher");try{if(localStorage.getItem("isAdmin")){const e=await i.Z.post("admins/refresh/collections",{});console.log(e),h((e=>!0)),m(e.data.newToken)}}catch(e){console.log(e)}})()}),[o]);const g=c.Ry().shape({login:c.Z_().required("\u0412\u043a\u0430\u0436\u0456\u0442\u044c \u043b\u043e\u0433\u0456\u043d!"),password:c.Z_().required("\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c!")}),j=c.Ry().shape({pedagogium_logistics:c.Z_().optional(),pedagogium_prep:c.Z_().optional(),wstijo_logistics:c.Z_().optional(),wstijo_prep:c.Z_().optional(),wsbmir_logistics:c.Z_().optional(),wsbmir_prep:c.Z_().optional()});return(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)(r.Kq,{children:[!o&&(0,d.jsx)(n.J9,{initialValues:{login:"",password:""},onSubmit:async(e,o)=>{let{resetForm:t}=o;s((e=>!0));try{const o=await i.Z.post("/admins/login/collections",e);m(o.data.token),h((e=>!0)),localStorage.setItem("isAdmin",!0),t()}catch(a){console.error(a)}finally{s((e=>!1))}},validationSchema:g,children:(0,d.jsxs)(r.U0,{children:[(0,d.jsxs)(t.__,{children:[(0,d.jsx)(r.vD,{type:"text",name:"login",placeholder:"Login"}),(0,d.jsx)(r.aC,{component:"p",name:"login"})]}),(0,d.jsxs)(t.__,{children:[(0,d.jsx)(r.vD,{type:"password",name:"password",placeholder:"Password"}),(0,d.jsx)(r.aC,{component:"p",name:"password"})]}),(0,d.jsx)(r.Gh,{type:"submit",children:"\u0417\u0430\u043b\u043e\u0433\u0456\u043d\u0438\u0442\u0438\u0441\u044c"})]})}),o&&(0,d.jsx)(n.J9,{initialValues:{pedagogium_logistics:"",pedagogium_prep:"",wstijo_logistics:"",wstijo_prep:"",wsbmir_logistics:"",wsbmir_prep:""},onSubmit:async(e,o)=>{let{resetForm:t}=o;s((e=>!0)),Object.keys(e).forEach((s=>e[s]=e[s].replace('width="640" height="480"','width="100%" height="100%"')));try{const o=await i.Z.patch("/unicollections",e);console.log(o),t(),alert("\u041a\u043e\u043b\u043b\u0435\u043a\u0446\u0456\u0457 \u0437\u0430\u043c\u0456\u043d\u0438\u043b\u0438\u0441\u044f, \u043c\u043e\u043b\u043e\u0434\u0435\u0446\u044c")}catch(a){console.error(a),alert("\u0429\u043e\u0441\u044c \u043d\u0435 \u043f\u0440\u043e\u043a\u043d\u0443\u043b\u043e!")}finally{s((e=>!1))}},validationSchema:j,children:(0,d.jsxs)(r.Od,{children:[(0,d.jsxs)(p.Sj,{children:[(0,d.jsx)(p.XG,{children:"Pedagogium (Wy\u017csza Szko\u0142a Nauk Spo\u0142ecznych)"}),(0,d.jsxs)(t.__,{children:[(0,d.jsx)(r.vD,{type:"text",name:"pedagogium_logistics",placeholder:"Pedagogium Logistics Collection"}),(0,d.jsx)(r.aC,{component:"p",name:"pedagogium"})]}),(0,d.jsxs)(t.__,{children:[(0,d.jsx)(r.vD,{type:"text",name:"pedagogium_prep",placeholder:"Pedagogium Przygotowawczy Kurs Collection"}),(0,d.jsx)(r.aC,{component:"p",name:"pedagogium"})]})]}),(0,d.jsxs)(p.Sj,{children:[(0,d.jsx)(p.XG,{children:"WSTIJO (Wyzsza Szko\u0142a Turystyki i Jezykow Obcych w Warszawie)"}),(0,d.jsxs)(t.__,{children:[(0,d.jsx)(r.vD,{type:"text",name:"wstijo_logistics",placeholder:"WSTIJO Logistics Collection"}),(0,d.jsx)(r.aC,{component:"p",name:"wstijo_logistics"})]}),(0,d.jsxs)(t.__,{children:[(0,d.jsx)(r.vD,{type:"text",name:"wstijo_prep",placeholder:"WSTIJO Przygotowawczy Kurs Collection"}),(0,d.jsx)(r.aC,{component:"p",name:"wstijo_prep"})]})]}),(0,d.jsxs)(p.Sj,{children:[(0,d.jsx)(p.XG,{children:"WSBMIR (Wy\u017csza Szko\u0142a Biznesu, Medi\xf3w i Reklamy)"}),(0,d.jsxs)(t.__,{children:[(0,d.jsx)(r.vD,{type:"text",name:"wsbmir_logistics",placeholder:"WSBMIR Logistics Collection"}),(0,d.jsx)(r.aC,{component:"p",name:"wsbmir_logistics"})]}),(0,d.jsxs)(t.__,{children:[(0,d.jsx)(r.vD,{type:"text",name:"wsbmir_prep",placeholder:"WSBMIR Przygotowawczy Kurs Collection"}),(0,d.jsx)(r.aC,{component:"p",name:"wsbmir_prep"})]})]}),(0,d.jsx)(r.Gh,{type:"submit",children:"\u0417\u0430\u043c\u0456\u043d\u0438\u0442\u0438 \u043b\u0456\u043d\u043a\u0438"})]})}),e&&(0,d.jsx)(a.a,{})]})})}}}]);
//# sourceMappingURL=Pl University Collections Admin Panel page.b606f537.chunk.js.map