"use strict";(self.webpackChunkap_education=self.webpackChunkap_education||[]).push([[2341],{31431:(e,t,a)=>{a.r(t),a.d(t,{default:()=>x});var s=a(55294),o=a(2605),r=a(97723),n=a(8313),c=a(10610),l=a(55705),i=a(72791),d=a(57689),h=a(8007),p=a(3201),g=a(17102),m=a(80184);s.Z.defaults.baseURL="https://ap-server-8qi1.onrender.com";const u=e=>{s.Z.defaults.headers.common.Authorization="Bearer ".concat(e)},x=()=>{const[e,t]=(0,i.useState)(!1),[a,x]=(0,i.useState)({}),[j,w]=(0,i.useState)(!1),y=h.Ry().shape({login:h.Z_().required("\u0412\u043a\u0430\u0436\u0456\u0442\u044c \u043b\u043e\u0433\u0456\u043d!"),password:h.Z_().required("\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c!")});return(0,i.useLayoutEffect)((()=>{(async()=>{try{const e=await s.Z.get("/");console.log(e.data)}catch(e){console.log(e)}})();(async()=>{if(console.log("token refresher"),localStorage.getItem("teacherLogin"))try{t(!0);const e=await s.Z.post("/teachers/refresh",{login:localStorage.getItem("teacherLogin")});u(e.data.token),x((t=>e.data.teacher)),w((e=>!0))}catch(e){console.log(e)}finally{t(!1)}})()}),[]),(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)(o.CS,{children:[j?(0,m.jsx)(d.j3,{context:[a]}):(0,m.jsx)(l.J9,{initialValues:{login:"",password:""},onSubmit:async(e,t)=>{let{resetForm:a}=t;e.login=e.login.toLowerCase().trim().trimStart(),e.password=e.password.trim().trimStart();try{const t=await s.Z.post("/teachers/login",e);u(t.data.token),w((e=>!0)),x((e=>t.data.teacher)),localStorage.setItem("teacherLogin",e.login),a()}catch(o){console.error(o)}},validationSchema:y,children:(0,m.jsxs)(g.U0,{children:[(0,m.jsx)(p.P6,{}),(0,m.jsxs)(p.DO,{children:[(0,m.jsx)(p.Qw,{children:"\u041f\u0440\u0438\u0432\u0456\u0442!"}),"\u0426\u0435 \u0441\u0442\u043e\u0440\u0456\u043d\u043a\u0430 \u0434\u043b\u044f \u0432\u0438\u043a\u043b\u0430\u0434\u0430\u0447\u0456\u0432. ",(0,m.jsx)("br",{}),"\u042f\u043a\u0449\u043e \u0432\u0438 \u0432\u0438\u043a\u043b\u0430\u0434\u0430\u0447, \u0432\u0432\u0435\u0434\u0456\u0442\u044c \u0432\u0430\u0448\u0456 \u043b\u043e\u0433\u0456\u043d \u0442\u0430 \u043f\u0430\u0440\u043e\u043b\u044c."]}),(0,m.jsxs)(r.__,{children:[(0,m.jsx)(p.vJ,{type:"text",name:"login",placeholder:"Login"}),(0,m.jsx)(p.NK,{component:"p",name:"login"})]}),(0,m.jsxs)(r.__,{children:[(0,m.jsx)(p.vJ,{type:"password",name:"password",placeholder:"Password"}),(0,m.jsx)(p.NK,{component:"p",name:"password"})]}),(0,m.jsx)(g.Gh,{type:"submit",children:"\u0423\u0432\u0456\u0439\u0442\u0438"})]})}),e&&(0,m.jsx)(c.sb,{children:(0,m.jsx)(n.a,{})})]})})}}}]);
//# sourceMappingURL=Speakings teacher page.143edf58.chunk.js.map