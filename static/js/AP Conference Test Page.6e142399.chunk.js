"use strict";(self.webpackChunkap_education=self.webpackChunkap_education||[]).push([[2262],{19731:(t,n,e)=>{e.r(n),e.d(n,{default:()=>b});var o=e(55294),a=e(97723),s=e(67527),i=e(55705),r=e(17102),l=e(72791),c=e(8007),d=e(57689),p=e(84528),h=e(47418),m=e(93874),u=e(80184);const x=t=>{let{platformLink:n,handleExit:e}=t;const[o,a]=(0,l.useState)("https://online.ap.education/school/"),s=(0,d.TH)().search.slice(1),[i,r]=(0,l.useState)(0);(0,l.useEffect)((()=>{a(n||s?s||n:"https://online.ap.education/school/")}),[n,s]),(0,l.useEffect)((()=>{const t=new Date("2024-12-14T14:15:00+02:00"),n=()=>{const n=new Date,o=(0,p.zW)(n,"Europe/Kiev"),a=(0,h.c)(t,o);r(a),a<=0&&e()};n();const o=setInterval((()=>{n()}),1e3);return()=>clearInterval(o)}),[e]);return(0,u.jsxs)(m.ll,{children:[(0,u.jsxs)(m.lp,{children:[(0,u.jsxs)("div",{style:{marginLeft:"20px",fontWeight:"700"},children:["Time Left: ",(t=>{const n=Math.floor(t/60),e=t%60;return"".concat(n,":").concat(e<10?"0":"").concat(e)})(i)]})," ",(0,u.jsx)(m.zY,{})]}),(0,u.jsx)(m._$,{children:(0,u.jsx)("iframe",{id:"platform-window",title:"platform-pin",src:o,width:"100%",height:"100%",allow:"microphone *"})})]})},f={position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},g={color:"white",fontSize:"20px",marginBottom:"20px",margintLeft:"10px",margintRight:"10px",maxWidth:"375px",textAlign:"center"},I={display:"flex",flexDirection:"column",color:"white",fontSize:"20px",marginBottom:"20px"},w={fontSize:"40px"},k={display:"flex",flexDirection:"column",gap:"4px",textAlign:"center"},j={padding:"10px 20px",backgroundColor:"#4CAF50",color:"white",border:"none",cursor:"pointer"},v={position:"absolute",bottom:"20px",right:"20px",cursor:"pointer",zIndex:9999},y={fill:"white",fontWeight:"bold"},b=()=>{const[t,n]=(0,l.useState)(!1),[e,d]=(0,l.useState)({}),[m,b]=(0,l.useState)(""),[S,T]=(0,l.useState)("https://online.ap.education/"),[C,L]=(0,l.useState)(!0),[Z,z]=(0,l.useState)(!1),[A,D]=(0,l.useState)(!1),[M,U]=(0,l.useState)(!1),[B,_]=(0,l.useState)(null),[E,P]=(0,l.useState)(!1);o.Z.defaults.baseURL="https://ap-server-8qi1.onrender.com",(0,l.useEffect)((()=>{document.title="My AP | AP Education";(async()=>{console.log("token refresher");try{const t=await o.Z.post("/users/refresh",{mail:localStorage.getItem("mail")});n((t=>!0)),console.log(73,t.data.user.platformToken),d((n=>({...t.data.user})));const e=t.data.user.lang.split("/");e.length>1&&!m?b(e[0]):e.length<=1&&b(t.data.user.lang)}catch(t){console.log(t)}})();(async()=>{const t={en1:e.platformToken?"https://online.ap.education/Account/LoginByToken?token=".concat(e.platformToken,"&redirectUrl=").concat(encodeURIComponent("https://online.ap.education/MarathonClass/?marathonId=37835&pupilId=".concat(e.pupilId,"&marathonLessonId=1157251"))):"https://online.ap.education/MarathonClass/?marathonId=37835&pupilId=".concat(e.pupilId,"&marathonLessonId=1157251"),en2:e.platformToken?"https://online.ap.education/Account/LoginByToken?token=".concat(e.platformToken,"&redirectUrl=").concat(encodeURIComponent("https://online.ap.education/MarathonClass/?marathonId=49509&pupilId=".concat(e.pupilId,"&marathonLessonId=1157255"))):"https://online.ap.education/MarathonClass/?marathonId=49509&pupilId=".concat(e.pupilId,"&marathonLessonId=1157255"),enkids1:e.platformToken?"https://online.ap.education/Account/LoginByToken?token=".concat(e.platformToken,"&redirectUrl=").concat(encodeURIComponent("https://online.ap.education/MarathonClass/?marathonId=40552&pupilId=".concat(e.pupilId,"&marathonLessonId=1157234"))):"https://online.ap.education/MarathonClass/?marathonId=40552&pupilId=".concat(e.pupilId,"&marathonLessonId=1157234"),enkids2:e.platformToken?"https://online.ap.education/Account/LoginByToken?token=".concat(e.platformToken,"&redirectUrl=").concat(encodeURIComponent("https://online.ap.education/MarathonClass/?marathonId=50784&pupilId=".concat(e.pupilId,"&marathonLessonId=1157243"))):"https://online.ap.education/MarathonClass/?marathonId=50784&pupilId=".concat(e.pupilId,"&marathonLessonId=1157243")},n="en"===m&&"1"===e.marathonNumber?"en1":"en"===m&&"2"===e.marathonNumber?"en2":"en"!==m||e.marathonNumber?"enkids"===m&&"1"===e.marathonNumber?"enkids1":"enkids"===m&&"2"===e.marathonNumber?"enkids2":"enkids"!==m||e.marathonNumber?"":"enkids2":"en2";console.log(t[n]),T((e=>t[n]))})();const t=setInterval((()=>{(()=>{const t=new Date,n=(0,p.zW)(t,"Europe/Kiev"),e=new Date("2024-12-14T13:29:30+02:00"),o=new Date("2024-12-14T14:15:00+02:00"),a=(0,h.c)(e,n),s=(0,h.c)(o,n);a<0&&L(!1),s<=0&&z(!0)})()}),1e3);return()=>clearInterval(t)}),[m,e.pupilId,e.marathonNumber,e.platformToken]);const R=c.Ry().shape({mail:c.Z_().required("\u0412\u043a\u0430\u0436\u0456\u0442\u044c \u043f\u043e\u0448\u0442\u0443, \u0437\u0430 \u044f\u043a\u043e\u044e \u0432\u0438 \u0437\u0430\u0440\u0435\u0454\u0441\u0442\u0440\u043e\u0432\u0430\u043d\u0456 \u043d\u0430 \u043d\u0430\u0448\u0456\u0439 \u043f\u043b\u0430\u0442\u0444\u043e\u0440\u043c\u0456!"),password:c.Z_().required("\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c, \u044f\u043a\u0438\u0439 \u0432\u0438 \u0432\u0438\u043a\u043e\u0440\u0438\u0441\u0442\u043e\u0432\u0443\u0454\u0442\u0435 \u0434\u043b\u044f \u0432\u0445\u043e\u0434\u0443 \u043d\u0430 \u043d\u0430\u0448\u0443 \u043f\u043b\u0430\u0442\u0444\u043e\u0440\u043c\u0443!")});return(0,u.jsxs)(s.QU,{children:[t?!A&&!Z&&!M&&(0,u.jsx)("div",{style:f,children:C?(0,u.jsx)("div",{style:g,children:(0,u.jsx)("p",{children:"\u0422\u0435\u0441\u0442 \u0433\u043e\u0442\u0443\u0454\u0442\u044c\u0441\u044f \u0434\u043e \u0442\u0435\u0431\u0435, \u0442\u0430\u043a \u044f\u043a \u0442\u0438 \u0433\u043e\u0442\u0443\u0432\u0430\u0432\u0441\u044f \u0434\u043e \u043d\u044c\u043e\u0433\u043e. \u0429\u0435 \u0442\u0440\u043e\u0445\u0438 \u0447\u0430\u0441\u0443, \u0449\u043e\u0431 \u043f\u0435\u0440\u0435\u043a\u043e\u043d\u0430\u0442\u0438\u0441\u044f, \u0449\u043e \u0442\u0438 \u0432\u0441\u0435 \u0437\u043d\u0430\u0454\u0448) \u0421\u043a\u043e\u0440\u043e \u043f\u043e\u0447\u043d\u0435\u043c\u043e!"})}):(0,u.jsx)("button",{onClick:()=>{const t=(new Date).toISOString();localStorage.setItem("testStartTime",t),_(t),D(!0)},style:j,children:"\u0420\u043e\u0437\u043f\u043e\u0447\u0430\u0442\u0438 \u0442\u0435\u0441\u0442"})}):(0,u.jsx)(i.J9,{initialValues:{mail:"",password:""},onSubmit:async(t,e)=>{let{resetForm:a}=e;t.mail=t.mail.toLowerCase().trim().trimStart(),t.password=t.password.trim().trimStart();try{const e=await o.Z.post("/users/login",t);console.log(e),s=e.data.token,o.Z.defaults.headers.common.Authorization="Bearer ".concat(s),n((t=>!0)),d((t=>({...e.data.user})));const i=e.data.user.lang.split("/");i.length>1&&b(i[0]),localStorage.setItem("mail",t.mail),P(!1),a()}catch(i){401===i.response.status&&P(!0),console.error(i)}var s},validationSchema:R,children:(0,u.jsxs)(r.U0,{children:[(0,u.jsx)(a.hQ,{}),(0,u.jsx)(a.T$,{}),(0,u.jsx)(s.YA,{children:"\u041f\u0440\u0438\u0432\u0456\u0442! \u0412\u0432\u0435\u0434\u0456\u0442\u044c \u0434\u0430\u043d\u0456 \u0434\u043b\u044f \u0432\u0445\u043e\u0434\u0443 \u043d\u0430 \u043f\u043b\u0430\u0442\u0444\u043e\u0440\u043c\u0443."}),(0,u.jsxs)(a.__,{children:[(0,u.jsx)(r.vD,{type:"text",name:"mail",placeholder:"Login",onBlur:()=>P(!1)}),(0,u.jsx)(r.aC,{component:"p",name:"mail",type:"email"})]}),(0,u.jsxs)(a.__,{children:[(0,u.jsx)(r.vD,{type:"password",name:"password",placeholder:"Password",onBlur:()=>P(!1)}),(0,u.jsx)(r.aC,{component:"p",name:"password"})]}),(0,u.jsx)(r.Gh,{type:"submit",children:"\u0423\u0432\u0456\u0439\u0442\u0438"}),(0,u.jsx)(s.Yx,{style:E?{opacity:"1"}:{opacity:"0"},children:"\u041b\u043e\u0433\u0456\u043d \u0430\u0431\u043e \u043f\u0430\u0440\u043e\u043b\u044c \u0432\u0432\u0435\u0434\u0435\u043d\u043e \u043d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e!"})]})}),A&&!M&&(0,u.jsx)(x,{platformLink:S,handleExit:()=>{localStorage.removeItem("testStartTime"),U(!0),D(!1)}}),(M||Z)&&(0,u.jsx)("div",{style:f,children:(0,u.jsxs)("div",{children:[(0,u.jsxs)("div",{style:k,children:[(0,u.jsx)("div",{style:g,children:"\u0422\u0435\u0441\u0442 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043e"}),(0,u.jsxs)("div",{style:I,children:[(0,u.jsx)("p",{children:"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043b\u044f \u0432\u0438\u0445\u043e\u0434\u0443"}),(0,u.jsx)("p",{style:w,children:(0,u.jsx)("b",{children:"quitconf2024"})})]})]}),(0,u.jsx)("div",{style:v,children:(0,u.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",width:"32",height:"32",style:y,children:(0,u.jsx)("path",{d:"M30 15v13.59L1.71.29.29 1.71 28.59 30H16v2h15a1 1 0 0 0 1-1V15z","data-name":"8-Arrow Down"})})})]})})]})}},93874:(t,n,e)=>{e.d(n,{_$:()=>p,ll:()=>u,lp:()=>h,zY:()=>m});var o,a,s,i,r,l=e(30168),c=e(96739),d=e(76487);const p=d.ZP.div(o||(o=(0,l.Z)(["\n  height: 100vh;\n  width: 100vw;\n\n  overflow: hidden;\n\n  position: absolute;\n  top: 0;\n  left: 0;\n\n  font-family: var(--streams-font-family);\n\n  transition: transform var(--animation-global);\n\n  &.hidden {\n    transform: translateX(-100%);\n  }\n\n  &.shown {\n    transform: translateX(0);\n  }\n"]))),h=d.ZP.div(a||(a=(0,l.Z)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  width: calc(100% - 17.5px);\n  height: 64px;\n  z-index: 5;\n\n  background-color: white;\n"]))),m=(0,d.ZP)(c.TR)(s||(s=(0,l.Z)(["\n  display: block;\n  flex-shrink: 0;\n  width: 173px;\n  height: 34px;\n\n  margin: 0 auto;\n"]))),u=d.ZP.div(i||(i=(0,l.Z)(["\n  width: 100%;\n  height: 100%;\n"])));d.ZP.video(r||(r=(0,l.Z)(["\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  object-fit: cover;\n\n  width: 100%;\n  height: calc(100% - 64px);\n"])))}}]);
//# sourceMappingURL=AP Conference Test Page.6e142399.chunk.js.map