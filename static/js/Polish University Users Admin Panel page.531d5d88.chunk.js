"use strict";(self.webpackChunkap_education=self.webpackChunkap_education||[]).push([[8266],{7673:(n,e,a)=>{a.d(e,{Gh:()=>q,He:()=>X,Hx:()=>$,Jc:()=>tn,Kq:()=>B,Lv:()=>Y,OD:()=>E,P_:()=>J,Sb:()=>U,U0:()=>H,Xv:()=>Q,aC:()=>A,aJ:()=>en,az:()=>F,bN:()=>an,hj:()=>G,jj:()=>nn,jr:()=>L,me:()=>V,vD:()=>N,x2:()=>K});var t,i,o,r,s,d,l,p,c,m,x,h,u,g,w,v,Z,y,f,b,j,I,z,S,k,P,_,D,W=a(30168),C=a(97723),M=a(55705),R=a(19920),O=a(76487),T=a(37269);const B=O.ZP.section(t||(t=(0,W.Z)(["\n  height: max-content;\n  padding: 30px 20px;\n  display: flex;\n  align-items: flex-start;\n\n  gap: 30px;\n"]))),H=(0,O.ZP)(M.l0)(i||(i=(0,W.Z)(["\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n\n  display: flex;\n  flex-direction: column;\n  gap: 35px;\n"]))),J=(0,O.ZP)(M.l0)(o||(o=(0,W.Z)(["\n  margin: 0 auto;\n\n  position: sticky;\n  top: 50%;\n\n  transform: translateY(-50%);\n\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n"]))),L=(0,O.ZP)(M.l0)(r||(r=(0,W.Z)(["\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: 100%;\n  max-width: 400px;\n\n  background-color: white;\n  padding: 24px;\n  border-radius: 24px;\n\n  display: flex;\n  flex-direction: column;\n  gap: 15px;\n"]))),q=(0,O.ZP)(C.Mg)(s||(s=(0,W.Z)(["\n  margin: 0 auto;\n  height: 48px;\n  padding: 0;\n"]))),N=(0,O.ZP)(C.II)(d||(d=(0,W.Z)(["\n  width: 240px;\n  padding: 8px 10px;\n  font-size: 16px;\n  height: 40px;\n  -webkit-text-stroke: 0px;\n\n  border: 2px solid var(--main-color);\n\n  &.error {\n    border-color: red;\n  }\n\n  @media screen and (min-width: 768px) {\n    width: 360px;\n  }\n"]))),A=(0,O.ZP)(C.r2)(l||(l=(0,W.Z)(["\n  color: var(--main-color);\n  font-size: 12px;\n  font-weight: 500;\n  position: static;\n  max-width: 240px;\n\n  @media screen and (min-width: 768px) {\n    max-width: 360px;\n  }\n"]))),E=O.ZP.table(p||(p=(0,W.Z)(["\n  max-width: 50vw;\n  min-height: 80vh;\n  margin: 0 auto;\n\n  table-layout: auto;\n  width: 100%;\n\n  text-align: center;\n  border: 1px solid #000;\n  border-collapse: collapse;\n"]))),F=O.ZP.caption(c||(c=(0,W.Z)(["\n  caption-side: top;\n  margin-bottom: 60px;\n"]))),V=(O.ZP.span(m||(m=(0,W.Z)(["\n  font-size: 11px;\n"]))),O.ZP.tr(x||(x=(0,W.Z)(["\n  border: 1px solid #000;\n"])))),U=O.ZP.th(h||(h=(0,W.Z)(["\n  border: 1px solid #000;\n  padding: 3px;\n"]))),X=(O.ZP.div(u||(u=(0,W.Z)(["\n  display: flex;\n  align-items: center;\n  gap: 6px;\n\n  position: relative;\n"]))),O.ZP.td(g||(g=(0,W.Z)(["\n  border: 1px solid #000;\n  padding: 3px;\n  height: 3em;\n\n  &.last-name {\n    text-transform: capitalize;\n  }\n\n  &.attention {\n    color: red;\n  }\n\n  &.error {\n    background-color: #ff0000;\n  }\n"])))),$=((0,O.ZP)(X)(w||(w=(0,W.Z)(["\n  text-align: start;\n  padding-left: 8px;\n  max-width: 50vw;\n"]))),O.ZP.button(v||(v=(0,W.Z)(["\n  background-color: transparent;\n  border: 1px solid var(--accent-color);\n  border-radius: 5px;\n"])))),G=O.ZP.button(Z||(Z=(0,W.Z)(["\n  background-color: transparent;\n  border: 1px solid var(--main-color);\n  border-radius: 5px;\n"]))),K=((0,O.ZP)(G)(y||(y=(0,W.Z)(["\n  &.banned {\n    border-color: #023020;\n  }\n  &.not_banned {\n    border-color: #8b0000;\n  }\n"]))),(0,O.ZP)(T.r)(f||(f=(0,W.Z)(["\n  width: 18px;\n  height: 12px;\n\n  color: #000;\n\n  transition: color var(--animation-global);\n\n  &:hover {\n    color: var(--main-color);\n  }\n"]))),O.ZP.div(b||(b=(0,W.Z)(["\n  position: absolute;\n  top: 100%;\n  left: 0;\n"]))),O.ZP.button(j||(j=(0,W.Z)(["\n  width: 100%;\n  text-transform: capitalize;\n"]))),O.ZP.p(I||(I=(0,W.Z)(["\n  font-size: 10px;\n  margin-bottom: 3px;\n  text-align: start;\n"])))),Y=(0,O.ZP)(E)(z||(z=(0,W.Z)(["\n  max-width: 80vw;\n"]))),Q=(0,O.ZP)(R.Ow)(S||(S=(0,W.Z)(["\n  border-radius: 50px;\n"]))),nn=O.ZP.p(k||(k=(0,W.Z)(["\n  color: var(--main-color);\n  text-align: center;\n  margin-top: 8px;\n  font-size: 12px;\n  font-weight: 500;\n  position: static;\n  max-width: 240px;\n\n  @media screen and (min-width: 768px) {\n    max-width: 360px;\n  }\n"]))),en=O.ZP.div(P||(P=(0,W.Z)(["\n  position: absolute;\n  top: 60px;\n  left: 50%;\n\n  display: flex;\n  gap: 16px;\n\n  transform: translateX(-50%);\n"]))),an=O.ZP.label(_||(_=(0,W.Z)(["\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n  width: 100%;\n  position: relative;\n"]))),tn=(0,O.ZP)(R.Ow)(D||(D=(0,W.Z)(["\n  width: 280px;\n  border-radius: 50px;\n"])))},35367:(n,e,a)=>{a.d(e,{NZ:()=>k,Nc:()=>W,Sq:()=>_,bH:()=>P,ih:()=>M,pv:()=>D,tA:()=>C,xA:()=>z,zN:()=>S});var t,i,o,r,s,d,l,p,c,m,x,h,u,g,w,v,Z,y=a(30168),f=a(97723),b=a(55705),j=a(76487),I=a(94662);j.ZP.section(t||(t=(0,y.Z)(["\n  height: max-content;\n  padding: 30px 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]))),(0,j.ZP)(b.l0)(i||(i=(0,y.Z)(["\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 35px;\n"]))),(0,j.ZP)(b.l0)(o||(o=(0,y.Z)(["\n  margin: 0 auto;\n\n  display: flex;\n  flex-direction: column;\n  gap: 35px;\n"]))),(0,j.ZP)(f.Mg)(r||(r=(0,y.Z)(["\n  margin: 0 auto;\n"]))),(0,j.ZP)(f.II)(s||(s=(0,y.Z)(["\n  border: 2px solid var(--main-color);\n"]))),(0,j.ZP)(f.II)(d||(d=(0,y.Z)(["\n  border-radius: 0;\n  width: 35vw;\n  height: 75vh;\n  scrollbar-width: thin;\n  background-color: transparent;\n"]))),(0,j.ZP)(f.r2)(l||(l=(0,y.Z)(["\n  position: static;\n  color: var(--main-color);\n  font-size: 24px;\n  font-weight: 700;\n  bottom: -1.1em;\n"])));const z=j.ZP.ul(p||(p=(0,y.Z)(["\n  display: flex;\n  flex-wrap: wrap;\n  gap: 14px;\n\n  text-transform: capitalize;\n  font-weight: 600;\n  margin-left: auto;\n"]))),S=j.ZP.h2(c||(c=(0,y.Z)(["\n  font-size: 32px;\n  text-align: center;\n  margin-bottom: 12px;\n"]))),k=j.ZP.li(m||(m=(0,y.Z)(["\n  width: 100%;\n  flex-basis: 40%;\n  flex-grow: 0;\n"]))),P=j.ZP.ul(x||(x=(0,y.Z)(["\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n"]))),_=j.ZP.li(h||(h=(0,y.Z)(["\n  font-size: 14px;\n  font-weight: 400;\n  display: flex;\n  gap: 20px;\n  justify-content: space-between;\n  padding-bottom: 5px;\n  border-bottom: 1px solid black;\n"]))),D=j.ZP.span(u||(u=(0,y.Z)(["\n  min-width: 24px;\n"]))),W=j.ZP.span(g||(g=(0,y.Z)(["\n  min-width: 120px;\n  text-align: center;\n"]))),C=j.ZP.span(w||(w=(0,y.Z)(["\n  min-width: 100px;\n  text-align: center;\n"]))),M=(j.ZP.p(v||(v=(0,y.Z)(["\n  display: flex;\n  flex-direction: row;\n  gap: 20px;\n"]))),(0,j.ZP)(I.ZP)(Z||(Z=(0,y.Z)(["\n  width: 100%;\n  font-size: 14px;\n  border: 2px solid var(--main-color);\n\n  line-height: 1;\n\n  @media screen and (min-width: 768px) {\n    font-size: 19px;\n  }\n\n  &:hover,\n  &:focus {\n    background-color: var(--secondary-burnt-color);\n    outline: transparent;\n  }\n"]))))},33642:(n,e,a)=>{a.r(e),a.d(e,{default:()=>g});var t=a(55294),i=a(60091),o=a(97723),r=a(8313),s=a(55705),d=a(19920),l=a(72791),p=a(8007),c=a(7673),m=a(31356),x=a(80184);t.Z.defaults.baseURL="https://ap-server-8qi1.onrender.com";const h=n=>{let{userToEdit:e,updateUser:a,closeEditForm:i,uniOptions:h,pedagogiumMarathonOptions:u,wstijoMarathonOptions:g,wsbmirMarathonOptions:w}=n;const[v,Z]=(0,l.useState)(!1),[y,f]=(0,l.useState)(h.find((n=>n.value===e.university))),[b,j]=(0,l.useState)(!1),[I,z]=(0,l.useState)("WSTIJO (Wyzsza Szko\u0142a Turystyki i Jezykow Obcych w Warszawie)"===y.value?g.find((n=>n.value===e.marathonId)):"WSBMIR (Wy\u017csza Szko\u0142a Biznesu, Medi\xf3w i Reklamy)"===y.value?w.find((n=>n.value===e.marathonId)):u.find((n=>n.value===e.marathonId))),[S,k]=(0,l.useState)(!1),P=(0,l.useRef)();console.log(e);const _={crmId:e.crmId||"",contactId:e.contactId||"",name:e.name,mail:e.mail,password:e.password,pupilId:e.pupilId,marathonId:e.marathonId||"",university:e.university},D=p.Ry().shape({name:p.Z_().required("\u0406\u043c'\u044f - \u043e\u0431\u043e\u0432'\u044f\u0437\u043a\u043e\u0432\u0435 \u043f\u043e\u043b\u0435, \u044f\u043a\u0449\u043e \u0456\u043c\u0435\u043d\u0456 \u0437 \u044f\u043a\u043e\u0457\u0441\u044c \u043f\u0440\u0438\u0447\u0438\u043d\u0438 \u043c\u0438 \u043d\u0435 \u0437\u043d\u0430\u0454\u043c\u043e, \u0432\u0432\u0435\u0434\u0456\u0442\u044c N/A"),mail:p.Z_().required("\u041f\u043e\u0448\u0442\u0430 - \u043e\u0431\u043e\u0432'\u044f\u0437\u043a\u043e\u0432\u0435 \u043f\u043e\u043b\u0435!"),password:p.Z_().required("\u041f\u0430\u0440\u043e\u043b\u044c - \u043e\u0431\u043e\u0432'\u044f\u0437\u043a\u043e\u0432\u0435 \u043f\u043e\u043b\u0435!"),crmId:p.Z_().matches(/^[0-9]*$/,"\u041b\u0438\u0448\u0435 \u0446\u0438\u0444\u0440\u0438"),contactId:p.Z_().matches(/^[0-9]*$/,"\u041b\u0438\u0448\u0435 \u0446\u0438\u0444\u0440\u0438"),pupilId:p.Z_().min(6,"\u041d\u0435 \u043c\u0435\u043d\u0448\u0435 6 \u0446\u0438\u0444\u0440").max(7,"\u041d\u0435 \u0431\u0456\u043b\u044c\u0448\u0435 7 \u0446\u0438\u0444\u0440").matches(/^\d{1,7}$/,"\u041b\u0438\u0448\u0435 \u0446\u0438\u0444\u0440\u0438").required("\u041e\u0431\u043e\u0432'\u044f\u0437\u043a\u043e\u0432\u0435 \u043f\u043e\u043b\u0435, \u0434\u0438\u0432\u0438\u0442\u0438\u0441\u044c \u043d\u0430 \u043f\u043b\u0430\u0442\u0444\u043e\u0440\u043c\u0456")});return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(s.J9,{initialValues:_,onSubmit:async(n,o)=>{let{resetForm:r}=o;n.name=n.name.trim().trimStart(),n.mail=n.mail.toLowerCase().trim().trimStart(),n.password=n.password.trim().trimStart(),n.pupilId=n.pupilId.trim().trimStart(),n.crmId=n.crmId&&"string"===typeof n.crmId?+n.crmId.trim().trimStart():void 0,n.contactId=n.contactId&&"string"===typeof n.crmId?+n.contactId.trim().trimStart():void 0,n.marathonId=I.value,n.university=y.value;try{Z((n=>!0));const o=await t.Z.put("/uniusers/".concat(e._id),n);console.log(o),r(),alert("\u042e\u0437\u0435\u0440\u0430 \u0432\u0456\u0434\u0440\u0435\u0434\u0430\u0433\u043e\u0432\u0430\u043d\u043e"),a(e._id,n),i()}catch(s){console.error(s),alert("\u0414\u0435\u0441\u044c \u044f\u043a\u0430\u0441\u044c \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430 - \u043a\u043b\u0430\u0446\u0430\u0439 F12, \u0440\u043e\u0431\u0438 \u0441\u043a\u0440\u0456\u043d \u043a\u043e\u043d\u0441\u043e\u043b\u0456, \u0432\u0456\u0434\u043f\u0440\u0430\u0432\u043b\u044f\u0439 \u041a\u0438\u0440\u0438\u043b\u0443")}finally{Z((n=>!1))}},validationSchema:D,children:(0,x.jsxs)(m.jr,{children:[(0,x.jsxs)(o.__,{children:[(0,x.jsx)(m.vD,{type:"text",name:"name",placeholder:"\u041f\u0440\u0456\u0437\u0432\u0438\u0449\u0435 \u0442\u0430 \u0456\u043c'\u044f"}),(0,x.jsx)(m.aC,{component:"p",name:"name"})]}),(0,x.jsxs)(o.__,{children:[(0,x.jsx)(m.vD,{type:"email",name:"mail",placeholder:"\u0415\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0430 \u043f\u043e\u0448\u0442\u0430 (\u043b\u043e\u0433\u0456\u043d)"}),(0,x.jsx)(m.aC,{component:"p",name:"mail"})]}),(0,x.jsxs)(o.__,{children:[(0,x.jsx)(m.vD,{type:"text",name:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c"}),(0,x.jsx)(m.aC,{component:"p",name:"password"})]}),(0,x.jsxs)(o.__,{children:[(0,x.jsx)(m.vD,{type:"text",name:"crmId",placeholder:"ID \u043b\u0456\u0434\u0430 \u0432 CRM"}),(0,x.jsx)(m.aC,{component:"p",name:"crmId"})]}),(0,x.jsxs)(o.__,{children:[(0,x.jsx)(m.vD,{type:"text",name:"contactId",placeholder:"ID \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0443 \u0432 CRM"}),(0,x.jsx)(m.aC,{component:"p",name:"contactId"})]}),(0,x.jsxs)(o.__,{children:[(0,x.jsx)(m.vD,{type:"text",name:"pupilId",placeholder:"ID \u0443\u0447\u043d\u044f \u043d\u0430 \u043f\u043b\u0430\u0442\u0444\u043e\u0440\u043c\u0456"}),(0,x.jsx)(m.aC,{component:"p",name:"pupilId"})]}),(0,x.jsxs)(d.L8,{children:[y&&y.value&&(0,x.jsx)(d.NV,{children:"\u0423\u043d\u0456\u0432\u0435\u0440\u0441\u0438\u0442\u0435\u0442"}),(0,x.jsx)(c.Xv,{ref:P,options:h,defaultValue:h.find((n=>n.value===e.university)),styles:{control:(n,e)=>({...n,border:"none",borderRadius:"50px",minHeight:"34px"}),menu:(n,e)=>({...n,position:"absolute",zIndex:"2",top:"36px"}),dropdownIndicator:(n,e)=>({...n,padding:"7px"})},placeholder:"\u0423\u043d\u0456\u0432\u0435\u0440\u0441\u0438\u0442\u0435\u0442",name:"uni",onBlur:()=>{j(y?n=>!1:n=>!0)},onChange:n=>{f(n),(null===n||void 0===n?void 0:n.value)&&j((n=>!1))}}),b&&(0,x.jsx)(c.jj,{children:" \u0423\u043d\u0456\u0432\u0435\u0440\u0441\u0438\u0442\u0435\u0442 - \u043e\u0431\u043e\u0432'\u044f\u0437\u043a\u043e\u0432\u0435 \u043f\u043e\u043b\u0435!"})]}),y&&y.value&&(0,x.jsxs)(d.L8,{children:[I&&I.value&&(0,x.jsx)(d.NV,{children:"\u041c\u0430\u0440\u0430\u0444\u043e\u043d"}),(0,x.jsx)(c.Xv,{ref:P,options:"WSTIJO (Wyzsza Szko\u0142a Turystyki i Jezykow Obcych w Warszawie)"===y.value?g:"WSBMIR (Wy\u017csza Szko\u0142a Biznesu, Medi\xf3w i Reklamy)"===y.value?w:u,defaultValue:"WSTIJO (Wyzsza Szko\u0142a Turystyki i Jezykow Obcych w Warszawie)"===y.value?g.find((n=>n.value===e.marathonId)):"WSBMIR (Wy\u017csza Szko\u0142a Biznesu, Medi\xf3w i Reklamy)"===y.value?w.find((n=>n.value===e.marathonId)):u.find((n=>n.value===e.marathonId)),styles:{control:(n,e)=>({...n,border:"none",borderRadius:"50px",minHeight:"34px"}),menu:(n,e)=>({...n,position:"absolute",zIndex:"2",top:"36px"}),dropdownIndicator:(n,e)=>({...n,padding:"7px"})},placeholder:"\u041c\u0430\u0440\u0430\u0444\u043e\u043d",name:"marathon",onBlur:()=>{k(y?n=>!1:n=>!0)},onChange:n=>{z(n),(null===n||void 0===n?void 0:n.value)&&k((n=>!1))}}),S&&(0,x.jsx)(c.jj,{children:" \u041c\u0430\u0440\u0430\u0444\u043e\u043d - \u043e\u0431\u043e\u0432'\u044f\u0437\u043a\u043e\u0432\u0435 \u043f\u043e\u043b\u0435!"})]}),(0,x.jsx)(m.Gh,{type:"submit",children:"\u041f\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0438 \u0437\u043c\u0456\u043d\u0438"})]})}),v&&(0,x.jsx)(r.a,{})]})};t.Z.defaults.baseURL="https://ap-server-8qi1.onrender.com";const u=n=>{t.Z.defaults.headers.common.Authorization="Bearer ".concat(n)},g=()=>{const[n,e]=(0,l.useState)(!1),[a,g]=(0,l.useState)(!1),[w,v]=(0,l.useState)([]),[Z,y]=(0,l.useState)(!1),[f,b]=(0,l.useState)({}),[j,I]=(0,l.useState)(null),[z,S]=(0,l.useState)(!1),[k,P]=(0,l.useState)(null),[_,D]=(0,l.useState)(!1),[W,C]=(0,l.useState)(7),M=(0,l.useRef)(),R=[{label:"Pedagogium (Wy\u017csza Szko\u0142a Nauk Spo\u0142ecznych)",value:"Pedagogium (Wy\u017csza Szko\u0142a Nauk Spo\u0142ecznych)"},{label:"WSTIJO (Wyzsza Szko\u0142a Turystyki i Jezykow Obcych w Warszawie)",value:"WSTIJO (Wyzsza Szko\u0142a Turystyki i Jezykow Obcych w Warszawie)"},{label:"WSBMIR (Wy\u017csza Szko\u0142a Biznesu, Medi\xf3w i Reklamy)",value:"WSBMIR (Wy\u017csza Szko\u0142a Biznesu, Medi\xf3w i Reklamy)"}],O=[{label:"Logistics (Pedagogium)",value:"72421"},{label:"Kurs Przygotowawczy (Pedagogium)",value:"79231"}],T=[{label:"Logistics (WSTIJO)",value:"78737"},{label:"Kurs Przygotowawczy (WSTIJO)",value:"72468"}],B=[{label:"Logistics (WSBMiR)",value:"80641"},{label:"Kurs Przygotowawczy (WSBMiR)",value:"80640"}];(0,l.useEffect)((()=>{document.title="Polish University Users Admin Panel | AP Education";(async()=>{console.log("token refresher");try{if(localStorage.getItem("isAdmin")){const n=await t.Z.post("admins/refresh/users/",{});u(n.data.newToken),g((n=>!0))}}catch(n){console.log(n)}})();(async()=>{try{if(a){const n=await t.Z.get("/uniusers/admin/");v((e=>[...n.data.reverse()]))}}catch(n){console.error(n)}})();const n=n=>{"Escape"===n.code&&q()};return window.addEventListener("keydown",n),()=>{window.removeEventListener("keydown",n)}}),[a]);const H=p.Ry().shape({login:p.Z_().required("\u0412\u043a\u0430\u0436\u0456\u0442\u044c \u043b\u043e\u0433\u0456\u043d!"),password:p.Z_().required("\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c!")}),J=n=>{if(n){const e=n.split(".");return e.length>2?Date.parse([e[1],e[0],e[2]].join("/")):Date.parse(n)}},L=p.Ry().shape({name:p.Z_().required("\u0406\u043c'\u044f - \u043e\u0431\u043e\u0432'\u044f\u0437\u043a\u043e\u0432\u0435 \u043f\u043e\u043b\u0435, \u044f\u043a\u0449\u043e \u0456\u043c\u0435\u043d\u0456 \u0437 \u044f\u043a\u043e\u0457\u0441\u044c \u043f\u0440\u0438\u0447\u0438\u043d\u0438 \u043c\u0438 \u043d\u0435 \u0437\u043d\u0430\u0454\u043c\u043e, \u0432\u0432\u0435\u0434\u0456\u0442\u044c N/A"),mail:p.Z_().required("\u041f\u043e\u0448\u0442\u0430 - \u043e\u0431\u043e\u0432'\u044f\u0437\u043a\u043e\u0432\u0435 \u043f\u043e\u043b\u0435!"),password:p.Z_().required("\u041f\u0430\u0440\u043e\u043b\u044c - \u043e\u0431\u043e\u0432'\u044f\u0437\u043a\u043e\u0432\u0435 \u043f\u043e\u043b\u0435!"),crmId:p.Z_().matches(/^[0-9]*$/,"\u041b\u0438\u0448\u0435 \u0446\u0438\u0444\u0440\u0438"),contactId:p.Z_().matches(/^[0-9]*$/,"\u041b\u0438\u0448\u0435 \u0446\u0438\u0444\u0440\u0438"),pupilId:p.Z_().min(6,"\u041d\u0435 \u043c\u0435\u043d\u0448\u0435 6 \u0446\u0438\u0444\u0440").max(7,"\u041d\u0435 \u0431\u0456\u043b\u044c\u0448\u0435 7 \u0446\u0438\u0444\u0440").matches(/^\d{1,7}$/,"\u041b\u0438\u0448\u0435 \u0446\u0438\u0444\u0440\u0438").required("\u041e\u0431\u043e\u0432'\u044f\u0437\u043a\u043e\u0432\u0435 \u043f\u043e\u043b\u0435, \u0434\u0438\u0432\u0438\u0442\u0438\u0441\u044c \u043d\u0430 \u043f\u043b\u0430\u0442\u0444\u043e\u0440\u043c\u0456")}),q=n=>{y(!1)};return(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)(m.Kq,{children:[!a&&(0,x.jsx)(s.J9,{initialValues:{login:"",password:""},onSubmit:async(n,a)=>{let{resetForm:i}=a;e((n=>!0));try{const a=await t.Z.post("/admins/login/users",n);u(a.data.token),g((n=>!0)),localStorage.setItem("isAdmin",!0),i()}catch(o){console.error(o)}finally{e((n=>!1))}},validationSchema:H,children:(0,x.jsxs)(m.U0,{children:[(0,x.jsxs)(o.__,{children:[(0,x.jsx)(m.vD,{type:"text",name:"login",placeholder:"Login"}),(0,x.jsx)(m.aC,{component:"p",name:"login"})]}),(0,x.jsxs)(o.__,{children:[(0,x.jsx)(m.vD,{type:"password",name:"password",placeholder:"Password"}),(0,x.jsx)(m.aC,{component:"p",name:"password"})]}),(0,x.jsx)(m.Gh,{type:"submit",children:"\u0417\u0430\u043b\u043e\u0433\u0456\u043d\u0438\u0442\u0438\u0441\u044c"})]})}),a&&(0,x.jsx)(s.J9,{initialValues:{name:"",mail:"",password:"",crmId:"",contactId:"",pupilId:"",marathonId:"",university:""},onSubmit:async(n,a)=>{let{resetForm:i}=a;e((n=>!0)),n.name=n.name.trim().trimStart(),n.mail=n.mail.toLowerCase().trim().trimStart(),n.password=n.password.trim().trimStart(),n.crmId=n.crmId?+n.crmId.trim().trimStart():void 0,n.contactId=n.contactId?+n.contactId.trim().trimStart():void 0,n.pupilId=n.pupilId.trim().trimStart(),n.marathonId=k.value,n.university=j.value;try{const a=await t.Z.post("/uniusers/new",n);console.log(a.data),v((n=>[a.data,...n])),i(),M.current.clearValue(),alert("\u042e\u0437\u0435\u0440\u0430 \u0434\u043e\u0434\u0430\u043d\u043e")}catch(o){console.error(o),alert("\u0414\u0435\u0441\u044c \u044f\u043a\u0430\u0441\u044c \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430 - \u043a\u043b\u0430\u0446\u0430\u0439 F12, \u0440\u043e\u0431\u0438 \u0441\u043a\u0440\u0456\u043d \u043a\u043e\u043d\u0441\u043e\u043b\u0456, \u0432\u0456\u0434\u043f\u0440\u0430\u0432\u043b\u044f\u0439 \u041a\u0438\u0440\u0438\u043b\u0443")}finally{e((n=>!1))}},validationSchema:L,children:(0,x.jsxs)(m.P_,{children:[(0,x.jsxs)(o.__,{children:[(0,x.jsx)(m.vD,{type:"text",name:"name",placeholder:"\u041f\u0440\u0456\u0437\u0432\u0438\u0449\u0435 \u0442\u0430 \u0456\u043c'\u044f"}),(0,x.jsx)(m.aC,{component:"p",name:"name"})]}),(0,x.jsxs)(o.__,{children:[(0,x.jsx)(m.vD,{type:"email",name:"mail",placeholder:"\u0415\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0430 \u043f\u043e\u0448\u0442\u0430 (\u043b\u043e\u0433\u0456\u043d)"}),(0,x.jsx)(m.aC,{component:"p",name:"mail"})]}),(0,x.jsxs)(o.__,{children:[(0,x.jsx)(m.vD,{type:"text",name:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c"}),(0,x.jsx)(m.aC,{component:"p",name:"password"})]}),(0,x.jsxs)(o.__,{children:[(0,x.jsx)(m.vD,{type:"text",name:"crmId",placeholder:"ID \u043b\u0456\u0434\u0430 \u0432 CRM"}),(0,x.jsx)(m.aC,{component:"p",name:"crmId"})]}),(0,x.jsxs)(o.__,{children:[(0,x.jsx)(m.vD,{type:"text",name:"contactId",placeholder:"ID \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0443 \u0432 CRM"}),(0,x.jsx)(m.aC,{component:"p",name:"contactId"})]}),(0,x.jsxs)(o.__,{children:[(0,x.jsx)(m.vD,{type:"text",name:"pupilId",placeholder:"ID \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u0430 \u043d\u0430 \u043f\u043b\u0430\u0442\u0444\u043e\u0440\u043c\u0456"}),(0,x.jsx)(m.aC,{component:"p",name:"pupilId"})]}),(0,x.jsxs)(d.L8,{children:[j&&j.value&&(0,x.jsx)(d.NV,{children:"\u0423\u043d\u0456\u0432\u0435\u0440\u0441\u0438\u0442\u0435\u0442"}),(0,x.jsx)(c.Xv,{ref:M,options:R,styles:{control:(n,e)=>({...n,border:"none",borderRadius:"50px",minHeight:"34px"}),menu:(n,e)=>({...n,position:"absolute",zIndex:"2",top:"36px"}),dropdownIndicator:(n,e)=>({...n,padding:"7px"})},placeholder:"\u0423\u043d\u0456\u0432\u0435\u0440\u0441\u0438\u0442\u0435\u0442",name:"uni",onBlur:()=>{S(j?n=>!1:n=>!0)},onChange:n=>{I(n),(null===n||void 0===n?void 0:n.value)&&S((n=>!1))}}),z&&(0,x.jsx)(c.jj,{children:" \u0423\u043d\u0456\u0432\u0435\u0440\u0441\u0438\u0442\u0435\u0442 - \u043e\u0431\u043e\u0432'\u044f\u0437\u043a\u043e\u0432\u0435 \u043f\u043e\u043b\u0435!"})]}),j&&j.value&&(0,x.jsxs)(d.L8,{children:[k&&k.value&&(0,x.jsx)(d.NV,{children:"\u041c\u0430\u0440\u0430\u0444\u043e\u043d"}),(0,x.jsx)(c.Xv,{ref:M,options:"WSTIJO (Wyzsza Szko\u0142a Turystyki i Jezykow Obcych w Warszawie)"===j.value?T:"WSBMIR (Wy\u017csza Szko\u0142a Biznesu, Medi\xf3w i Reklamy)"===j.value?B:O,styles:{control:(n,e)=>({...n,border:"none",borderRadius:"50px",minHeight:"34px"}),menu:(n,e)=>({...n,position:"absolute",zIndex:"2",top:"36px"}),dropdownIndicator:(n,e)=>({...n,padding:"7px"})},placeholder:"\u041c\u0430\u0440\u0430\u0444\u043e\u043d",name:"marathon",onBlur:()=>{D(j?n=>!1:n=>!0)},onChange:n=>{P(n),(null===n||void 0===n?void 0:n.value)&&D((n=>!1))}}),_&&(0,x.jsx)(c.jj,{children:" \u041c\u0430\u0440\u0430\u0444\u043e\u043d - \u043e\u0431\u043e\u0432'\u044f\u0437\u043a\u043e\u0432\u0435 \u043f\u043e\u043b\u0435!"})]}),(0,x.jsx)(m.Gh,{type:"submit",children:"\u0414\u043e\u0434\u0430\u0442\u0438 \u044e\u0437\u0435\u0440\u0430"})]})}),a&&w&&(0,x.jsxs)(m.OD,{children:[(0,x.jsx)(m.az,{children:"\u0421\u043f\u0438\u0441\u043e\u043a \u044e\u0437\u0435\u0440\u0456\u0432 \u0437 \u0434\u043e\u0441\u0442\u0443\u043f\u043e\u043c \u0434\u043e \u0443\u0440\u043e\u043a\u0456\u0432"}),(0,x.jsx)("thead",{children:(0,x.jsxs)(m.me,{children:[(0,x.jsx)(m.Sb,{children:"CRM\xa0\u041b\u0456\u0434 \u041a\u043e\u043d\u0442\u0430\u043a\u0442"}),(0,x.jsx)(m.Sb,{children:"\u0406\u043c'\u044f"}),(0,x.jsx)(m.Sb,{children:"\u041f\u043e\u0448\u0442\u0430 (\u043b\u043e\u0433\u0456\u043d)"}),(0,x.jsx)(m.Sb,{children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),(0,x.jsx)(m.Sb,{children:"\u0423\u043d\u0456\u0432\u0435\u0440\u0441\u0438\u0442\u0435\u0442"}),(0,x.jsx)(m.Sb,{children:"ID \u043d\u0430 \u043f\u043b\u0430\u0442\u0444\u043e\u0440\u043c\u0456"}),(0,x.jsx)(m.Sb,{children:"ID \u043c\u0430\u0440\u0430\u0444\u043e\u043d\u0443"}),(0,x.jsx)(m.Sb,{children:"\u0412\u0456\u0434\u0432\u0456\u0434\u0438\u043d\u0438"}),(0,x.jsx)(m.Sb,{children:"\u0412\u0456\u0434\u0432\u0456\u0434\u0438\u043d\u0438 \u0437 \u0447\u0430\u0441\u043e\u043c"}),(0,x.jsx)(m.Sb,{children:"Edit"}),(0,x.jsx)(m.Sb,{children:"Delete"})]})}),(0,x.jsx)("tbody",{children:w.map((n=>(0,x.jsxs)(m.me,{children:[(0,x.jsxs)(m.He,{children:[(0,x.jsx)("a",{href:"https://apeducation.kommo.com/leads/detail/".concat(n.crmId),target:"_blank",rel:"noreferrer",children:n.crmId})," ",(0,x.jsx)("a",{href:"https://apeducation.kommo.com/contacts/detail/".concat(n.contactId),target:"_blank",rel:"noreferrer",children:n.contactId})]}),(0,x.jsx)(m.He,{children:n.name}),(0,x.jsx)(m.He,{children:n.mail}),(0,x.jsx)(m.He,{children:n.password}),(0,x.jsx)(m.He,{className:"last-name",children:n.university}),(0,x.jsx)(m.He,{children:n.pupilId}),(0,x.jsx)(m.He,{children:n.marathonId}),(0,x.jsx)(m.He,{className:Math.floor((Date.now()-J(n.visited[n.visited.length-1]))/864e5)>W?"attention":"",children:n.visited[n.visited.length-1]}),(0,x.jsx)(m.He,{children:n.visitedTime[n.visitedTime.length-1]?n.visitedTime[n.visitedTime.length-1].match("^202")?new Date(n.visitedTime[n.visitedTime.length-1]).toLocaleString("uk-UA"):new Date(J(n.visitedTime[n.visitedTime.length-1])).toLocaleString("uk-UA",{timeZone:"+06:00"}):""}),(0,x.jsx)(m.He,{children:(0,x.jsx)(m.Hx,{onClick:()=>(async n=>{y(!0),b((e=>w.find((e=>e._id===n))))})(n._id),children:"Edit"})}),(0,x.jsx)(m.He,{children:"Dev Acc"===n.name?null:(0,x.jsx)(m.hj,{onClick:()=>(async n=>{if(e((n=>!0)),window.confirm("\u0422\u043e\u0447\u043d\u043e \u0432\u0438\u0434\u0430\u043b\u0438\u0442\u0438 ".concat(w.find((e=>e._id===n)).name,"?")))try{const a=await t.Z.delete("/uniusers/".concat(n));console.log(a),alert("\u042e\u0437\u0435\u0440\u0430 \u0432\u0438\u0434\u0430\u043b\u0435\u043d\u043e"),v((e=>[...e.filter((e=>e._id!==n))]))}catch(a){console.error(a),alert("\u0414\u0435\u0441\u044c \u044f\u043a\u0430\u0441\u044c \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430 - \u043a\u043b\u0430\u0446\u0430\u0439 F12, \u0440\u043e\u0431\u0438 \u0441\u043a\u0440\u0456\u043d \u043a\u043e\u043d\u0441\u043e\u043b\u0456, \u0432\u0456\u0434\u043f\u0440\u0430\u0432\u043b\u044f\u0439 \u041a\u0438\u0440\u0438\u043b\u0443")}finally{e((n=>!1))}else e((n=>!1))})(n._id),children:"Del"})})]},n._id)))})]}),Z&&(0,x.jsx)(i.Y,{onMouseDown:n=>{"close-on-click"===n.target.id&&y(!1)},id:"close-on-click",children:(0,x.jsx)(h,{userToEdit:f,updateUser:(n,e)=>{const a=w.find((e=>e._id===n));a.name=e.name,a.mail=e.mail,a.password=e.password,a.pupilId=e.pupilId,a.marathonId=e.marathonId,a.crmId=e.crmId,a.contactId=e.contactId,a.university=e.university,console.log(a),v((e=>e=e.map(((t,i)=>i===e.findIndex((e=>e._id===n))?a:t))))},closeEditForm:q,uniOptions:R,pedagogiumMarathonOptions:O,wstijoMarathonOptions:T,wsbmirMarathonOptions:B})}),n&&(0,x.jsx)(r.a,{})]})})}},19920:(n,e,a)=>{a.d(e,{DZ:()=>y,Fd:()=>I,L8:()=>f,NV:()=>j,Ow:()=>z,QD:()=>k,m6:()=>b,qG:()=>S,zi:()=>P});var t,i,o,r,s,d,l,p,c,m=a(30168),x=a(97723),h=a(55705),u=a(17102),g=a(35367),w=a(59513),v=a.n(w),Z=a(76487);const y=(0,Z.ZP)(h.l0)(t||(t=(0,m.Z)(["\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: calc(100vw - 20px);\n  max-width: 400px;\n\n  background-color: white;\n  padding: 16px;\n  border-radius: 16px;\n\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n\n  & .react-datepicker__tab-loop {\n    margin-top: -6px;\n  }\n\n  & .react-datepicker-popper {\n    z-index: 2;\n  }\n\n  @media screen and (min-height: 960px) {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    width: 100%;\n    transform: translate(-50%, -50%);\n\n    padding: 16px 24px;\n    border-radius: 24px;\n\n    gap: 9px;\n  }\n\n  @media screen and (min-height: 960px) {\n    & .react-datepicker__tab-loop {\n      margin-top: -9px;\n    }\n  }\n"]))),f=Z.ZP.label(i||(i=(0,m.Z)(["\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n  width: 100%;\n  position: relative;\n\n  &:first-child {\n    padding-top: 4px;\n  }\n"]))),b=(0,Z.ZP)(v())(o||(o=(0,m.Z)(["\n  width: 100%;\n  max-height: 38px;\n  padding: 10px;\n  border: 2px solid var(--main-color);\n\n  @media screen and (min-width: 960px) {\n    font-size: 16px;\n  }\n\n  &.error {\n    border: 4px solid red;\n  }\n\n  &:hover,\n  &:focus {\n    background-color: var(--secondary-burnt-color);\n    outline: transparent;\n  }\n"]))),j=Z.ZP.span(r||(r=(0,m.Z)(["\n  position: absolute;\n  top: -5.5px;\n  left: 10px;\n  z-index: 1;\n  background-color: white;\n\n  font-size: 10px;\n  display: block;\n  padding: 1px;\n\n  @media screen and (min-height: 960px) {\n    top: -8px;\n    font-size: 12px;\n    padding: 2px;\n  }\n"]))),I=(0,Z.ZP)(j)(s||(s=(0,m.Z)(["\n  position: absolute;\n  top: 0px;\n  left: 10px;\n  z-index: 1;\n  background-color: white;\n\n  font-size: 10px;\n  display: block;\n  padding: 1px;\n\n  @media screen and (min-height: 960px) {\n    top: 1px;\n    padding: 2px;\n    font-size: 12px;\n  }\n"]))),z=(0,Z.ZP)(g.ih)(d||(d=(0,m.Z)(["\n  font-size: 16px;\n"]))),S=(0,Z.ZP)(x.Mg)(l||(l=(0,m.Z)(["\n  margin: 0 auto;\n  padding: 12px;\n  height: auto;\n\n  @media screen and (min-width: 768px) {\n    padding: 16px;\n    letter-spacing: 0.6px;\n  }\n"]))),k=Z.ZP.p(p||(p=(0,m.Z)(["\n  text-align: center;\n  font-size: 14px;\n  color: red;\n"]))),P=(0,Z.ZP)(u.aC)(c||(c=(0,m.Z)(["\n  color: red;\n"])))}}]);
//# sourceMappingURL=Polish University Users Admin Panel page.531d5d88.chunk.js.map