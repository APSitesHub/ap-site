"use strict";(self.webpackChunkap_education=self.webpackChunkap_education||[]).push([[3620],{5460:(e,s,t)=>{t.r(s),t.d(s,{default:()=>y});var a=t(1488),n=t(5294),c=t(2605),r=t(8313),o=t(610),l=t(9527),i=t(2791),d=t(6710),u=t(616),h=t(1679),m=t(5070),x=t(9901),p=t(1608),j=t(5984),g=t(184);n.Z.defaults.baseURL="https://ap-server-8qi1.onrender.com";const y=()=>{const[e,s]=(0,i.useState)(!1),[t,y]=(0,i.useState)(!1),[f,k]=(0,i.useState)(!1),[S,b]=(0,i.useState)(""),[w,v]=(0,i.useState)(!1),[_,C]=(0,i.useState)(""),D=(0,i.useRef)(),[N,O]=(0,a.Z)(D),[I,Z]=(0,a.Z)(document.body),[L,R]=(0,i.useState)(!1),[K,W]=(0,i.useState)({}),[q,z]=(0,i.useState)(""),[A,E]=(0,i.useState)(""),[F,P]=(0,i.useState)(!1),[Y,B]=(0,i.useState)([]);(0,i.useLayoutEffect)((()=>{(async()=>{try{const e=await n.Z.get("/");console.log(e.data)}catch(e){console.log(e)}})();(async()=>{try{R((e=>!0)),W((await n.Z.get("/links")).data)}catch(e){console.log(e)}finally{R((e=>!1))}})()}),[]);const H=s=>{y((e=>!e)),b(e||f?e=>"kahoot":e=>"")},M=0===N&&I>Z?I-300:I-N,U=e=>{e.preventDefault();const s=(0,j.x0)(8);E((e=>s)),localStorage.setItem("userName",q.trim()),localStorage.setItem("userID",s),P((e=>!e))},Q=(0,i.useRef)(null);return(0,i.useEffect)((()=>{document.title="English Kids Trial | AP Education",Q.current=(0,p.io)("https://ap-chat-server.onrender.com/"),(e=>{const s=localStorage.getItem("userName");localStorage.getItem("userID")&&s&&P((e=>!0))})(),Q.current.on("connected",((e,s)=>{console.log(e),console.log(s)}));return(async()=>{try{const e=(await n.Z.get("https://ap-chat-server.onrender.com/messages")).data.filter((e=>new Date(e.createdAt).getDate()===(new Date).getDate()));B((s=>e))}catch(e){console.log(e)}})(),Q.current.on("message",(async e=>{await(async()=>{try{await n.Z.post("https://ap-chat-server.onrender.com/messages",e),B((s=>[...s,e]))}catch(s){console.log(s)}})()})),Q.current.on("message:get",(async e=>{B((s=>[...s,e]))})),()=>{Q.current.off("connected"),Q.current.off("message"),Q.current.disconnect()}}),[]),(0,g.jsx)(g.Fragment,{children:(void 0===K.trials_kids||K.trials_kids[0]<10)&&!L?(0,g.jsx)(u.r,{children:(0,g.jsxs)(u.Rq,{children:["\u041f\u043e\u043a\u0438 \u0449\u043e \u0442\u0440\u0430\u043d\u0441\u043b\u044f\u0446\u0456\u0457 \u0442\u0443\u0442 \u043d\u0435\u043c\u0430\u0454! ",(0,g.jsx)("br",{}),"\u041f\u0435\u0440\u0435\u0432\u0456\u0440\u0442\u0435, \u0447\u0438 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e \u0432\u0438 \u0432\u043a\u0430\u0437\u0430\u043b\u0438 \u0430\u0434\u0440\u0435\u0441\u0443 \u0441\u0442\u043e\u0440\u0456\u043d\u043a\u0438 \u0430\u0431\u043e \u0441\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u0456\u0437\u043d\u0456\u0448\u0435."]})}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(u.QU,{style:{width:e&&I>Z?"".concat(M,"px"):"100%"},children:(0,g.jsxs)(c.C,{children:[L&&(0,g.jsx)(o.sb,{children:(0,g.jsx)(r.a,{})}),(0,g.jsxs)(u.c6,{children:[(0,g.jsx)(u.i1,{}),(0,g.jsx)(u.tW,{}),(0,g.jsx)(u.Rs,{className:w&&"sound"===_||w&&"live"===_?"animated":"",children:(0,g.jsx)(u.CO,{className:w&&"sound"===_||w&&"live"===_?"animated":""})}),(0,g.jsx)(u.$D,{className:w&&"quality"===_?"animated":"",children:(0,g.jsx)(u.hY,{className:w&&"quality"===_?"animated":""})}),(0,g.jsx)(d.Z,{playing:!0,muted:!0,controls:!0,config:{youtube:{playerVars:{rel:0}}},style:{display:"block",position:"absolute",top:0,left:0},width:"100%",height:"100vh",url:K.trials_kids})]}),(0,g.jsxs)(u.KN,{children:[(0,g.jsx)(u.kd,{onClick:H,className:w&&"kahoot_open"===_?"animated":"",children:(0,g.jsx)(u.ev,{})}),(0,g.jsx)(u.Ms,{onClick:()=>{s((e=>!e)),b(t||f?e=>"chat":e=>"")},className:w&&"chat_open"===_?"animated":"",children:(0,g.jsx)(u.DS,{})}),(0,g.jsx)(u.wH,{onClick:()=>{k((e=>!e)),C(""),b(t||e?e=>"support":e=>"")},children:(0,g.jsx)(u.RB,{})})]}),!K.trials_kids||K.trials_kids.includes("youtube")||K.trials_kids.includes("youtu.be")?null:window.location.replace(K.trials_kids),Z>I&&(0,g.jsx)(u.rW,{ref:D,className:e?"shown":"hidden",style:"chat"===S?{zIndex:"2"}:{zIndex:"1"},children:F?(0,g.jsx)(x.e,{socket:Q.current,messages:Y,isChatOpen:e}):(0,g.jsxs)(m._Y,{onSubmit:U,children:[(0,g.jsx)(m.mD,{children:"AP Open Chat"}),(0,g.jsx)(m.bt,{htmlFor:"username",children:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u0432\u0430\u0448\u0435 \u0456\u043c'\u044f \u0442\u0430 \u043f\u0440\u0456\u0437\u0432\u0438\u0449\u0435 \u043f\u043e\u0432\u043d\u0456\u0441\u0442\u044e"}),(0,g.jsx)(m._8,{type:"text",minLength:3,name:"username",id:"username",value:q,onChange:e=>z(e.target.value)}),(0,g.jsx)(m.bh,{children:"\u0413\u043e\u0442\u043e\u0432\u043e!"})]})}),(0,g.jsx)(l.M,{sectionWidth:I,sectionHeight:Z,isKahootOpen:t,isChatOpen:e,isOpenedLast:S}),(0,g.jsx)(h.B,{sectionWidth:I,isSupportOpen:f,isOpenedLast:S,handleSupport:e=>{C((s=>e)),w||v((e=>!e))},openKahoot:H,isKahootOpen:t})]})}),I>=Z&&(0,g.jsx)(u.rW,{ref:D,className:e?"shown":"hidden",style:"chat"===S?{zIndex:"2"}:{zIndex:"1"},children:F?(0,g.jsx)(x.e,{socket:Q.current,messages:Y,isChatOpen:e}):(0,g.jsxs)(m._Y,{onSubmit:U,children:[(0,g.jsx)(m.mD,{children:"AP Open Chat"}),(0,g.jsx)(m.bt,{htmlFor:"username",children:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u0432\u0430\u0448\u0435 \u0456\u043c'\u044f \u0442\u0430 \u043f\u0440\u0456\u0437\u0432\u0438\u0449\u0435 \u043f\u043e\u0432\u043d\u0456\u0441\u0442\u044e"}),(0,g.jsx)(m._8,{type:"text",minLength:3,name:"username",id:"username",value:q,onChange:e=>z(e.target.value)}),(0,g.jsx)(m.bh,{children:"\u0413\u043e\u0442\u043e\u0432\u043e!"})]})})]})})}}}]);
//# sourceMappingURL=Kids trials page.a2acdebd.chunk.js.map