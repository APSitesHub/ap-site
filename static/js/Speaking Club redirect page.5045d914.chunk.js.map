{"version":3,"file":"static/js/Speaking Club redirect page.5045d914.chunk.js","mappings":"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","sources":["pages/Speakings/StreamSpeakingClub.jsx"],"sourcesContent":["import axios from 'axios';\nimport { StreamsBackgroundWrapper } from 'components/BackgroundWrapper/BackgroundWrappers';\nimport { Loader } from 'components/SharedLayout/Loaders/Loader';\nimport { LoaderWrapper } from 'components/SharedLayout/Loaders/Loader.styled';\nimport { useEffect, useLayoutEffect, useState } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport {\n  StreamPlaceHolder,\n  StreamPlaceHolderText,\n  StreamRefreshPageLink,\n  StreamRefreshQuestion,\n  StreamRefreshText,\n  StreamSection,\n} from '../../components/Stream/Stream.styled';\n\naxios.defaults.baseURL = 'https://ap-server-8qi1.onrender.com';\n\nconst StreamSpeakingClub = () => {\n  const [isLoading, setIsLoading] = useState(false);\n  const [redirectLink, setRedirectLink] = useState('');\n  const [user, setUser] = useState({});\n  const [course, setCourse] = useState('');\n  const [level, setLevel] = useState('');\n  const [isApproved, setIsApproved] = useState(false);\n  const location = useLocation().pathname;\n\n  const page = location.replace('/streams/', '').replace('sc', '');\n  console.log(28, page);\n\n  const link = page.includes('dea1')\n    ? page.replace('dea1', 'deutsch')\n    : page.includes('de')\n    ? page.replace('de', 'deutsch')\n    : page.includes('pla1')\n    ? page.replace('pla1', 'polski')\n    : page.includes('pl')\n    ? page.replace('pl', 'polski')\n    : page;\n\n  console.log(40, link);\n\n  useLayoutEffect(() => {\n    const getLinksRequest = async () => {\n      try {\n        setIsLoading(isLoading => (isLoading = true));\n        setRedirectLink((await axios.get('/speakings')).data[link]);\n        const currentUser = await axios.post('/users/refresh', {\n          mail: localStorage.getItem('mail'),\n        });\n        console.log(41, currentUser.data.user);\n        setUser(\n          user =>\n            (user = {\n              userId: currentUser.data.user.id,\n              name: currentUser.data.user.name,\n              mail: currentUser.data.user.mail,\n              zoomMail: currentUser.data.user.zoomMail,\n              age: currentUser.data.user.age,\n              lang: currentUser.data.user.lang,\n              course: currentUser.data.user.course,\n              crmId: currentUser.data.user.crmId,\n              contactId: currentUser.data.user.contactId,\n              successRate: currentUser.data.user.successRate,\n              temperament: currentUser.data.user.temperament,\n              visited: currentUser.data.user.visited,\n              visitedTime: currentUser.data.user.visitedTime,\n              feedback: currentUser.data.user.feedback,\n            })\n        );\n      } catch (error) {\n        console.log(error);\n      } finally {\n        setIsLoading(isLoading => (isLoading = false));\n      }\n    };\n    getLinksRequest();\n  }, [link]);\n\n  const getLanguageFromLocation = location => {\n    if (location.includes('de') || location.includes('deutsch')) {\n      return 'de';\n    } else if (location.includes('pl') || location.includes('polski')) {\n      return 'pl';\n    } else {\n      return 'en';\n    }\n  };\n  const lang = getLanguageFromLocation(location);\n\n  useEffect(() => {\n    document.title = `Практичне заняття | AP Education`;\n\n    const sendUserInfo = async () => {\n      try {\n        setCourse((await axios.get('/timetable')).data.filter(timetable => page.includes(timetable.level) && lang === timetable.lang)[0].course);\n        setLevel(\n          (await axios.get('/timetable')).data.filter(\n            timetable =>\n              lang === timetable.lang &&\n              (user.course === timetable.course || user.course?.split('/').some(singleCourse => singleCourse === timetable.course))\n          )[0].level\n        );\n\n        console.log(user.userId);\n        const existingUser = await axios.get(`/speakingusers/${user.userId}`);\n        console.log('existingUser', existingUser);\n        console.log(103, user);\n\n        const res = !existingUser.data ? await axios.post('/speakingusers/new', user) : await axios.put(`/speakingusers/${user.userId}`, user);\n\n        res.data._id && setIsApproved(true);\n      } catch (error) {\n        console.log(error);\n      }\n    };\n\n    sendUserInfo();\n  }, [user, page, lang]);\n\n  return (\n    <>\n      <StreamSection>\n        <StreamsBackgroundWrapper>\n          {isLoading && (\n            <LoaderWrapper>\n              <Loader />\n            </LoaderWrapper>\n          )}\n          {(redirectLink === undefined || redirectLink[0] < 10) && !isLoading && (\n            <StreamPlaceHolder>\n              <StreamPlaceHolderText>\n                Привіт! <br />\n                Наразі урок на цій сторінці не проводиться! Перевірте, чи ви перейшли за правильним посиланням або спробуйте пізніше.\n              </StreamPlaceHolderText>\n            </StreamPlaceHolder>\n          )}\n          {((course === user.course || user.course?.split('/').some(singleCourse => singleCourse === course)) &&\n            (lang === user.lang || user.lang?.split('/').some(singleLang => singleLang === lang))) ||\n          (page.includes('deb2_') && user.course?.includes('12')) ||\n          user.name === 'Dev Acc' ||\n          user.course === '10' ||\n          user.course?.split('/').some(singleCourse => singleCourse === '10') ||\n          user.name === 'Тічер' ? (\n            <StreamPlaceHolder>\n              <StreamPlaceHolderText>\n                Привіт! <br />\n                Будь ласка, зачекайте, незабаром вас переадресує на практичне заняття в Zoom\n              </StreamPlaceHolderText>\n              <StreamRefreshText>\n                <StreamRefreshQuestion>Очікуєте занадто довго?</StreamRefreshQuestion>\n                <StreamRefreshPageLink onClick={() => window.location.reload()}>Натисніть сюди, щоб оновити сторінку</StreamRefreshPageLink>\n              </StreamRefreshText>\n            </StreamPlaceHolder>\n          ) : (\n            <StreamPlaceHolder>\n              <StreamPlaceHolderText>\n                Хммм... <br />\n                Здається, ви намагаєтесь під'єднатися до практичного заняття не свого рівня!\n              </StreamPlaceHolderText>\n              <StreamRefreshText>\n                <StreamRefreshQuestion>\n                  Впевнені, що не помилились? <br /> Зв'яжіться з вашим менеджером або\n                </StreamRefreshQuestion>\n                <StreamRefreshPageLink\n                  onClick={() => window.location.replace('https://www.academy.ap.education/streams/' + (lang !== 'en' ? lang : '') + level + 'sc')}\n                >\n                  може, це ваше практичне заняття?\n                </StreamRefreshPageLink>\n              </StreamRefreshText>\n            </StreamPlaceHolder>\n          )}\n          {(((course === user.course || user.course?.split('/').some(singleCourse => singleCourse === course)) &&\n            (lang === user.lang || user.lang?.split('/').some(singleLang => singleLang === lang)) &&\n            redirectLink &&\n            redirectLink !== '1' &&\n            isApproved) ||\n            (page.includes('deb2_') && user.course?.includes('12') && isApproved) ||\n            (user.name === 'Dev Acc' && isApproved) ||\n            ((user.course === '10' || user.course?.split('/').some(singleCourse => singleCourse === '10')) && isApproved) ||\n            (user.name === 'Тічер' && isApproved)) &&\n            redirectLink !== undefined &&\n            redirectLink !== '1' &&\n            window.location.replace(redirectLink)}\n        </StreamsBackgroundWrapper>\n      </StreamSection>\n    </>\n  );\n};\n\nexport default StreamSpeakingClub;\n"],"names":["axios","StreamSpeakingClub","_user$course2","_user$lang","_user$course3","_user$course4","_user$course5","_user$lang2","_user$course6","_user$course7","isLoading","setIsLoading","useState","redirectLink","setRedirectLink","user","setUser","course","setCourse","level","setLevel","isApproved","setIsApproved","location","useLocation","pathname","page","replace","console","log","link","includes","useLayoutEffect","async","data","currentUser","mail","localStorage","getItem","userId","id","name","zoomMail","age","lang","crmId","contactId","successRate","temperament","visited","visitedTime","feedback","error","getLinksRequest","getLanguageFromLocation","useEffect","document","title","filter","timetable","_user$course","split","some","singleCourse","existingUser","concat","_id","sendUserInfo","_jsx","_Fragment","children","StreamSection","_jsxs","StreamsBackgroundWrapper","LoaderWrapper","Loader","undefined","StreamPlaceHolder","StreamPlaceHolderText","singleLang","StreamRefreshText","StreamRefreshQuestion","StreamRefreshPageLink","onClick","window","reload"],"sourceRoot":""}