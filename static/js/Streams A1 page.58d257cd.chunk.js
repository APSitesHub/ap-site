"use strict";(self.webpackChunkap_education=self.webpackChunkap_education||[]).push([[4046],{54235:(e,n,s)=>{s.r(n),s.d(n,{default:()=>y});var t,o=s(1488),c=s(55294),a=s(49527),r=s(71679),i=s(72791),l=s(96710),d=s(57689),u=s(91608),h=s(29901),p=s(67527),x=s(30168);const g=s(76487).ZP.div(t||(t=(0,x.Z)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  /* transform: translate(-50%, -50%); */\n  overflow: hidden;\n  height: 80px;\n  width: 200px;\n  background-color: wheat;\n  z-index: 15;\n\n  &.hidden {\n    opacity: 0;\n    pointer-events: none;\n  }\n\n  &.shown {\n    opacity: 1;\n  }\n"])));var m=s(80184);const j=e=>{let{isInputOpen:n}=e;return(0,m.jsxs)(g,{className:n?"shown":"hidden",children:[(0,m.jsx)("div",{id:"mydivheader",children:"Click here to move"}),(0,m.jsx)("input",{type:"text"})]})},y=()=>{const[e,n]=(0,i.useState)(!1),[s,t]=(0,i.useState)(!1),[x,g]=(0,i.useState)(!1),[y,f]=(0,i.useState)(!1),[w,v]=(0,i.useState)(!0),[k,S]=(0,i.useState)(""),[b,C]=(0,i.useState)(!1),[N,O]=(0,i.useState)(""),[I,Z,D,z]=(0,d.bx)(),R=(0,i.useRef)(),[q,W]=(0,o.Z)(R),[K,P]=(0,o.Z)(document.body),[_,A]=(0,i.useState)(!1),[B,E]=(0,i.useState)([]),F=n=>{t((e=>!e)),S(e||x||y?e=>"kahoot":e=>"")},L=0===q&&K>P?K-300:K-q,U=(0,i.useRef)(null);return(0,i.useEffect)((()=>{document.title="A1 English | AP Education",U.current=(0,u.io)("https://ap-chat-server.onrender.com/"),U.current.on("connected",((e,n)=>{console.log(e),console.log(n.time),U.current.emit("connected:user",U.current.id,z)})),U.current.on("question:input",(e=>{console.log(e),console.log(z),f(!0)})),U.current.on("connected:user",((e,n)=>{console.log(e),console.log(n)}));return(async()=>{console.log("get");try{const e=(await c.Z.get("https://ap-chat-server.onrender.com/messages/room",{params:{room:z}})).data.filter((e=>new Date(e.createdAt).getDate()===(new Date).getDate()));E((n=>e))}catch(e){console.log(e)}})(),U.current.on("message",(async e=>{E((n=>[...n,e]));await(async()=>{try{await c.Z.post("https://ap-chat-server.onrender.com/messages",e)}catch(n){console.log(n)}})()})),U.current.on("message:get",(async e=>{E((n=>[...n,e]))})),U.current.on("message:pinned",(async(e,n)=>{console.log(e),console.log(n),E((s=>(s[s.findIndex((n=>n.id===e))].isPinned=n.isPinned,[...s])))})),U.current.on("message:delete",(async e=>{console.log("delete fired"),E((n=>[...n.filter((n=>n.id!==e))]));await(async()=>{try{await c.Z.delete("https://ap-chat-server.onrender.com/messages/".concat(e))}catch(n){console.log(n)}})()})),U.current.on("message:deleted",(async e=>{console.log(e),E((n=>[...n.filter((n=>n.id!==e))]))})),U.current.on("user:banned",(async(e,n)=>{console.log(e),console.log(n),e===D.userID&&A(!0)})),()=>{console.log("disconnecting"),U.current.emit("connected:disconnect",U.current.id,z),U.current.off("connected"),U.current.off("message"),U.current.off("user"),U.current.disconnect()}}),[D,z]),(0,m.jsx)(m.Fragment,{children:(void 0===I.a1||I.a1[0]<10)&&!Z?(0,m.jsx)(p.r,{children:(0,m.jsxs)(p.Rq,{children:["\u041f\u0440\u0438\u0432\u0456\u0442! ",(0,m.jsx)("br",{}),"\u041d\u0430\u0440\u0430\u0437\u0456 \u0443\u0440\u043e\u043a \u043d\u0430 \u0446\u0456\u0439 \u0441\u0442\u043e\u0440\u0456\u043d\u0446\u0456 \u043d\u0435 \u043f\u0440\u043e\u0432\u043e\u0434\u0438\u0442\u044c\u0441\u044f! \u041f\u0435\u0440\u0435\u0432\u0456\u0440\u0442\u0435, \u0447\u0438 \u0432\u0438 \u043f\u0435\u0440\u0435\u0439\u0448\u043b\u0438 \u0437\u0430 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u0438\u043c \u043f\u043e\u0441\u0438\u043b\u0430\u043d\u043d\u044f\u043c \u0430\u0431\u043e \u0441\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u0456\u0437\u043d\u0456\u0448\u0435."]})}):D.isBanned||_?(0,m.jsx)(p.r,{children:(0,m.jsxs)(p.Rq,{children:["\u0425\u043c\u043c\u043c\u043c, \u0441\u0445\u043e\u0436\u0435 \u0449\u043e \u0432\u0438 \u0431\u0443\u043b\u0438 \u043d\u0435\u0447\u0435\u043c\u043d\u0456! ",(0,m.jsx)("br",{}),"\u0412\u0430\u0441 \u0431\u0443\u043b\u043e \u0437\u0430\u0431\u043b\u043e\u043a\u043e\u0432\u0430\u043d\u043e \u0437\u0430 \u043f\u043e\u0440\u0443\u0448\u0435\u043d\u043d\u044f \u043f\u0440\u0430\u0432\u0438\u043b \u043d\u0430\u0448\u043e\u0457 \u043f\u043b\u0430\u0442\u0444\u043e\u0440\u043c\u0438. \u0417\u0432'\u044f\u0436\u0456\u0442\u044c\u0441\u044f \u0437\u0456 \u0441\u0432\u043e\u0457\u043c \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u043e\u043c \u0441\u0435\u0440\u0432\u0456\u0441\u0443!"]})}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(p.QU,{style:{width:e&&K>P?"".concat(L,"px"):"100%"},children:[(0,m.jsxs)(p.c6,{children:[(0,m.jsx)(p.i1,{}),(0,m.jsx)(p.tW,{}),(0,m.jsx)(p.Rs,{className:b&&"sound"===N||b&&"live"===N?"animated":"",children:(0,m.jsx)(p.CO,{className:b&&"sound"===N||b&&"live"===N?"animated":""})}),(0,m.jsx)(p.$D,{className:b&&"quality"===N?"animated":"",children:(0,m.jsx)(p.hY,{className:b&&"quality"===N?"animated":""})}),(0,m.jsx)(l.Z,{playing:!0,muted:!0,controls:!0,config:{youtube:{playerVars:{rel:0}}},style:{display:"block",position:"absolute",top:0,left:0},width:"100%",height:"100vh",url:I.a1})]}),(0,m.jsxs)(p.KN,{className:w?"":"hidden",children:[(0,m.jsx)(p.kd,{onClick:F,className:b&&"kahoot_open"===N?"animated":"",children:(0,m.jsx)(p.ev,{})}),(0,m.jsx)(p.Ms,{onClick:()=>{n((e=>!e)),S(s||x||y?e=>"chat":e=>"")},className:b&&"chat_open"===N?"animated":"",children:(0,m.jsx)(p.DS,{})}),(0,m.jsx)(p.wH,{onClick:()=>{g((e=>!e)),O(""),S(s||e||y?e=>"support":e=>"")},children:(0,m.jsx)(p.RB,{})})]}),(0,m.jsx)(p.gF,{id:"no-transform",onClick:()=>{v((e=>!e))},children:w?(0,m.jsx)(p.cz,{}):(0,m.jsx)(p.IL,{})}),console.log(U.current),P>K&&(0,m.jsx)(p.rW,{ref:R,className:e?"shown":"hidden",style:"chat"===k?{zIndex:"2"}:{zIndex:"1"},children:(0,m.jsx)(h.e,{socket:U.current,messages:B,isChatOpen:e,currentUser:D})}),(0,m.jsx)(j,{isInputOpen:y,toggleInput:()=>{f((e=>!e)),O(""),S(s||e||x?e=>"input":e=>"")}}),(0,m.jsx)(r.B,{sectionWidth:K,isSupportOpen:x,isOpenedLast:k,handleSupport:e=>{O((n=>e)),b||C((e=>!e))},openKahoot:F,isKahootOpen:s}),(0,m.jsx)(a.M,{sectionWidth:K,sectionHeight:P,isKahootOpen:s,isChatOpen:e,isOpenedLast:k})]}),K>=P&&(0,m.jsx)(p.rW,{ref:R,className:e?"shown":"hidden",style:"chat"===k?{zIndex:"2"}:{zIndex:"1"},children:(0,m.jsx)(h.e,{socket:U.current,messages:B,isChatOpen:e,currentUser:D})})]})})}}}]);
//# sourceMappingURL=Streams A1 page.58d257cd.chunk.js.map