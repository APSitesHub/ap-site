{"version":3,"file":"static/js/AP Conference Test Page.70171682.chunk.js","mappings":"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","sources":["pages/MyAP/My Platform/TestPlatform.jsx","pages/MyAP/ConferenceTest.jsx","pages/MyAP/My Platform/MyPlatform.styled.js"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport {\n  MyAPBackground,\n  MyPlatformBox,\n  TestLogo,\n  TestPlatformSpoiler,\n} from './MyPlatform.styled';\n\nexport const TestPlatform = ({ platformLink }) => {\n  const [src, setSrc] = useState('https://online.ap.education/school/');\n  const location = useLocation().search.slice(1);\n\n  useEffect(() => {\n    const setIframeSRC = () => {\n      !platformLink && !location\n        ? setSrc('https://online.ap.education/school/')\n        : !location\n        ? setSrc(platformLink)\n        : setSrc(location);\n    };\n\n    setIframeSRC();\n  }, [platformLink, location]);\n\n  return (\n    <MyAPBackground>\n      <TestPlatformSpoiler>\n        <TestLogo />\n      </TestPlatformSpoiler>\n      <MyPlatformBox>\n        <iframe\n          id=\"platform-window\"\n          title=\"platform-pin\"\n          src={src}\n          width=\"100%\"\n          height=\"100%\"\n          allow=\"microphone *\"\n        ></iframe>\n      </MyPlatformBox>\n    </MyAPBackground>\n  );\n};\n","import axios from 'axios';\nimport {\n  Label,\n  LeftFormBackgroundStar,\n  RightFormBackgroundStar,\n} from 'components/LeadForm/LeadForm.styled';\nimport { LoginFormText, StreamSection } from 'components/Stream/Stream.styled';\nimport { Formik } from 'formik';\nimport {\n  AdminFormBtn,\n  AdminInput,\n  AdminInputNote,\n  LoginForm,\n} from 'pages/Streams/AdminPanel/AdminPanel.styled';\nimport { useEffect, useState } from 'react';\nimport * as yup from 'yup';\nimport { TestPlatform } from './My Platform/TestPlatform';\n\nconst ConferenceTest = () => {\n  const [isUserLogged, setIsUserLogged] = useState(false);\n  const [user, setUser] = useState({});\n  const [language, setLanguage] = useState('');\n  const [platformLink, setPlatformLink] = useState(\n    `https://online.ap.education/`\n  );\n\n  axios.defaults.baseURL = 'https://ap-server-8qi1.onrender.com';\n\n  useEffect(() => {\n    document.title = 'My AP | AP Education';\n\n    const refreshToken = async () => {\n      console.log('token refresher');\n      try {\n        const res = await axios.post('/users/refresh', {\n          mail: localStorage.getItem('mail'),\n        });\n        setIsUserLogged(isLogged => (isLogged = true));\n        console.log(73, res.data.user.platformToken);\n        setUser(user => (user = { ...res.data.user }));\n        const lang = res.data.user.lang.split('/');\n        if (lang.length > 1 && !language) {\n          setLanguage(lang[0]);\n        } else if (lang.length <= 1) {\n          setLanguage(res.data.user.lang);\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    };\n    refreshToken();\n\n    const setIframeLinks = async () => {\n      const LINKS = {\n        en1: user.platformToken\n          ? `https://online.ap.education/Account/LoginByToken?token=${\n              user.platformToken\n            }&redirectUrl=${encodeURIComponent(\n              `https://online.ap.education/MarathonClass/?marathonId=37835&pupilId=${user.pupilId}&marathonLessonId=1143131`\n            )}`\n          : `https://online.ap.education/MarathonClass/?marathonId=37835&pupilId=${user.pupilId}&marathonLessonId=1143131`,\n        en2: user.platformToken\n          ? `https://online.ap.education/Account/LoginByToken?token=${\n              user.platformToken\n            }&redirectUrl=${encodeURIComponent(\n              `https://online.ap.education/MarathonClass/?marathonId=49509&pupilId=${user.pupilId}&marathonLessonId=1143132`\n            )}`\n          : `https://online.ap.education/MarathonClass/?marathonId=49509&pupilId=${user.pupilId}&marathonLessonId=1143132`,\n\n        enkids1: user.platformToken\n          ? `https://online.ap.education/Account/LoginByToken?token=${\n              user.platformToken\n            }&redirectUrl=${encodeURIComponent(\n              `https://online.ap.education/MarathonClass/?marathonId=40552&pupilId=${user.pupilId}&marathonLessonId=1143134`\n            )}`\n          : `https://online.ap.education/MarathonClass/?marathonId=40552&pupilId=${user.pupilId}&marathonLessonId=1143134`,\n        enkids2: user.platformToken\n          ? `https://online.ap.education/Account/LoginByToken?token=${\n              user.platformToken\n            }&redirectUrl=${encodeURIComponent(\n              `https://online.ap.education/MarathonClass/?marathonId=50784&pupilId=${user.pupilId}&marathonLessonId=1143133`\n            )}`\n          : `https://online.ap.education/MarathonClass/?marathonId=50784&pupilId=${user.pupilId}&marathonLessonId=1143133`,\n      };\n\n      const marathonLink =\n        language === 'en' && user.marathonNumber === '1'\n          ? 'en1'\n          : language === 'en' && user.marathonNumber === '2'\n          ? 'en2'\n          : language === 'en' && !user.marathonNumber\n          ? 'en2'\n          : language === 'enkids' && user.marathonNumber === '1'\n          ? 'enkids1'\n          : language === 'enkids' && user.marathonNumber === '2'\n          ? 'enkids2'\n          : language === 'enkids' && !user.marathonNumber\n          ? 'enkids2'\n          : '';\n\n      console.log(LINKS[marathonLink]);\n\n      setPlatformLink(link => (link = LINKS[marathonLink]));\n    };\n\n    setIframeLinks();\n  }, [language, user.pupilId, user.marathonNumber, user.platformToken]);\n\n  const setAuthToken = token => {\n    axios.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n  };\n\n  const initialLoginValues = {\n    mail: '',\n    password: '',\n  };\n\n  const loginSchema = yup.object().shape({\n    mail: yup\n      .string()\n      .required('Вкажіть пошту, за якою ви зареєстровані на нашій платформі!'),\n    password: yup\n      .string()\n      .required(\n        'Введіть пароль, який ви використовуєте для входу на нашу платформу!'\n      ),\n  });\n\n  const handleLoginSubmit = async (values, { resetForm }) => {\n    values.mail = values.mail.toLowerCase().trim().trimStart();\n    values.password = values.password.trim().trimStart();\n    try {\n      const response = await axios.post('/users/login', values);\n      console.log(response);\n\n      setAuthToken(response.data.token);\n      setIsUserLogged(isLogged => (isLogged = true));\n      setUser(user => (user = { ...response.data.user }));\n      const lang = response.data.user.lang.split('/');\n      if (lang.length > 1) {\n        setLanguage(lang[0]);\n      }\n      localStorage.setItem('mail', values.mail);\n      resetForm();\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  return (\n    <StreamSection>\n      {!isUserLogged ? (\n        <Formik\n          initialValues={initialLoginValues}\n          onSubmit={handleLoginSubmit}\n          validationSchema={loginSchema}\n        >\n          <LoginForm>\n            <LeftFormBackgroundStar />\n            <RightFormBackgroundStar />\n            <LoginFormText>\n              Привіт!\n              <br />\n              Ця сторінка недоступна для неавторизованих користувачів. Але якщо\n              ви маєте доступ до нашої платформи, то й до цієї сторінки теж.\n              Введіть дані, які ви використовуєте для входу на платформу.\n            </LoginFormText>\n            <Label>\n              <AdminInput type=\"text\" name=\"mail\" placeholder=\"Login\" />\n              <AdminInputNote component=\"p\" name=\"mail\" type=\"email\" />\n            </Label>\n            <Label>\n              <AdminInput\n                type=\"password\"\n                name=\"password\"\n                placeholder=\"Password\"\n              />\n              <AdminInputNote component=\"p\" name=\"password\" />\n            </Label>\n            <AdminFormBtn type=\"submit\">Увійти</AdminFormBtn>\n          </LoginForm>\n        </Formik>\n      ) : (\n        <TestPlatform platformLink={platformLink} />\n      )}\n    </StreamSection>\n  );\n};\n\nexport default ConferenceTest;\n","import { Logo } from 'pages/Quiz/Quiz.styled';\nimport styled from 'styled-components';\n\nexport const MyPlatformBox = styled.div`\n  height: 100vh;\n  width: 100vw;\n\n  overflow: hidden;\n\n  position: absolute;\n  top: 0;\n  left: 0;\n\n  font-family: var(--streams-font-family);\n\n  transition: transform var(--animation-global);\n\n  &.hidden {\n    transform: translateX(-100%);\n  }\n\n  &.shown {\n    transform: translateX(0);\n  }\n`;\n\nexport const TestPlatformSpoiler = styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  width: calc(100% - 17.5px);\n  height: 64px;\n  z-index: 5;\n\n  background-color: white;\n`;\n\nexport const TestLogo = styled(Logo)`\n  display: block;\n  flex-shrink: 0;\n  width: 173px;\n  height: 34px;\n\n  margin: 0 auto;\n`;\n\nexport const MyAPBackground = styled.div`\n  width: 100%;\n  height: 100%;\n`;\n\nexport const BackgroundVideo = styled.video`\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  object-fit: cover;\n\n  width: 100%;\n  height: calc(100% - 64px);\n`;\n"],"names":["TestPlatform","_ref","platformLink","src","setSrc","useState","location","useLocation","search","slice","useEffect","_jsxs","MyAPBackground","children","_jsx","TestPlatformSpoiler","TestLogo","MyPlatformBox","id","title","width","height","allow","ConferenceTest","isUserLogged","setIsUserLogged","user","setUser","language","setLanguage","setPlatformLink","axios","document","async","console","log","res","mail","localStorage","getItem","isLogged","data","platformToken","lang","split","length","error","refreshToken","LINKS","en1","concat","encodeURIComponent","pupilId","en2","enkids1","enkids2","marathonLink","marathonNumber","link","setIframeLinks","loginSchema","yup","shape","required","password","StreamSection","Formik","initialValues","onSubmit","values","resetForm","toLowerCase","trim","trimStart","response","token","setItem","validationSchema","LoginForm","LeftFormBackgroundStar","RightFormBackgroundStar","LoginFormText","Label","AdminInput","type","name","placeholder","AdminInputNote","component","AdminFormBtn","styled","_templateObject","_taggedTemplateLiteral","_templateObject2","Logo","_templateObject3","_templateObject4","_templateObject5"],"sourceRoot":""}