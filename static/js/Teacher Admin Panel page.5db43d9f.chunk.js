"use strict";(self.webpackChunkap_education=self.webpackChunkap_education||[]).push([[2946],{59726:(n,e,t)=>{t.r(e),t.d(e,{default:()=>g});var a=t(55294),r=t(60091),o=t(97723),i=t(8313),s=t(55705),l=t(72791),d=t(8007),c=t(7673),p=t(72666),x=t(80184);a.Z.defaults.baseURL="https://ap-server-8qi1.onrender.com";const m=n=>{let{teacherToEdit:e,closeEditForm:t}=n;const[r,m]=(0,l.useState)(!1),h={name:e.name,login:e.login,password:e.password},g=d.Ry().shape({name:d.Z_().required("\u0406\u043c'\u044f - \u043e\u0431\u043e\u0432'\u044f\u0437\u043a\u043e\u0432\u0435 \u043f\u043e\u043b\u0435"),login:d.Z_().required("\u041b\u043e\u0433\u0456\u043d - \u043e\u0431\u043e\u0432'\u044f\u0437\u043a\u043e\u0432\u0435 \u043f\u043e\u043b\u0435!"),password:d.Z_().required("\u041f\u0430\u0440\u043e\u043b\u044c - \u043e\u0431\u043e\u0432'\u044f\u0437\u043a\u043e\u0432\u0435 \u043f\u043e\u043b\u0435!")});return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(s.J9,{initialValues:h,onSubmit:async(n,r)=>{let{resetForm:o}=r;m((n=>!0)),n.name=n.name.trim().trimStart(),n.login=n.login.toLowerCase().trim().trimStart(),n.password=n.password.trim().trimStart();try{const r=await a.Z.put("/teachers/".concat(e._id),n);console.log(r),o(),alert("\u0422\u0456\u0447\u0435\u0440\u0430 \u0432\u0456\u0434\u0440\u0435\u0434\u0430\u0433\u043e\u0432\u0430\u043d\u043e"),t()}catch(i){console.error(i),alert("\u0414\u0435\u0441\u044c \u044f\u043a\u0430\u0441\u044c \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430 - \u043a\u043b\u0430\u0446\u0430\u0439 F12, \u0440\u043e\u0431\u0438 \u0441\u043a\u0440\u0456\u043d \u043a\u043e\u043d\u0441\u043e\u043b\u0456, \u0432\u0456\u0434\u043f\u0440\u0430\u0432\u043b\u044f\u0439 \u041a\u0438\u0440\u0438\u043b\u0443")}finally{m((n=>!1))}},validationSchema:g,children:(0,x.jsxs)(c.jr,{children:[(0,x.jsx)(p.xA,{children:e.name}),(0,x.jsxs)(o.__,{children:[(0,x.jsx)(c.vD,{type:"text",name:"name",placeholder:"\u041f\u0440\u0456\u0437\u0432\u0438\u0449\u0435 \u0442\u0430 \u0456\u043c'\u044f"}),(0,x.jsx)(c.aC,{component:"p",name:"name"})]}),(0,x.jsxs)(o.__,{children:[(0,x.jsx)(c.vD,{type:"text",name:"login",placeholder:"\u041b\u043e\u0433\u0456\u043d"}),(0,x.jsx)(c.aC,{component:"p",name:"login"})]}),(0,x.jsxs)(o.__,{children:[(0,x.jsx)(c.vD,{type:"text",name:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c"}),(0,x.jsx)(c.aC,{component:"p",name:"password"})]}),(0,x.jsx)(c.Gh,{type:"submit",children:"\u041f\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0438 \u0437\u043c\u0456\u043d\u0438"})]})}),r&&(0,x.jsx)(i.a,{})]})};a.Z.defaults.baseURL="https://ap-server-8qi1.onrender.com";const h=n=>{a.Z.defaults.headers.common.Authorization="Bearer ".concat(n)},g=()=>{const[n,e]=(0,l.useState)(!1),[t,p]=(0,l.useState)(!1),[g,j]=(0,l.useState)([]),[u,Z]=(0,l.useState)(!1),[w,b]=(0,l.useState)({}),[f,v]=(0,l.useState)(!1);(0,l.useEffect)((()=>{document.title="Teacher Admin Panel | AP Education";(async()=>{console.log("token refresher");try{if(localStorage.getItem("isAdmin")){const n=await a.Z.post("admins/refresh/teachers/",{});h(n.data.newToken),console.log(n),p((n=>!0))}}catch(n){console.log(n)}})();(async()=>{try{if(t){const n=await a.Z.get("/teachers/");j((e=>[...n.data.reverse()]))}}catch(n){console.error(n)}})();const n=n=>{"Escape"===n.code&&u&&P()};return window.addEventListener("keydown",n),()=>{window.removeEventListener("keydown",n)}}),[t,u,f]);const y=d.Ry().shape({login:d.Z_().required("\u0412\u043a\u0430\u0436\u0456\u0442\u044c \u043b\u043e\u0433\u0456\u043d!"),password:d.Z_().required("\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c!")}),_=n=>{if(n){const e=n.split(".");return e.length>2?Date.parse([e[1],e[0],e[2]].join("/")):Date.parse(n)}},S=d.Ry().shape({name:d.Z_().required("\u0406\u043c'\u044f - \u043e\u0431\u043e\u0432'\u044f\u0437\u043a\u043e\u0432\u0435 \u043f\u043e\u043b\u0435"),login:d.Z_().required("\u041b\u043e\u0433\u0456\u043d - \u043e\u0431\u043e\u0432'\u044f\u0437\u043a\u043e\u0432\u0435 \u043f\u043e\u043b\u0435!"),password:d.Z_().required("\u041f\u0430\u0440\u043e\u043b\u044c - \u043e\u0431\u043e\u0432'\u044f\u0437\u043a\u043e\u0432\u0435 \u043f\u043e\u043b\u0435!")}),P=n=>{Z(!1)};return(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)(c.Kq,{children:[!t&&(0,x.jsx)(s.J9,{initialValues:{login:"",password:""},onSubmit:async(n,t)=>{let{resetForm:r}=t;e((n=>!0));try{const t=await a.Z.post("/admins/login/teachers",n);h(t.data.token),p((n=>!0)),localStorage.setItem("isAdmin",!0),r()}catch(o){console.error(o)}finally{e((n=>!1))}},validationSchema:y,children:(0,x.jsxs)(c.U0,{children:[(0,x.jsxs)(o.__,{children:[(0,x.jsx)(c.vD,{type:"text",name:"login",placeholder:"Login"}),(0,x.jsx)(c.aC,{component:"p",name:"login"})]}),(0,x.jsxs)(o.__,{children:[(0,x.jsx)(c.vD,{type:"password",name:"password",placeholder:"Password"}),(0,x.jsx)(c.aC,{component:"p",name:"password"})]}),(0,x.jsx)(c.Gh,{type:"submit",children:"\u0417\u0430\u043b\u043e\u0433\u0456\u043d\u0438\u0442\u0438\u0441\u044c"})]})}),t&&(0,x.jsx)(s.J9,{initialValues:{name:"",login:"",password:""},onSubmit:async(n,t)=>{let{resetForm:r}=t;e((n=>!0)),n.name=n.name.trim().trimStart(),n.login=n.login.toLowerCase().trim().trimStart(),n.password=n.password.trim().trimStart();try{const t=await a.Z.post("/teachers/new",n);console.log(t),r(),alert("\u042e\u0437\u0435\u0440\u0430 \u0434\u043e\u0434\u0430\u043d\u043e"),v((n=>!n))}catch(o){console.error(o),alert("\u0414\u0435\u0441\u044c \u044f\u043a\u0430\u0441\u044c \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430 - \u043a\u043b\u0430\u0446\u0430\u0439 F12, \u0440\u043e\u0431\u0438 \u0441\u043a\u0440\u0456\u043d \u043a\u043e\u043d\u0441\u043e\u043b\u0456, \u0432\u0456\u0434\u043f\u0440\u0430\u0432\u043b\u044f\u0439 \u041a\u0438\u0440\u0438\u043b\u0443")}finally{e((n=>!1))}},validationSchema:S,children:(0,x.jsxs)(c.P_,{children:[(0,x.jsxs)(o.__,{children:[(0,x.jsx)(c.vD,{type:"text",name:"name",placeholder:"\u041f\u0440\u0456\u0437\u0432\u0438\u0449\u0435 \u0442\u0430 \u0456\u043c'\u044f"}),(0,x.jsx)(c.aC,{component:"p",name:"name"})]}),(0,x.jsxs)(o.__,{children:[(0,x.jsx)(c.vD,{type:"text",name:"login",placeholder:"\u041b\u043e\u0433\u0456\u043d"}),(0,x.jsx)(c.aC,{component:"p",name:"login"})]}),(0,x.jsxs)(o.__,{children:[(0,x.jsx)(c.vD,{type:"text",name:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c"}),(0,x.jsx)(c.aC,{component:"p",name:"password"})]}),(0,x.jsx)(c.Gh,{type:"submit",children:"\u0414\u043e\u0434\u0430\u0442\u0438 \u0442\u0456\u0447\u0435\u0440\u0430"})]})}),t&&g.length&&(0,x.jsxs)(c.OD,{children:[(0,x.jsx)(c.az,{children:"\u0421\u043f\u0438\u0441\u043e\u043a \u0430\u043a\u0430\u0443\u043d\u0442\u0456\u0432 \u0442\u0456\u0447\u0435\u0440\u0456\u0432 \u0437 \u0434\u043e\u0441\u0442\u0443\u043f\u043e\u043c \u0434\u043e \u0442\u0430\u0431\u043b\u0438\u0447\u043e\u043a \u0432\u0456\u0434\u0433\u0443\u043a\u0456\u0432"}),(0,x.jsx)("thead",{children:(0,x.jsxs)(c.me,{children:[(0,x.jsx)(c.Sb,{children:"\u0406\u043c'\u044f"}),(0,x.jsx)(c.Sb,{children:"\u041b\u043e\u0433\u0456\u043d"}),(0,x.jsx)(c.Sb,{children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),(0,x.jsx)(c.Sb,{children:"\u0412\u0456\u0434\u0432\u0456\u0434\u0438\u043d\u0438"}),(0,x.jsx)(c.Sb,{children:"\u0412\u0456\u0434\u0432\u0456\u0434\u0438\u043d\u0438 \u0437 \u0447\u0430\u0441\u043e\u043c"}),(0,x.jsx)(c.Sb,{children:"Edit"}),(0,x.jsx)(c.Sb,{children:"Delete"})]})}),(0,x.jsx)("tbody",{children:g.sort(((n,e)=>n.name.localeCompare(e.name))).map((n=>(0,x.jsxs)(c.me,{children:[(0,x.jsx)(c.He,{children:n.name}),(0,x.jsx)(c.He,{children:n.login}),(0,x.jsx)(c.He,{children:n.password}),(0,x.jsx)(c.He,{children:n.visited[n.visited.length-1]}),(0,x.jsx)(c.He,{children:n.visitedTime.length?new Date(_(n.visitedTime[n.visitedTime.length-1])).toLocaleString("uk-UA",{timeZone:"+03:00"}):""}),(0,x.jsx)(c.He,{children:"Dev Acc"===n.name?null:(0,x.jsx)(c.Hx,{onClick:()=>(async n=>{Z(!0),b((e=>g.find((e=>e._id===n))))})(n._id),children:"Edit"})}),(0,x.jsx)(c.He,{children:"Dev Acc"===n.name?null:(0,x.jsx)(c.hj,{onClick:()=>(async n=>{if(e((n=>!0)),window.confirm("\u0422\u043e\u0447\u043d\u043e \u0432\u0438\u0434\u0430\u043b\u0438\u0442\u0438 ".concat(g.find((e=>e._id===n)).name,"?")))try{const t=await a.Z.delete("/teachers/".concat(n));console.log(t),alert("\u0422\u0456\u0447\u0435\u0440\u0430 \u0432\u0438\u0434\u0430\u043b\u0435\u043d\u043e"),j((e=>[...e.filter((e=>e._id!==n))]))}catch(t){console.error(t),alert("\u0414\u0435\u0441\u044c \u044f\u043a\u0430\u0441\u044c \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430 - \u043a\u043b\u0430\u0446\u0430\u0439 F12, \u0440\u043e\u0431\u0438 \u0441\u043a\u0440\u0456\u043d \u043a\u043e\u043d\u0441\u043e\u043b\u0456, \u0432\u0456\u0434\u043f\u0440\u0430\u0432\u043b\u044f\u0439 \u041a\u0438\u0440\u0438\u043b\u0443")}finally{e((n=>!1))}else e((n=>!1))})(n._id),children:"Del"})})]},n._id)))})]}),u&&(0,x.jsx)(r.Y,{onMouseDown:n=>{"close-on-click"===n.target.id&&Z(!1)},id:"close-on-click",children:(0,x.jsx)(m,{teacherToEdit:w,closeEditForm:P})}),n&&(0,x.jsx)(i.a,{})]})})}},7673:(n,e,t)=>{t.d(e,{Gh:()=>A,He:()=>J,Hx:()=>V,Kq:()=>E,Lv:()=>O,OD:()=>R,P_:()=>H,Sb:()=>I,U0:()=>F,aC:()=>T,az:()=>U,hj:()=>K,jr:()=>z,me:()=>G,vD:()=>L,x2:()=>M});var a,r,o,i,s,l,d,c,p,x,m,h,g,j,u,Z,w,b,f,v,y,_,S,P=t(30168),k=t(97723),D=t(55705),C=t(37269),q=t(76487);const E=q.ZP.section(a||(a=(0,P.Z)(["\n  height: max-content;\n  padding: 30px 20px;\n  display: flex;\n  align-items: flex-start;\n\n  gap: 30px;\n"]))),F=(0,q.ZP)(D.l0)(r||(r=(0,P.Z)(["\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n\n  display: flex;\n  flex-direction: column;\n  gap: 35px;\n"]))),H=(0,q.ZP)(D.l0)(o||(o=(0,P.Z)(["\n  margin: 0 auto;\n\n  position: sticky;\n  top: 50%;\n\n  transform: translateY(-50%);\n\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n"]))),z=(0,q.ZP)(D.l0)(i||(i=(0,P.Z)(["\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: 100%;\n  max-width: 400px;\n\n  background-color: white;\n  padding: 24px;\n  border-radius: 24px;\n\n  display: flex;\n  flex-direction: column;\n  gap: 15px;\n"]))),A=(0,q.ZP)(k.Mg)(s||(s=(0,P.Z)(["\n  margin: 0 auto;\n  height: 48px;\n  padding: 0;\n"]))),L=(0,q.ZP)(k.II)(l||(l=(0,P.Z)(["\n  width: 240px;\n  padding: 8px 10px;\n  font-size: 16px;\n  height: 40px;\n  -webkit-text-stroke: 0px;\n\n  border: 2px solid var(--main-color);\n\n  &.error {\n    border-color: red;\n  }\n\n  @media screen and (min-width: 768px) {\n    width: 360px;\n  }\n"]))),T=(0,q.ZP)(k.r2)(d||(d=(0,P.Z)(["\n  color: var(--main-color);\n  font-size: 12px;\n  font-weight: 500;\n  position: static;\n  max-width: 240px;\n\n  @media screen and (min-width: 768px) {\n    max-width: 360px;\n  }\n"]))),R=q.ZP.table(c||(c=(0,P.Z)(["\n  max-width: 50vw;\n  min-height: 80vh;\n  margin: 0 auto;\n\n  table-layout: auto;\n  width: 100%;\n\n  text-align: center;\n  border: 1px solid #000;\n  border-collapse: collapse;\n"]))),U=q.ZP.caption(p||(p=(0,P.Z)(["\n  caption-side: top;\n  margin-bottom: 20px;\n"]))),G=(q.ZP.span(x||(x=(0,P.Z)(["\n  font-size: 11px;\n"]))),q.ZP.tr(m||(m=(0,P.Z)(["\n  border: 1px solid #000;\n"])))),I=q.ZP.th(h||(h=(0,P.Z)(["\n  border: 1px solid #000;\n  padding: 3px;\n"]))),J=(q.ZP.div(g||(g=(0,P.Z)(["\n  display: flex;\n  align-items: center;\n  gap: 6px;\n\n  position: relative;\n"]))),q.ZP.td(j||(j=(0,P.Z)(["\n  border: 1px solid #000;\n  padding: 3px;\n  height: 3em;\n\n  &.last-name {\n    text-transform: capitalize;\n  }\n\n  &.attention {\n    color: red;\n  }\n\n  &.error {\n    background-color: #ff0000;\n  }\n"])))),V=((0,q.ZP)(J)(u||(u=(0,P.Z)(["\n  text-align: start;\n  padding-left: 8px;\n  max-width: 50vw;\n"]))),q.ZP.button(Z||(Z=(0,P.Z)(["\n  background-color: transparent;\n  border: 1px solid var(--accent-color);\n  border-radius: 5px;\n"])))),K=q.ZP.button(w||(w=(0,P.Z)(["\n  background-color: transparent;\n  border: 1px solid var(--main-color);\n  border-radius: 5px;\n"]))),M=((0,q.ZP)(K)(b||(b=(0,P.Z)(["\n  &.banned {\n    border-color: #023020;\n  }\n  &.not_banned {\n    border-color: #8b0000;\n  }\n"]))),(0,q.ZP)(C.r)(f||(f=(0,P.Z)(["\n  width: 18px;\n  height: 12px;\n\n  color: #000;\n\n  transition: color var(--animation-global);\n\n  &:hover {\n    color: var(--main-color);\n  }\n"]))),q.ZP.div(v||(v=(0,P.Z)(["\n  position: absolute;\n  top: 100%;\n  left: 0;\n"]))),q.ZP.button(y||(y=(0,P.Z)(["\n  width: 100%;\n  text-transform: capitalize;\n"]))),q.ZP.p(_||(_=(0,P.Z)(["\n  font-size: 10px;\n  margin-bottom: 3px;\n  text-align: start;\n"])))),O=(0,q.ZP)(R)(S||(S=(0,P.Z)(["\n  max-width: 80vw;\n"])))}}]);
//# sourceMappingURL=Teacher Admin Panel page.5db43d9f.chunk.js.map