"use strict";(self.webpackChunkap_education=self.webpackChunkap_education||[]).push([[1850],{21345:(e,t,s)=>{s.r(t),s.d(t,{default:()=>q});var n=s(55294),a=s(97723),l=s(67527),o=s(55705),i=s(17102),r=s(72791),c=s(57689),d=s(8007),u=s(38993),h=s(14203),g=s(48640),p=s(87095),j=s(54046),x=s(80184);n.Z.defaults.baseURL="https://ap-server-8qi1.onrender.com";const m=/\d{2}\.\d{2}\.\d{4}, \d{2}:\d{2}:\d{2}:/g,w=/\b(?:https?|ftp):\/\/\S+\b/g,D=e=>{let{currentStudentChart:t}=e;const s=[{area:"Aktywno\u015b\u0107",[t.name]:t.activity},{area:"Gramatyka",[t.name]:t.grammar},{area:"M\xf3wienie",[t.name]:t.speaking},{area:"S\u0142ownictwo",[t.name]:t.lexis},{area:"S\u0142uchanie",[t.name]:t.listening}],n=e=>{let{data:s}=e;return(0,x.jsx)(g.qQ,{data:s,curve:"linearClosed",keys:[t.name],indexBy:"area",maxValue:3,valueFormat:">-.0f",margin:document.body.getClientRects()[0].width<640?{top:0,right:10,bottom:0,left:10}:{top:20,right:60,bottom:20,left:60},borderColor:{from:"color"},gridLevels:3,gridLabelOffset:document.body.getClientRects()[0].width<640?-26:16,dotSize:document.body.getClientRects()[0].width<640?3:5,dotColor:{theme:"background"},dotBorderWidth:(document.body.getClientRects()[0].width,3),colors:{scheme:"dark2"},fillOpacity:.15,blendMode:"multiply",motionConfig:"wobbly",theme:document.body.getClientRects()[0].width<640?{text:{fontSize:8}}:{text:{fontSize:11}}})};return(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)(j.Bu,{children:[(0,x.jsx)(p.xA,{id:"focus",children:t.name}),(0,x.jsx)(j.w6,{dangerouslySetInnerHTML:{__html:"string"===typeof t.feedback[t.feedback.length-1]?t.feedback[t.feedback.length-1].replace(w,(e=>'<a href="'.concat(e,'" target="_blank">').concat(e.length>50?e.slice(0,50)+"...":e,"</a>"))).replace(m,"").trim().split(" ").slice(1).join(" "):""}}),(0,x.jsxs)(j.nK,{id:"chartlimiter",children:[(0,x.jsx)(j.Bd,{id:"chartbg"}),(0,x.jsx)(n,{data:s})]})]})})};var y=s(31036),k=s(62980),f=s(51912),v=s(98954);const b=e=>{let{user:t,personalLessonsDays:s,isMultipleCourses:n}=e;const[a,l]=(0,r.useState)((new Date).getDate()-(new Date).getDay()),[o,i]=(0,r.useState)((new Date).getMonth()+1),[c,d]=(0,r.useState)((new Date).getFullYear()),[u,h]=(0,r.useState)([]),[g,p]=(0,r.useState)([]),[j,m]=(0,r.useState)([]),w=(0,r.useMemo)((()=>[+new Date(2024,11,22),+new Date(2024,11,23),+new Date(2024,11,24),+new Date(2024,11,25),+new Date(2024,11,26),+new Date(2024,11,27),+new Date(2024,11,28),+new Date(2024,11,29),+new Date(2024,11,30),+new Date(2024,11,31),+new Date(2025,0,1),+new Date(2025,0,2),+new Date(2025,0,3),+new Date(2025,0,4),+new Date(2025,0,5)]),[]);(0,r.useEffect)((()=>{(()=>{let e=new Date(c,o-1,a+1);const t=e.getDate()-e.getDay(),n=[];e.getDate()!==t?e.setDate(t):e.setDate(t+1);let l=0;for(;e.getDay()<=6&&l<7;)l+=1,s.includes(e.getDay())&&!w.includes(+new Date(e.getFullYear(),e.getMonth(),e.getDate()))&&n.push(new Date(e.getFullYear(),e.getMonth(),e.getDate(),3).toISOString()),e.setDate(e.getDate()+1);h((e=>n))})();(()=>{let e=new Date(c,o-1,1);const t=[];for(e.setDate(1);e.getMonth()+1===o;)s.includes(e.getDay())&&!w.includes(+new Date(e.getFullYear(),e.getMonth(),e.getDate()))&&t.push(new Date(e.getFullYear(),e.getMonth(),e.getDate(),3).toISOString()),e.setDate(e.getDate()+1);p((e=>t))})();(()=>{let e=new Date;const t=[];for(e.setDate(1),e.setMonth(0);e.getFullYear()===c;)s.includes(e.getDay())&&!w.includes(+new Date(e.getFullYear(),e.getMonth(),e.getDate()))&&t.push(new Date(e.getFullYear(),e.getMonth(),e.getDate(),3).toISOString()),e.setDate(e.getDate()+1);m((e=>t))})()}),[a,o,c,s,w]);const D=e=>"".concat(e).length>1?e:"0"+e,b=e=>{let n=new Date(c,e-1,1);const a=[];for(n.setDate(1);n.getMonth()+1===e;)s.includes(n.getDay())&&a.push(new Date(n.getFullYear(),n.getMonth(),n.getDate(),3).toISOString()),n.setDate(n.getDate()+1);const l=a.map((e=>"".concat(D(new Date(e).getDate()),".").concat(D(new Date(e).getMonth()+1),".").concat(new Date(e).getFullYear())));return t.visited.filter((t=>+t.split(".")[1]===e&&l.includes(t))).length},S=e=>{const n=(e=>{let t=new Date(e).toISOString();const n=new Date(t).getDate()-new Date(t).getDay(),a=[];t=new Date(t).getDate()!==n?new Date(t).setDate(n):new Date(t).setDate(n+1);let l=0;for(;new Date(t).getDay()<=6&&l<7;)l+=1,new Date(t).getDay()>=1&&s.includes(t.getDay())&&a.push(t),t=new Date(new Date(t).setDate(new Date(t).getDate()+1));return a})(new Date(c,o-1,e+1,3).toISOString()).map((e=>"".concat(D(new Date(e).getDate()),".").concat(D(new Date(e).getMonth()+1),".").concat(D(new Date(e).getFullYear()))));return t.visited.filter((e=>n.includes(e))).length},C=()=>{const e=u;let t=(new Date).getDate();const s=()=>e.findIndex((e=>new Date(e).getDate()===t&&new Date(e).getMonth()===(new Date).getMonth()));let n=s();for(;s()<0&&t>=1;)t-=1,s();n=e.findIndex((e=>new Date(e).getDate()===t&&new Date(e).getMonth()===(new Date).getMonth()));const l=e.slice(0,n+1).length;return u.length?n<0&&S(a)>0?u.length-S(a):0===l||l-S(a)<0?0:l-S(a):0},M=()=>{const e=g;let t=(new Date).getDate();const s=()=>e.findIndex((e=>new Date(e).getDate()===t&&new Date(e).getMonth()===(new Date).getMonth()));let n=s();for(;s()<0&&t>=1;)t-=1,s();n=e.findIndex((e=>new Date(e).getDate()===t&&new Date(e).getMonth()===(new Date).getMonth()));const a=e.slice(0,n+1).length;return n<0&&b(o)>0?g.length-b(o):0===a||a-b(o)<0?0:a-b(o)};return(0,x.jsxs)(v.ui,{style:{top:n?"184px":"142px"},children:[(0,x.jsxs)(v.sI,{children:[(0,x.jsx)(v.yX,{}),"Obecno\u015b\u0107"]}),(0,x.jsxs)(v.gM,{children:[(0,x.jsxs)(v.iT,{children:[(0,x.jsx)(v.Nk,{disabled:0===S(a-7),onClick:()=>{l(a-7)},children:(0,x.jsx)(v.Ug,{className:0!==S(a-7)&&"available"})}),(0,x.jsx)(v.dw,{children:(()=>{const e=new Date(c,o-1,a+1),t=new Date(e),s=new Date(t.setDate(t.getDate()+6));return"".concat(D(e.getDate()),".").concat(D(e.getMonth()+1)," - ").concat(D(s.getDate()),".").concat(D(s.getMonth()+1),".").concat(s.getFullYear())})()}),(0,x.jsx)(v.Nk,{disabled:0===S(a+7),onClick:()=>{l(a+7)},children:(0,x.jsx)(v.Pi,{className:0!==S(a+7)&&"available"})})]}),(0,x.jsxs)(v.v0,{children:[(0,x.jsx)(v.p6,{children:(0,x.jsxs)(v.Q4,{children:[(0,x.jsxs)(v.d8,{children:[(0,x.jsx)(v.H1,{children:"Odwiedzono:"}),(0,x.jsx)(v.hW,{children:(0,x.jsx)(v.Uv,{children:(()=>{const e=u.map((e=>"".concat(D(new Date(e).getDate()),".").concat(D(new Date(e).getMonth()+1),".").concat(D(new Date(e).getFullYear())))),s=t.visited.filter((t=>e.includes(t)));return e.map(((e,t)=>s.includes(e)?(0,x.jsx)(f.r,{},t):!s.includes(e)&&(+e.split(".")[1]<(new Date).getMonth()+1||+e.split(".")[0]<(new Date).getDate())?(0,x.jsx)(k.r,{},t):(0,x.jsx)(y.r,{},t)))})()})})]}),(0,x.jsxs)(v.K4,{children:[(()=>{const e=u.map((e=>"".concat(D(new Date(e).getDate()),".").concat(D(new Date(e).getMonth()+1),".").concat(new Date(e).getFullYear())));return console.log(298,e),console.log(299,t.visited.filter((t=>e.includes(t))).length),t.visited.filter((t=>e.includes(t))).length})(),"/",(0,x.jsx)(v.u4,{children:u.length})]})]})}),(0,x.jsxs)(v.p6,{children:[(0,x.jsx)(v.H1,{children:"Braki:"}),(0,x.jsx)(v.K4,{style:{color:C()>0&&"#D61D1D"},children:C()})]})]}),(0,x.jsxs)(v.iT,{children:[(0,x.jsx)(v.Nk,{disabled:0===b(o-1),onClick:()=>{if(o>1){i(o-1);const e=new Date(c,o-2,1),s=t.visited.filter((e=>+e.split(".")[1]===o-1)),n=new Date(c,o-2,+s[0].split(".")[0]);return void l(n>7?n.getDate()-n.getDay():e.getDate()-e.getDay())}i(12),d(c-1);const e=new Date(c,o-2,1),s=t.visited.filter((e=>+e.split(".")[1]===o-1)),n=new Date(c,o-2,+s[0].split(".")[0]);l(n>7?n.getDate()-n.getDay():e.getDate()-e.getDay())},children:(0,x.jsx)(v.Ug,{className:0!==b(o-1)&&"available"})}),(0,x.jsx)(v.dw,{children:["\u0421\u0456\u0447\u0435\u043d\u044c","Luty","\u0411\u0435\u0440\u0435\u0437\u0435\u043d\u044c","\u041a\u0432\u0456\u0442\u0435\u043d\u044c","\u0422\u0440\u0430\u0432\u0435\u043d\u044c","\u0427\u0435\u0440\u0432\u0435\u043d\u044c","\u041b\u0438\u043f\u0435\u043d\u044c","\u0421\u0435\u0440\u043f\u0435\u043d\u044c","\u0412\u0435\u0440\u0435\u0441\u0435\u043d\u044c","\u0416\u043e\u0432\u0442\u0435\u043d\u044c","\u041b\u0438\u0441\u0442\u043e\u043f\u0430\u0434","\u0413\u0440\u0443\u0434\u0435\u043d\u044c"][o-1]}),(0,x.jsx)(v.Nk,{disabled:0===b(o+1),onClick:()=>{if(o<12){i(o+1);const e=new Date(c,o,1),s=t.visited.filter((e=>+e.split(".")[1]===o+1)),n=new Date(c,o,+s[0].split(".")[0]);return void l(n>7?n.getDate()-n.getDay():e.getDate()-e.getDay())}i(1),d(c+1);const e=new Date(c,o,1),s=t.visited.filter((e=>+e.split(".")[1]===o+1)),n=new Date(c,o,+s[0].split(".")[0]);l(n>7?n.getDate()-n.getDay():e.getDate()-e.getDay())},children:(0,x.jsx)(v.Pi,{className:0!==b(o+1)&&"available"})})]}),(0,x.jsxs)(v.v0,{children:[(0,x.jsxs)(v.p6,{children:[(0,x.jsx)(v.H1,{children:"Odwiedzono:"}),(0,x.jsxs)(v.K4,{children:[b(o),"/",(0,x.jsx)(v.u4,{children:g.length})]})]}),(0,x.jsxs)(v.p6,{children:[(0,x.jsx)(v.H1,{children:"Braki:"}),(0,x.jsx)(v.K4,{style:{color:M()>0&&"#D61D1D"},children:M()})]})]}),(0,x.jsxs)(v.cf,{children:[(0,x.jsx)(v.H1,{children:"\u0141\u0105czna liczba lekcji odbytych w ci\u0105gu roku:"}),(0,x.jsxs)(v.K4,{children:[(()=>{const e=j.map((e=>"".concat(new Date(e).getDate(),".").concat(D(new Date(e).getMonth()+1),".").concat(D(new Date(e).getFullYear()))));return t.visited.filter((t=>e.includes(t))).length})(),"/",(0,x.jsx)(v.u4,{children:j.length})]}),(0,x.jsx)(v.DE,{})]})]})]})};var S=s(55658),C=s(83134),M=s.n(C),L=s(92641),I=s(23635);const N=e=>{let{lessons:t,language:s,user:n,setPlatformIframeLink:a,isMultipleCourses:l}=e;const[o,i]=(0,r.useState)([]),[c,d]=(0,r.useState)(!1),[u,h]=(0,r.useState)(""),[g,p]=(0,r.useState)(!1),[j,m]=(0,r.useState)(""),[w,D]=(0,r.useState)([]),[y,k]=(0,r.useState)([]),[f,v]=(0,r.useState)(!1),[b,C]=(0,r.useState)(0),[N,z]=(0,r.useState)(!0),O=window.location.origin+window.location.pathname,P=e=>{p(!1),m(""),D([]),k([]);const n=e.target.value;i(""!==n?e=>[...t.filter((e=>{const t=e.level+" "+e.lesson.replace("Lesson","").replace("Lekcja","").replace("Unterricht","").trim().trimStart();return(e.keysEn.toLowerCase().includes(n.toLowerCase().trim().trimStart())||e.keysUa.toLowerCase().includes(n.toLowerCase().trim().trimStart())||e.topic.toLowerCase().includes(n.toLowerCase().trim().trimStart())||e.lesson.toLowerCase().includes(n.toLowerCase().trim().trimStart())||e.level.toLowerCase().includes(n.toLowerCase().trim().trimStart())||t.toLowerCase().includes(n.toLowerCase().trim().trimStart()))&&s===e.lang}))]:e=>[...t.filter((e=>s===e.lang))]),sessionStorage.setItem("searchValue",n)},F=e=>{const t=e.target.value;z(""===t),k(""!==t?e=>[...w.filter((e=>e.question.toLowerCase().includes(t.toLowerCase().trim().trimStart())||e.exercise.toLowerCase().includes(t.toLowerCase().trim().trimStart())))]:e=>[...w])},Y=e=>{e.currentTarget.classList.toggle("tooltip-open")},E=()=>{console.log("mouse out?"),h((e=>"")),c&&d((e=>!e))},U=e=>f&&e!==b?C(e):f||e!==b?f&&e===b?v((e=>!e)):(e=>{C(e),v((e=>!e))})(e):v((e=>!e));return(0,x.jsxs)(I.yO,{className:0===o.length&&"nothing-found",style:{top:l?"184px":"142px"},children:[(0,x.jsxs)(I.GJ,{children:[(0,x.jsx)(I.qZ,{}),(0,x.jsx)(I.OO,{value:sessionStorage.getItem("searchValue")?sessionStorage.getItem("searchValue"):"",autoFocus:sessionStorage.getItem("searchValue")&&!0,onFocus:sessionStorage.getItem("searchValue")&&P,onChange:P,placeholder:"Wprowad\u017a temat lub numer lekcji"})]}),0!==o.length&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(I.JS,{children:(0,x.jsx)(I.Vz,{children:o.slice(0,5).map((e=>(0,x.jsxs)(I.$J,{children:[(0,x.jsxs)(I.Pq,{children:[(0,x.jsx)(I.W7,{children:e.level+e.lesson.replace("Lesson"," -").replace("Lekcja"," -").replace("Unterricht"," -")}),(0,x.jsxs)(I.Nk,{children:[(0,x.jsxs)(I.sF,{children:[e.level," ",e.lesson]}),(0,x.jsxs)(I.zs,{children:[(0,x.jsx)(I.P3,{onMouseEnter:e=>Y(e),onMouseOut:e=>Y(e),onClick:()=>{a("https://online.ap.education/MarathonClass/?marathonId=".concat(e.marathonId,"&pupilId=").concat(n.pupilId,"&marathonLessonId=").concat(e.lessonId))},children:(0,x.jsx)(I.BI,{})}),(0,x.jsx)(I.u,{onMouseEnter:e=>Y(e),onMouseOut:e=>Y(e),onClick:()=>{window.open("".concat(O,"?https://online.ap.education/MarathonClass/?marathonId=").concat(e.marathonId,"&pupilId=").concat(n.pupilId,"&marathonLessonId=").concat(e.lessonId),"_blank")},children:(0,x.jsx)(I.h0,{})})]}),(0,x.jsx)(I.RM,{children:e.topic})]})]}),e.video[0]&&(0,x.jsx)(I.gZ,{children:(0,x.jsx)(M(),{loop:!0,muted:!1,controls:!0,style:{display:"block",position:"absolute",top:0,left:0},width:"100%",height:"100%",url:e.video[0]})}),e.pdf.length>0&&(0,x.jsx)(I.Dv,{onMouseLeave:E,children:e.pdf.map(((e,t)=>(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(I.Ag,{id:e,onMouseEnter:e=>(e=>{h((t=>e.target.id)),c||d((e=>!e))})(e),onTouchEnd:()=>{return h(t=e),void(c&&t!==u?h((e=>t)):c||t!==u?c&&t===u?d((e=>!e)):(e=>{console.log("opener"),h((t=>e)),d((e=>!e))})(t):d((e=>!e)));var t},children:[(0,x.jsx)(L.r,{}),(0,x.jsxs)(I.CH,{target:"_blank",rel:"noopener noreferrer",to:(0,S.ZP)(e),children:["\u0413\u0440\u0430\u043c\u0430\u0442\u0438\u043a\u0430 ",t+1,(0,x.jsx)(I.h0,{})]},t)]},e),(0,x.jsx)(I.Ym,{className:c&&u===e&&"preview-open",children:c&&u===e&&(0,x.jsx)(I.Xq,{title:"Preview of ".concat(e),src:e.replace("open?id=","file/d/").replace("view","preview").replace("&usp=drive_copy","/preview"),allow:"autoplay"})})]})))}),e.faq.length>0&&(0,x.jsxs)(I.Nn,{children:[(0,x.jsxs)(I.uT,{onClick:()=>(e=>{p((e=>!e)),D((t=>[...e.faq])),k((t=>[...e.faq])),m((t=>e._id))})(e),children:[(0,x.jsxs)(I.OX,{children:[(0,x.jsx)(I.U$,{children:(0,x.jsx)(I.m9,{children:"?"})}),"FAQ"," "]}),g?(0,x.jsx)(I.YY,{}):(0,x.jsx)(I.Ok,{})]}),(0,x.jsxs)(I.on,{className:g&&j===e._id&&"faqlistopen",children:[(0,x.jsx)(I.iL,{onChange:F,placeholder:"Prosz\u0119 wprowadzi\u0107 numer zadania lub wasze pytanie.",className:!N&&"not-empty"}),(0,x.jsx)(I.UA,{})]}),(0,x.jsx)(I.Ar,{className:g&&j===e._id&&"faqlistopen",children:y.map(((e,t)=>(0,x.jsxs)(I.E2,{children:[(0,x.jsx)(I.VH,{onClick:()=>U(t),children:e.exercise}),(0,x.jsx)(I.HL,{className:f&&b===t&&"preview-open",children:e.question}),(0,x.jsx)(I.Xu,{className:f&&b===t&&"preview-open",children:f&&b===t&&(0,x.jsx)(I.gZ,{children:(0,x.jsx)(M(),{loop:!0,muted:!1,controls:!0,style:{display:"block",position:"absolute",top:0,left:0},width:"100%",height:"100%",url:e.answer})})})]},t)))})]})]},e._id)))})}),(0,x.jsx)(I.i9,{})]})]})};var z=s(25984),O=s(26478),P=s(82846);const F=e=>{let{user:t,flatPoints:s,flatMonthlyPoints:n,isMultipleCourses:a}=e;const[l,o]=(0,r.useState)("0%"),[i,c]=(0,r.useState)(0),d=i>0?n.filter((e=>"".concat(e.course)===t.course)).sort(((e,t)=>t.points-e.points)):s.filter((e=>"".concat(e.course)[0]===t.course[0])).sort(((e,t)=>t.points-e.points)),u=d.findIndex((e=>e.mail.toLowerCase()===t.mail.toLowerCase())),h=e=>{o((t=>"".concat(100*e,"%"))),c(e)};return(0,x.jsxs)(P.dn,{style:{top:a?"184px":"142px"},children:[(0,x.jsxs)(P.JI,{children:[(0,x.jsx)(P.TB,{}),"Ranking"]}),-1===u?(0,x.jsxs)(P.fc,{children:[(0,x.jsx)(P.ij,{src:O,alt:"Eyes emoji",width:"80"}),(0,x.jsx)(P.qY,{children:"\u0428\u0443\u043a\u0430\u0454\u043c\u043e \u0432\u0430\u0441 \u0443 \u0440\u0435\u0439\u0442\u0438\u043d\u0433\u0443."}),(0,x.jsxs)(P.qY,{children:["\u0412\u0438\u043a\u043e\u043d\u0430\u0439\u0442\u0435 \u0449\u0435 \u043a\u0456\u043b\u044c\u043a\u0430 \u0432\u043f\u0440\u0430\u0432, ",(0,x.jsx)("br",{})," \u0449\u043e\u0431 \u0431\u0443\u0442\u0438 \u0432 \u0442\u043e\u043f\u0456! \ud83e\udd29"]})]}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(P.bX,{children:[(0,x.jsx)(P.Tu,{style:{transform:"translateX(".concat(l,")")}}),(0,x.jsx)(P.SA,{onClick:()=>{h(0)},className:0===i&&"active",children:"Og\xf3lny"}),(0,x.jsx)(P.SA,{onClick:()=>{h(1)},className:1===i&&"active",children:"Miesi\u0119czny"})]}),(0,x.jsxs)(P.Iq,{children:[(0,x.jsx)(P.bY,{children:"Miejsce"}),(0,x.jsx)(P.Js,{children:"Imi\u0119 i nazwisko"}),(0,x.jsx)(P.bY,{children:"Punkty"})]}),(0,x.jsxs)(P.Q4,{children:[(0,x.jsx)(P.ip,{children:d.findIndex((e=>e.mail.toLowerCase()===t.mail.toLowerCase()))+1}),(0,x.jsx)(P.wu,{children:t.name}),(0,x.jsx)(P.ip,{children:d[u].points<0?0:d[u].points})]}),(0,x.jsx)(P.ag,{children:d.slice(0,10).map(((e,t)=>(0,x.jsxs)(P.HJ,{children:[t<=2?(0,x.jsx)(P.OV,{children:t+1}):(0,x.jsx)(P.C,{children:t+1}),(0,x.jsx)(P.wu,{children:e.name}),(0,x.jsx)(P.ip,{children:e.points})]},(0,z.x0)(8))))})]})]})};var Y=s(41047);const E=e=>{let{user:t,language:s,timetable:n,isMultipleCourses:a}=e;const l=(0,r.useRef)(void 0===t.package?"pro":t.package),o=n.find((e=>"enkids"===s&&t.knowledge.includes("beginner")?e.lang===s&&e.course===t.course&&e.level===t.knowledge:e.lang===s&&e.course===t.course)),i=(()=>{const e="https://academy.ap.education/streams/",n="https://academy.ap.education/streams-kids/";return console.log(t.lang),console.log(s),console.log(void 0===t.adult||t.adult),console.log(t.knowledge),console.log(void 0===t.package?"student":t.package),console.log(l.current),"en"===s?e+(null===o||void 0===o?void 0:o.level):"enkids"===s?n+(null===o||void 0===o?void 0:o.level):"de"===s&&"a1"!==(null===o||void 0===o?void 0:o.level)?e+"deutsch"+(null===o||void 0===o?void 0:o.level):"de"===s&&"a1"===(null===o||void 0===o?void 0:o.level)?e+"deutsch":"dekids"===s?n+"de"+(null===o||void 0===o?void 0:o.level):"pl"===s&&"a1"!==(null===o||void 0===o?void 0:o.level)?e+"polski"+(null===o||void 0===o?void 0:o.level):"pl"===s&&"a1"===(null===o||void 0===o?void 0:o.level)?e+"polski":"plkids"===s?n+"pl"+(null===o||void 0===o?void 0:o.level):e})(),c=(()=>{const e="https://n1313568.alteg.io";return"en"===s?e:"enkids"===s?"https://n1313571.alteg.io/":"de"===s?"https://n1313569.alteg.io":"dekids"===s?"https://n1313572.alteg.io/":"pl"===s?"https://n1313570.alteg.io":"plkids"===s?"https://n1313573.alteg.io/":e})();console.log(c);const d=(()=>{const e="https://academy.ap.education/streams/";return"en"===s?e+(null===o||void 0===o?void 0:o.level)+"sc":"enkids"===s?"https://academy.ap.education/streams-kids/"+(null===o||void 0===o?void 0:o.level)+"sc":e+s+(null===o||void 0===o?void 0:o.level)+"sc"})(),u=["Pon","Wt","\u015ar","Czw","Pt","Sob","Nd"];return(0,x.jsxs)(Y.wf,{style:{top:a?"184px":"142px"},children:[(0,x.jsxs)(Y.IZ,{children:[(0,x.jsx)(v.Qu,{}),"Harmonogram zaj\u0119\u0107"]}),o?(0,x.jsxs)(Y.bP,{children:[(0,x.jsxs)(Y.Yh,{children:[(0,x.jsxs)(Y.Vt,{children:[(0,x.jsx)(Y.Vl,{children:"Teoretyczne zaj\u0119cia"}),(0,x.jsx)(Y.h4,{href:i,target:"_blank",children:(0,x.jsx)(Y.Oi,{children:"Przej\u015b\u0107 do"})})]}),(0,x.jsxs)(Y.hz,{children:[(0,x.jsx)("thead",{children:(0,x.jsxs)("tr",{children:[(0,x.jsx)(Y.h6,{className:"day",children:"Dzie\u0144"}),(0,x.jsx)(Y.h6,{className:"time",children:"Czas"}),(0,x.jsx)(Y.h6,{className:"lessonNumber",children:"\u2116 lekcja"}),(0,x.jsx)(Y.h6,{className:"teacher",children:"Wyk\u0142adowca"})]})}),(0,x.jsx)("tbody",{children:o.schedule.filter((e=>"webinar"===e.type||"webinar, repeat"===e.type)).sort(((e,t)=>e.day-t.day)).map(((e,t)=>(0,x.jsxs)(Y.UL,{style:e.day===(new Date).getDay()?{backgroundColor:"#F9C838"}:{},children:[(0,x.jsx)(Y.Rk,{className:"day",children:u[e.day-1]}),(0,x.jsx)(Y.Rk,{className:"time",children:e.time}),(0,x.jsx)(Y.Rk,{className:"lessonNumber",children:e.lessonNumber}),(0,x.jsx)(Y.Rk,{className:"teacher",children:e.teacher})]},t)))})]})]})," ",(0,x.jsxs)(Y.w_,{children:[(0,x.jsxs)(Y.Vt,{children:[(0,x.jsx)(Y.Vl,{children:"Praktyczne zaj\u0119cia"}),(0,x.jsx)(Y.h4,{href:d,target:"_blank",children:(0,x.jsx)(Y.Oi,{children:"Przej\u015b\u0107 do"})})]}),(0,x.jsxs)(Y.hz,{children:[(0,x.jsx)("thead",{children:(0,x.jsxs)("tr",{children:[(0,x.jsx)(Y.h6,{className:"day",children:"Dzie\u0144"}),(0,x.jsx)(Y.h6,{className:"time",children:"Czas"}),(0,x.jsx)(Y.h6,{className:"lessonNumber",children:"\u2116 lekcja"}),(0,x.jsx)(Y.h6,{className:"teacher",children:"Wyk\u0142adowca"})]})}),(0,x.jsx)("tbody",{children:o.schedule.filter((e=>"speaking"===e.type)).sort(((e,t)=>e.day-t.day)).map(((e,t)=>(0,x.jsxs)(Y.UL,{style:e.day===(new Date).getDay()?{backgroundColor:"#F9C838"}:{},children:[(0,x.jsx)(Y.Rk,{className:"day",children:u[e.day-1]}),(0,x.jsx)(Y.Rk,{className:"time",children:e.time}),(0,x.jsx)(Y.Rk,{className:"lessonNumber",children:e.lessonNumber}),(0,x.jsx)(Y.Rk,{className:"teacher",children:e.teacher})]},t)))})]})]})]}):(0,x.jsxs)(P.fc,{children:[(0,x.jsx)(P.ij,{src:O,alt:"Eyes emoji",width:"80"}),(0,x.jsx)(P.qY,{children:"\u0417\u0434\u0430\u0454\u0442\u044c\u0441\u044f, \u0443 \u0432\u0430\u0441 \u0449\u0435 \u043d\u0435\u043c\u0430\u0454 \u0440\u043e\u0437\u043a\u043b\u0430\u0434\u0443!"}),(0,x.jsx)(P.qY,{children:"\u0410\u043b\u0435 \u0432\u0456\u043d \u0437'\u044f\u0432\u0438\u0442\u044c\u0441\u044f, \u043a\u043e\u043b\u0438 \u0443 \u0432\u0430\u0441 \u0440\u043e\u0437\u043f\u043e\u0447\u043d\u0443\u0442\u044c\u0441\u044f \u0437\u0430\u043d\u044f\u0442\u0442\u044f!"})]})]})};n.Z.defaults.baseURL="https://ap-server-8qi1.onrender.com";const U=e=>{let{lessons:t,link:s,user:a,language:l,points:o,timetable:i,marathonLink:c,montlyPoints:d,isMultipleCourses:u,setPlatformIframeLink:g,languageIndex:p,setLanguage:j,setLanguageIndex:m}=e;const[w,y]=(0,r.useState)(!1),[k,f]=(0,r.useState)(!1),[v,S]=(0,r.useState)(!1),[C,M]=(0,r.useState)(!1),[L,I]=(0,r.useState)(!1),[z,O]=(0,r.useState)(!1),[P,Y]=(0,r.useState)(!0),[U,q]=(0,r.useState)({}),R=i.find((e=>"enkids"===l&&a.knowledge.includes("beginner")?e.lang===l&&e.course===a.course&&e.level===a.knowledge:e.lang===l&&e.course===a.course)).schedule.map((e=>e.day)),_=Object.keys(o).filter((e=>e.includes(l)&&e.length===(l+a.knowledge).length||e.includes(l)&&e.includes("done"))).reduce(((e,t)=>(e[t]=o[t],e)),{}),T=Object.keys(d).filter((e=>e.includes(l)&&e.length===(l+a.knowledge).length||e.includes(l)&&e.includes("done"))).reduce(((e,t)=>(e[t]=d[t],e)),{}),Z=Object.values(_).flatMap((e=>e)),V=Object.values(T).flatMap((e=>e));console.log(a);const A=()=>{y(!1),f(!1),S(!1),M(!1),I(!1),O(!1)},B=e=>{e.currentTarget.classList.toggle("tooltip-open")};return(0,r.useEffect)((()=>{const e=e=>{"Escape"===e.code&&w&&A()};return(async()=>{try{const e=await n.Z.get("/speakingusers/".concat(a.id));console.log(258,e),q((t=>e.data)),console.log("eff")}catch(e){console.log(e)}})(),window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}}),[w,a.id]),(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(h.Dj,{onClick:A,className:w?"":"hidden"}),(0,x.jsx)(h.YI,{id:"no-transform",onClick:()=>{A(),Y((e=>!e))},children:P?(0,x.jsx)(h.$E,{}):(0,x.jsx)(h.yu,{})}),(0,x.jsxs)(h.Wo,{className:P?"":"hidden",style:{top:u?"145px":"129px"},children:[(0,x.jsx)(h.Uu,{onClick:()=>{!w&&(!v||!C||!L||!z)&&y((e=>!0)),w&&!v&&!C&&!L&&!z&&y((e=>!1)),S(!1),M(!1),I(!1),O(!1),f((e=>!e))},onMouseEnter:e=>B(e),onMouseOut:e=>B(e),children:(0,x.jsx)(h.Hk,{id:"search-btn",className:k&&"active"})}),"online"!==a.package&&(0,x.jsx)(h.Uu,{onClick:()=>{!w&&(!k||!C||!L||!z)&&y((e=>!0)),w&&!k&&!C&&!L&&!z&&y((e=>!1)),f(!1),M(!1),I(!1),O(!1),S((e=>!e))},onMouseEnter:e=>B(e),onMouseOut:e=>B(e),children:(0,x.jsx)(h.zr,{id:"rating-btn",className:v&&"active"})}),"online"!==a.package&&(0,x.jsx)(h.Uu,{onClick:()=>{!w&&(!v||!k||!L||!C)&&y((e=>!0)),w&&!v&&!k&&!L&&!C&&y((e=>!1)),f(!1),S(!1),I(!1),M(!1),O((e=>!e))},onMouseEnter:e=>B(e),onMouseOut:e=>B(e),children:(0,x.jsx)(h.wV,{id:"feedback-btn",className:z&&"active"})}),"online"!==a.package&&(0,x.jsx)(h.Uu,{onClick:()=>{!w&&(!v||!k||!L||!z)&&y((e=>!0)),w&&!v&&!k&&!L&&!z&&y((e=>!1)),f(!1),S(!1),I(!1),O(!1),M((e=>!e))},onMouseEnter:e=>B(e),onMouseOut:e=>B(e),children:(0,x.jsx)(h.CD,{id:"calendar-btn",className:C&&"active"})}),"online"!==a.package&&(0,x.jsx)(h.Uu,{onClick:()=>{!w&&(!v||!k||!C||!z)&&y((e=>!0)),w&&!v&&!k&&!C&&!z&&y((e=>!1)),f(!1),S(!1),M(!1),O(!1),I((e=>!e))},onMouseEnter:e=>B(e),onMouseOut:e=>B(e),children:(0,x.jsx)(h.Ip,{className:L&&"active",id:"timetable-btn"})})]}),k&&(0,x.jsx)(N,{lessons:t,user:a,language:l,setPlatformIframeLink:g,isMultipleCourses:u}),v&&(0,x.jsx)(F,{user:a,flatPoints:Z,flatMonthlyPoints:V,isMultipleCourses:u}),C&&(0,x.jsx)(b,{user:a,personalLessonsDays:R,isMultipleCourses:u}),z&&(0,x.jsx)(D,{currentStudentChart:U}),L&&(0,x.jsx)(E,{user:a,language:l,timetable:i,isMultipleCourses:u})]})},q=()=>{const[e,t]=(0,r.useState)(!1),[s,g]=(0,r.useState)(!1),[p,j]=(0,r.useState)({}),[m,w]=(0,r.useState)({}),[D,y]=(0,r.useState)({}),[k,f]=(0,r.useState)({}),[v,b]=(0,r.useState)(0),[S,C]=(0,r.useState)(""),[M,L]=(0,r.useState)("https://online.ap.education/"),[I,N]=(0,r.useState)(!1);n.Z.defaults.baseURL="https://ap-server-8qi1.onrender.com";const z=(0,c.TH)(),[O,P]=(0,r.useState)("true"===localStorage.getItem("ischatboxshown")),[F,Y]=(0,r.useState)(!1);(0,r.useEffect)((()=>{document.title="My AP | AP Education";(async()=>{console.log("token refresher");try{const e=await n.Z.post("/users/refresh",{mail:localStorage.getItem("mail")});t((e=>!0)),console.log(73,e.data.user.platformToken),f((t=>({...e.data.user})));const s=e.data.user.lang.split("/");s.length>1&&!S?(N(!0),C(s[v])):s.length<=1&&C(e.data.user.lang)}catch(e){console.log(e)}})();(async()=>{console.log("lessons getter");try{const e=await n.Z.get("/lessons");console.log(e),g((t=>[...e.data]))}catch(e){console.log(e)}})();(async()=>{console.log("ratings getter");try{const e=await n.Z.get("/ratings");j((t=>({...e.data[0].rating}))),y((t=>({...e.data[1].rating})))}catch(e){console.log(e)}})();(async()=>{console.log("timetable getter");try{const e=await n.Z.get("/timetable");console.log(e),w((t=>e.data))}catch(e){console.log(e)}})();(async()=>{const e=k.platformToken?"https://online.ap.education/Account/LoginByToken?token=".concat(k.platformToken,"&redirectUrl=").concat(encodeURIComponent("https://online.ap.education/cabinet/student/lessons")):"https://online.ap.education/cabinet/student/lessons";L((t=>e))})()}),[S,v,O,k.pupilId,k.marathonNumber,k.platformToken]);const E=d.Ry().shape({mail:d.Z_().required("Podaj adres e-mail, za pomoc\u0105 kt\xf3rego jeste\u015b zarejestrowany na naszej platformie!"),password:d.Z_().required("Podaj parol, kt\xf3rego u\u017cywasz do logowania si\u0119 na naszej platformie!")});return(0,x.jsx)(l.QU,{children:e?(0,x.jsxs)(x.Fragment,{children:[Object.values(p).length>0&&(0,x.jsx)(U,{lessons:s,user:k,points:p,montlyPoints:D,link:M,isMultipleCourses:I,setPlatformIframeLink:e=>{z.search="",L((t=>e))},language:S,setLanguage:C,languageIndex:v,setLanguageIndex:b,timetable:m}),(0,x.jsx)(u.x,{platformLink:M}),(0,x.jsx)(h.jB,{id:"no-transform",onClick:()=>{P((e=>!e)),localStorage.setItem("ischatboxshown",!O)},children:O?(0,x.jsx)(h.$E,{}):(0,x.jsx)(h.yu,{})})]}):(0,x.jsx)(o.J9,{initialValues:{mail:"",password:""},onSubmit:async(e,s)=>{let{resetForm:a}=s;e.mail=e.mail.toLowerCase().trim().trimStart(),e.password=e.password.trim().trimStart();try{const s=await n.Z.post("/users/login",e);console.log(s),l=s.data.token,n.Z.defaults.headers.common.Authorization="Bearer ".concat(l),t((e=>!0)),f((e=>({...s.data.user})));const o=s.data.user.lang.split("/");o.length>1&&(C(o[0]),N(!0)),localStorage.setItem("mail",e.mail),Y(!1),a()}catch(o){401===o.response.status&&Y(!0),console.error(o)}var l},validationSchema:E,children:(0,x.jsxs)(i.U0,{children:[(0,x.jsx)(a.hQ,{}),(0,x.jsx)(a.T$,{}),(0,x.jsxs)(l.YA,{children:["Dzie\u0144 dobry!",(0,x.jsx)("br",{}),"Ta strona nie jest dost\u0119pna dla nieautoryzowanych u\u017cytkownik\xf3w. Je\u015bli jednak masz dost\u0119p do naszej platformy, to ta strona r\xf3wnie\u017c j\u0105 ma. Wchodzi\u0107 dane, kt\xf3rych u\u017cywasz do logowania si\u0119 na platformie."]}),(0,x.jsxs)(a.__,{children:[(0,x.jsx)(i.vD,{type:"text",name:"mail",placeholder:"Login",onBlur:()=>Y(!1)}),(0,x.jsx)(i.aC,{component:"p",name:"mail",type:"email"})]}),(0,x.jsxs)(a.__,{children:[(0,x.jsx)(i.vD,{type:"password",name:"password",placeholder:"Password",onBlur:()=>Y(!1)}),(0,x.jsx)(i.aC,{component:"p",name:"password"})]}),(0,x.jsx)(i.Gh,{type:"submit",children:"Zaloguj si\u0119"}),(0,x.jsx)(l.Yx,{style:F?{opacity:"1"}:{opacity:"0"},children:"Podany login lub parol s\u0105 nieprawid\u0142owe!"})]})})})}}}]);
//# sourceMappingURL=My AP Pl Page.cf1925c6.chunk.js.map