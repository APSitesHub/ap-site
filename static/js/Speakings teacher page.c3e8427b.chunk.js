"use strict";(self.webpackChunkap_education=self.webpackChunkap_education||[]).push([[2341],{1431:(e,t,s)=>{s.r(t),s.d(t,{default:()=>m});var a=s(5294),o=s(2605),r=s(7723),n=s(8313),c=s(610),l=s(5705),i=s(2791),d=s(7689),h=s(8007),p=s(3201),g=s(7102),u=s(184);a.Z.defaults.baseURL="https://ap-server-8qi1.onrender.com";const m=()=>{const[e,t]=(0,i.useState)(!1),[s,m]=(0,i.useState)({}),[x,j]=(0,i.useState)(!1),w=h.Ry().shape({login:h.Z_().required("\u0412\u043a\u0430\u0436\u0456\u0442\u044c \u043b\u043e\u0433\u0456\u043d!"),password:h.Z_().required("\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c!")});return(0,i.useLayoutEffect)((()=>{(async()=>{try{const e=await a.Z.get("/");console.log(e.data)}catch(e){console.log(e)}})();(async()=>{console.log("token refresher");try{t(!0);const e=await a.Z.post("/teachers/refresh",{login:localStorage.getItem("teacherLogin")});m((t=>e.data.teacher)),j((e=>!0))}catch(e){console.log(e)}finally{t(!1)}})()}),[]),(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)(o.CS,{children:[x?(0,u.jsx)(d.j3,{context:[s]}):(0,u.jsx)(l.J9,{initialValues:{login:"",password:""},onSubmit:async(e,t)=>{let{resetForm:s}=t;e.login=e.login.toLowerCase().trim().trimStart(),e.password=e.password.trim().trimStart();try{const t=await a.Z.post("/teachers/login",e);o=t.data.token,a.Z.defaults.headers.common.Authorization="Bearer ".concat(o),j((e=>!0)),m((e=>t.data.teacher)),localStorage.setItem("teacherLogin",e.login),s()}catch(r){console.error(r)}var o},validationSchema:w,children:(0,u.jsxs)(g.U0,{children:[(0,u.jsx)(p.P6,{}),(0,u.jsxs)(p.DO,{children:[(0,u.jsx)(p.Qw,{children:"\u041f\u0440\u0438\u0432\u0456\u0442!"}),"\u0426\u0435 \u0441\u0442\u043e\u0440\u0456\u043d\u043a\u0430 \u0434\u043b\u044f \u0432\u0438\u043a\u043b\u0430\u0434\u0430\u0447\u0456\u0432. ",(0,u.jsx)("br",{}),"\u042f\u043a\u0449\u043e \u0432\u0438 \u0432\u0438\u043a\u043b\u0430\u0434\u0430\u0447, \u0432\u0432\u0435\u0434\u0456\u0442\u044c \u0432\u0430\u0448\u0456 \u043b\u043e\u0433\u0456\u043d \u0442\u0430 \u043f\u0430\u0440\u043e\u043b\u044c."]}),(0,u.jsxs)(r.__,{children:[(0,u.jsx)(p.vJ,{type:"text",name:"login",placeholder:"Login"}),(0,u.jsx)(p.NK,{component:"p",name:"login"})]}),(0,u.jsxs)(r.__,{children:[(0,u.jsx)(p.vJ,{type:"password",name:"password",placeholder:"Password"}),(0,u.jsx)(p.NK,{component:"p",name:"password"})]}),(0,u.jsx)(g.Gh,{type:"submit",children:"\u0423\u0432\u0456\u0439\u0442\u0438"})]})}),e&&(0,u.jsx)(c.sb,{children:(0,u.jsx)(n.a,{})})]})})}}}]);
//# sourceMappingURL=Speakings teacher page.c3e8427b.chunk.js.map