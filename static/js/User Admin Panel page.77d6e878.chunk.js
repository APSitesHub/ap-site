"use strict";(self.webpackChunkap_education=self.webpackChunkap_education||[]).push([[4886],{7360:(e,t,r)=>{r.r(t),r.d(t,{default:()=>x});var n=r(5294),a=r(91),s=r(7723),c=r(8313),l=r(5705),i=r(2791),o=r(8007),d=r(4693),m=r(184);n.Z.defaults.baseURL="https://ap-server-8qi1.onrender.com";const h=e=>{let{userToEdit:t,closeEditForm:r}=e;const[a,h]=(0,i.useState)(!1),p={crmId:t.crmId||"",contactId:t.contactId||"",name:t.name,mail:t.mail,zoomMail:t.zoomMail||"",password:t.password,pupilId:t.pupilId,marathonNumber:t.marathonNumber||"",adult:t.adult,age:t.age,lang:t.lang,course:t.course,package:t.package,knowledge:t.knowledge,manager:t.manager},x=o.Ry().shape({name:o.Z_().required("\u0406\u043c'\u044f - \u043e\u0431\u043e\u0432'\u044f\u0437\u043a\u043e\u0432\u0435 \u043f\u043e\u043b\u0435, \u044f\u043a\u0449\u043e \u0456\u043c\u0435\u043d\u0456 \u0437 \u044f\u043a\u043e\u0457\u0441\u044c \u043f\u0440\u0438\u0447\u0438\u043d\u0438 \u043c\u0438 \u043d\u0435 \u0437\u043d\u0430\u0454\u043c\u043e, \u0432\u0432\u0435\u0434\u0456\u0442\u044c N/A"),mail:o.Z_().required("\u041f\u043e\u0448\u0442\u0430 - \u043e\u0431\u043e\u0432'\u044f\u0437\u043a\u043e\u0432\u0435 \u043f\u043e\u043b\u0435!"),zoomMail:o.Z_(),password:o.Z_().required("\u041f\u0430\u0440\u043e\u043b\u044c - \u043e\u0431\u043e\u0432'\u044f\u0437\u043a\u043e\u0432\u0435 \u043f\u043e\u043b\u0435!"),crmId:o.Z_().matches(/^[0-9]*$/,"\u041b\u0438\u0448\u0435 \u0446\u0438\u0444\u0440\u0438"),contactId:o.Z_().matches(/^[0-9]*$/,"\u041b\u0438\u0448\u0435 \u0446\u0438\u0444\u0440\u0438"),pupilId:o.Z_().min(6,"\u041d\u0435 \u043c\u0435\u043d\u0448\u0435 6 \u0446\u0438\u0444\u0440").max(7,"\u041d\u0435 \u0431\u0456\u043b\u044c\u0448\u0435 7 \u0446\u0438\u0444\u0440").matches(/^\d{1,7}$/,"\u041b\u0438\u0448\u0435 \u0446\u0438\u0444\u0440\u0438").required("\u041e\u0431\u043e\u0432'\u044f\u0437\u043a\u043e\u0432\u0435 \u043f\u043e\u043b\u0435, \u0434\u0438\u0432\u0438\u0442\u0438\u0441\u044c \u043d\u0430 \u043f\u043b\u0430\u0442\u0444\u043e\u0440\u043c\u0456"),marathonNumber:o.Z_().max(1,"\u041d\u0435 \u0431\u0456\u043b\u044c\u0448\u0435 1 \u0446\u0438\u0444\u0440\u0438").matches(/[12]/,"\u041b\u0438\u0448\u0435 \u0446\u0438\u0444\u0440\u0438 1 \u0430\u0431\u043e 2"),age:o.Z_().required("\u0412\u0456\u043a - \u043e\u0431\u043e\u0432'\u044f\u0437\u043a\u043e\u0432\u0435 \u043f\u043e\u043b\u0435, \u044f\u043a\u0449\u043e \u0432\u0456\u043a\u0443 \u0437 \u044f\u043a\u043e\u0457\u0441\u044c \u043f\u0440\u0438\u0447\u0438\u043d\u0438 \u043c\u0438 \u043d\u0435 \u0437\u043d\u0430\u0454\u043c\u043e, \u0432\u0432\u0435\u0434\u0456\u0442\u044c N/A"),lang:o.Z_().optional().matches(/^[A-Za-z0-9/]+$/,"\u041b\u0438\u0448\u0435 \u043b\u0430\u0442\u0438\u043d\u0441\u044c\u043a\u0456 \u043b\u0456\u0442\u0435\u0440\u0438"),course:o.Z_().required("\u041e\u0431\u043e\u0432'\u044f\u0437\u043a\u043e\u0432\u0435 \u043f\u043e\u043b\u0435, \u0434\u043b\u044f \u0442\u0435\u0441\u0442\u043e\u0432\u0438\u0445 \u044e\u0437\u0435\u0440\u0456\u0432 \u0430\u0431\u043e \u043d\u0435\u0440\u043e\u0437\u043f\u043e\u0434\u0456\u043b\u0435\u043d\u0438\u0445 \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0456\u0432 \u0432\u0432\u0435\u0434\u0456\u0442\u044c 0"),package:o.Z_().optional(),knowledge:o.Z_().optional().matches(/^[A-Za-z0-9/]+$/,"\u041b\u0438\u0448\u0435 \u043b\u0430\u0442\u0438\u043d\u0441\u044c\u043a\u0456 \u043b\u0456\u0442\u0435\u0440\u0438"),manager:o.Z_().required("\u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440 - \u043e\u0431\u043e\u0432'\u044f\u0437\u043a\u043e\u0432\u0435 \u043f\u043e\u043b\u0435, \u0432\u0432\u0435\u0434\u0456\u0442\u044c \u043f\u0440\u0456\u0437\u0432\u0438\u0449\u0435")});return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(l.J9,{initialValues:p,onSubmit:async(e,a)=>{let{resetForm:s}=a;h((e=>!0)),e.name=e.name.trim().trimStart(),e.mail=e.mail.toLowerCase().trim().trimStart(),e.zoomMail=e.zoomMail.toLowerCase().trim().trimStart(),e.password=e.password.trim().trimStart(),e.pupilId=e.pupilId.trim().trimStart(),e.marathonNumber=e.marathonNumber.trim().trimStart(),e.crmId=e.crmId&&"number"!==typeof e.crmId?+e.crmId.trim().trimStart():"number"===typeof e.crmId?e.crmId:void 0,e.contactId=e.contactId&&"number"!==typeof e.contactId?+e.contactId.trim().trimStart():"number"===typeof e.contactId?e.contactId:void 0,e.age=e.age.trim().trimStart(),e.adult=+e.age>18,e.lang=e.lang.toLowerCase().trim().trimStart(),e.package=void 0===e.package?"":e.package.toLowerCase().trim().trimStart(),e.course=void 0===e.course?"":e.course.toLowerCase().trim().trimStart(),e.knowledge=void 0===e.knowledge?"":e.knowledge.toLowerCase().trim().trimStart(),e.manager=e.manager.toLowerCase().trim().trimStart();try{const a=await n.Z.put("/users/".concat(t._id),e);console.log(a),s(),alert("\u042e\u0437\u0435\u0440\u0430 \u0432\u0456\u0434\u0440\u0435\u0434\u0430\u0433\u043e\u0432\u0430\u043d\u043e"),r()}catch(c){console.error(c),alert("\u0414\u0435\u0441\u044c \u044f\u043a\u0430\u0441\u044c \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430 - \u043a\u043b\u0430\u0446\u0430\u0439 F12, \u0440\u043e\u0431\u0438 \u0441\u043a\u0440\u0456\u043d \u043a\u043e\u043d\u0441\u043e\u043b\u0456, \u0432\u0456\u0434\u043f\u0440\u0430\u0432\u043b\u044f\u0439 \u041a\u0438\u0440\u0438\u043b\u0443")}finally{h((e=>!1))}},validationSchema:x,children:(0,m.jsxs)(d.jr,{children:[(0,m.jsxs)(s.__,{children:[(0,m.jsx)(d.vD,{type:"text",name:"name",placeholder:"\u041f\u0440\u0456\u0437\u0432\u0438\u0449\u0435 \u0442\u0430 \u0456\u043c'\u044f"}),(0,m.jsx)(d.aC,{component:"p",name:"name"})]}),(0,m.jsxs)(s.__,{children:[(0,m.jsx)(d.vD,{type:"email",name:"mail",placeholder:"\u0415\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0430 \u043f\u043e\u0448\u0442\u0430 (\u043b\u043e\u0433\u0456\u043d)"}),(0,m.jsx)(d.aC,{component:"p",name:"mail"})]}),(0,m.jsxs)(s.__,{children:[(0,m.jsx)(d.vD,{type:"email",name:"zoomMail",placeholder:"Zoom-\u043f\u043e\u0448\u0442\u0430"}),(0,m.jsx)(d.aC,{component:"p",name:"zoomMail"})]}),(0,m.jsxs)(s.__,{children:[(0,m.jsx)(d.vD,{type:"text",name:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c"}),(0,m.jsx)(d.aC,{component:"p",name:"password"})]}),(0,m.jsxs)(s.__,{children:[(0,m.jsx)(d.vD,{type:"text",name:"crmId",placeholder:"ID \u043b\u0456\u0434\u0430 \u0432 CRM"}),(0,m.jsx)(d.aC,{component:"p",name:"crmId"})]}),(0,m.jsxs)(s.__,{children:[(0,m.jsx)(d.vD,{type:"text",name:"contactId",placeholder:"ID \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0443 \u0432 CRM"}),(0,m.jsx)(d.aC,{component:"p",name:"contactId"})]}),(0,m.jsxs)(s.__,{children:[(0,m.jsx)(d.vD,{type:"text",name:"pupilId",placeholder:"ID \u0443\u0447\u043d\u044f \u043d\u0430 \u043f\u043b\u0430\u0442\u0444\u043e\u0440\u043c\u0456"}),(0,m.jsx)(d.aC,{component:"p",name:"pupilId"})]}),(0,m.jsxs)(s.__,{children:[(0,m.jsx)(d.vD,{type:"text",name:"marathonNumber",placeholder:"\u2116 \u043c\u0430\u0440\u0430\u0444\u043e\u043d\u0443 \u043d\u0430 \u043f\u043b\u0430\u0442\u0444\u043e\u0440\u043c\u0456"}),(0,m.jsx)(d.aC,{component:"p",name:"marathonNumber"})]}),(0,m.jsxs)(s.__,{children:[(0,m.jsx)(d.vD,{type:"text",name:"age",placeholder:"\u0412\u0456\u043a"}),(0,m.jsx)(d.aC,{component:"p",name:"age"})]}),(0,m.jsxs)(s.__,{children:[(0,m.jsx)(d.vD,{type:"text",name:"lang",placeholder:"\u041c\u043e\u0432\u0430"}),(0,m.jsx)(d.aC,{component:"p",name:"lang"})]}),(0,m.jsxs)(s.__,{children:[(0,m.jsx)(d.vD,{type:"text",name:"course",placeholder:"\u041f\u043e\u0442\u0456\u043a"}),(0,m.jsx)(d.aC,{component:"p",name:"course"})]}),(0,m.jsxs)(s.__,{children:[(0,m.jsx)(d.vD,{type:"text",name:"package",placeholder:"\u041f\u0430\u043a\u0435\u0442 \u043f\u043e\u0441\u043b\u0443\u0433"}),(0,m.jsx)(d.aC,{component:"p",name:"package"})]}),(0,m.jsxs)(s.__,{children:[(0,m.jsx)(d.vD,{type:"text",name:"knowledge",placeholder:"\u0420\u0456\u0432\u0435\u043d\u044c \u0437\u043d\u0430\u043d\u044c"}),(0,m.jsx)(d.aC,{component:"p",name:"knowledge"})]}),(0,m.jsxs)(s.__,{children:[(0,m.jsx)(d.vD,{type:"text",name:"manager",placeholder:"\u041f\u0440\u0456\u0437\u0432\u0438\u0449\u0435 \u0432\u0456\u0434\u043f\u043e\u0432\u0456\u0434\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u0430"}),(0,m.jsx)(d.aC,{component:"p",name:"manager"})]}),(0,m.jsx)(d.Gh,{type:"submit",children:"\u041f\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0438 \u0437\u043c\u0456\u043d\u0438"})]})}),a&&(0,m.jsx)(c.a,{})]})};n.Z.defaults.baseURL="https://ap-server-8qi1.onrender.com";const p=[1,3,7,14,30],x=()=>{const[e,t]=(0,i.useState)(!1),[r,x]=(0,i.useState)(!1),[u,j]=(0,i.useState)([]),[g,_]=(0,i.useState)([]),[v,w]=(0,i.useState)([]),[k,I]=(0,i.useState)([]),[S,C]=(0,i.useState)([]),[y,f]=(0,i.useState)(!1),[b,D]=(0,i.useState)({}),[Z,L]=(0,i.useState)(7),[N,A]=(0,i.useState)(!1),[z,M]=(0,i.useState)(!1),[q,H]=(0,i.useState)(!1),[R,E]=(0,i.useState)(!1),[F,$]=(0,i.useState)(!1),T=(0,i.useRef)([]),W=(0,i.useRef)([]),U=(0,i.useRef)([]);(0,i.useEffect)((()=>{document.title="User Admin Panel | AP Education";(async()=>{console.log("token refresher");try{if(localStorage.getItem("isAdmin")){const e=await n.Z.post("admins/refresh/users/",{});console.log(e),x((e=>!0))}}catch(e){console.log(e)}})();(async()=>{try{if(r){const e=await n.Z.get("/users/admin/",{params:{isAdmin:r}});j((t=>[...e.data.reverse()])),T.current=[...e.data],_((t=>[...e.data.map((e=>e.manager)).filter(((e,t,r)=>r.indexOf(e)===t)).sort()])),w((t=>[...e.data.map((e=>e.knowledge)).filter(((e,t,r)=>r.indexOf(e)===t)).sort()])),I((t=>[...e.data.map((e=>e.course)).filter(((e,t,r)=>r.indexOf(e)===t)).sort()])),C((t=>[...e.data.map((e=>e.lang)).filter(((e,t,r)=>r.indexOf(e)===t)).sort()]))}}catch(e){console.error(e)}})();const e=e=>{"Escape"===e.code&&y&&Y()};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}}),[r,y]);const B=o.Ry().shape({login:o.Z_().required("\u0412\u043a\u0430\u0436\u0456\u0442\u044c \u043b\u043e\u0433\u0456\u043d!"),password:o.Z_().required("\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c!")}),O=e=>{if(e){const t=e.split(".");return t.length>2?Date.parse([t[1],t[0],t[2]].join("/")):Date.parse(e)}},P=e=>{""===e&&0===W.current.length?(j((e=>[...T.current])),W.current=[]):W.current.length>0&&0===U.current.length?(j((t=>[...W.current.filter((t=>t.manager===e))])),U.current=[...W.current.filter((t=>t.manager===e))]):(console.log("managers else"),console.log(U),j((t=>[...T.current.filter((t=>t.manager===e))])),W.current=[...T.current.filter((t=>t.manager===e))],U.current=[...T.current.filter((t=>t.manager===e))],console.log(U))},G=e=>{""===e&&0===W.current.length?(j((e=>[...T.current])),W.current=[]):W.current.length>0&&0===U.current.length?(j((t=>[...W.current.filter((t=>t.course===e))])),U.current=[...W.current.filter((t=>t.course===e))]):(j((t=>[...T.current.filter((t=>t.course===e))])),W.current=[...T.current.filter((t=>t.course===e))],U.current=[...T.current.filter((t=>t.course===e))])},J=e=>{""===e&&0===W.current.length?(j((e=>[...T.current])),W.current=[]):W.current.length>0&&0===U.current.length?(j((t=>[...W.current.filter((t=>t.lang===e))])),U.current=[...W.current.filter((t=>t.lang===e))]):(j((t=>[...T.current.filter((t=>t.lang===e))])),W.current=[...T.current.filter((t=>t.lang===e))],U.current=[...T.current.filter((t=>t.lang===e))])},V=e=>{""===e&&0===W.current.length?(console.log("current === '' && sortedUsers.current.length === 0"),j((e=>[...T.current])),W.current=[]):U.current.length>0?j((t=>[...U.current.filter((t=>t.visited.length>0?(Date.now()-O(t.visited[t.visited.length-1]))/864e5>e:0)).sort(((e,t)=>(O(e.visited[e.visited.length-1])||0)-(O(t.visited[t.visited.length-1])||0)))])):(console.log("else"),j((t=>[...T.current.filter((t=>t.visited.length>0?(Date.now()-O(t.visited[t.visited.length-1]))/864e5>e:0)).sort(((e,t)=>(O(t.visited[t.visited.length-1])||0)-(O(e.visited[e.visited.length-1])||0)))])))},K=e=>{""===e&&0===W.current.length?(j((e=>[...T.current])),W.current=[]):W.current.length>0&&0===U.current.length?(j((t=>[...W.current.filter((t=>t.knowledge===e))])),U.current=[...W.current.filter((t=>t.knowledge===e))]):(j((t=>[...T.current.filter((t=>t.knowledge===e))])),W.current=[...T.current.filter((t=>t.knowledge===e))],U.current=[...T.current.filter((t=>t.knowledge===e))])},Q=o.Ry().shape({name:o.Z_().required("\u0406\u043c'\u044f - \u043e\u0431\u043e\u0432'\u044f\u0437\u043a\u043e\u0432\u0435 \u043f\u043e\u043b\u0435, \u044f\u043a\u0449\u043e \u0456\u043c\u0435\u043d\u0456 \u0437 \u044f\u043a\u043e\u0457\u0441\u044c \u043f\u0440\u0438\u0447\u0438\u043d\u0438 \u043c\u0438 \u043d\u0435 \u0437\u043d\u0430\u0454\u043c\u043e, \u0432\u0432\u0435\u0434\u0456\u0442\u044c N/A"),mail:o.Z_().required("\u041f\u043e\u0448\u0442\u0430 - \u043e\u0431\u043e\u0432'\u044f\u0437\u043a\u043e\u0432\u0435 \u043f\u043e\u043b\u0435!"),zoomMail:o.Z_(),password:o.Z_().required("\u041f\u0430\u0440\u043e\u043b\u044c - \u043e\u0431\u043e\u0432'\u044f\u0437\u043a\u043e\u0432\u0435 \u043f\u043e\u043b\u0435!"),crmId:o.Z_().matches(/^[0-9]*$/,"\u041b\u0438\u0448\u0435 \u0446\u0438\u0444\u0440\u0438"),contactId:o.Z_().matches(/^[0-9]*$/,"\u041b\u0438\u0448\u0435 \u0446\u0438\u0444\u0440\u0438"),pupilId:o.Z_().min(6,"\u041d\u0435 \u043c\u0435\u043d\u0448\u0435 6 \u0446\u0438\u0444\u0440").max(7,"\u041d\u0435 \u0431\u0456\u043b\u044c\u0448\u0435 7 \u0446\u0438\u0444\u0440").matches(/^\d{1,7}$/,"\u041b\u0438\u0448\u0435 \u0446\u0438\u0444\u0440\u0438").required("\u041e\u0431\u043e\u0432'\u044f\u0437\u043a\u043e\u0432\u0435 \u043f\u043e\u043b\u0435, \u0434\u0438\u0432\u0438\u0442\u0438\u0441\u044c \u043d\u0430 \u043f\u043b\u0430\u0442\u0444\u043e\u0440\u043c\u0456"),marathonNumber:o.Z_().max(1,"\u041d\u0435 \u0431\u0456\u043b\u044c\u0448\u0435 1 \u0446\u0438\u0444\u0440\u0438").matches(/[12]/,"\u041b\u0438\u0448\u0435 \u0446\u0438\u0444\u0440\u0438 1 \u0430\u0431\u043e 2"),age:o.Z_().required("\u0412\u0456\u043a - \u043e\u0431\u043e\u0432'\u044f\u0437\u043a\u043e\u0432\u0435 \u043f\u043e\u043b\u0435, \u044f\u043a\u0449\u043e \u0432\u0456\u043a\u0443 \u0437 \u044f\u043a\u043e\u0457\u0441\u044c \u043f\u0440\u0438\u0447\u0438\u043d\u0438 \u043c\u0438 \u043d\u0435 \u0437\u043d\u0430\u0454\u043c\u043e, \u0432\u0432\u0435\u0434\u0456\u0442\u044c N/A"),lang:o.Z_().optional().matches(/^[A-Za-z0-9/]+$/,"\u041b\u0438\u0448\u0435 \u043b\u0430\u0442\u0438\u043d\u0441\u044c\u043a\u0456 \u043b\u0456\u0442\u0435\u0440\u0438"),course:o.Z_().required("\u041e\u0431\u043e\u0432'\u044f\u0437\u043a\u043e\u0432\u0435 \u043f\u043e\u043b\u0435, \u0434\u043b\u044f \u0442\u0435\u0441\u0442\u043e\u0432\u0438\u0445 \u044e\u0437\u0435\u0440\u0456\u0432 \u0430\u0431\u043e \u043d\u0435\u0440\u043e\u0437\u043f\u043e\u0434\u0456\u043b\u0435\u043d\u0438\u0445 \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0456\u0432 \u0432\u0432\u0435\u0434\u0456\u0442\u044c 0"),package:o.Z_().optional(),knowledge:o.Z_().optional().matches(/^[A-Za-z0-9/]+$/,"\u041b\u0438\u0448\u0435 \u043b\u0430\u0442\u0438\u043d\u0441\u044c\u043a\u0456 \u043b\u0456\u0442\u0435\u0440\u0438"),manager:o.Z_().required("\u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440 - \u043e\u0431\u043e\u0432'\u044f\u0437\u043a\u043e\u0432\u0435 \u043f\u043e\u043b\u0435, \u0432\u0432\u0435\u0434\u0456\u0442\u044c \u043f\u0440\u0456\u0437\u0432\u0438\u0449\u0435")}),Y=e=>{f(!1)},X=()=>{H((e=>!e))},ee=()=>{E((e=>!e))},te=()=>{$((e=>!e))},re=()=>{M((e=>!e))},ne=()=>{A((e=>!e))};return(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)(d.Kq,{children:[!r&&(0,m.jsx)(l.J9,{initialValues:{login:"",password:""},onSubmit:async(e,r)=>{let{resetForm:a}=r;t((e=>!0));try{const r=await n.Z.post("/admins/login/users",e);s=r.data.token,n.Z.defaults.headers.common.Authorization="Bearer ".concat(s),x((e=>!0)),localStorage.setItem("isAdmin",!0),a()}catch(c){console.error(c)}finally{t((e=>!1))}var s},validationSchema:B,children:(0,m.jsxs)(d.U0,{children:[(0,m.jsxs)(s.__,{children:[(0,m.jsx)(d.vD,{type:"text",name:"login",placeholder:"Login"}),(0,m.jsx)(d.aC,{component:"p",name:"login"})]}),(0,m.jsxs)(s.__,{children:[(0,m.jsx)(d.vD,{type:"password",name:"password",placeholder:"Password"}),(0,m.jsx)(d.aC,{component:"p",name:"password"})]}),(0,m.jsx)(d.Gh,{type:"submit",children:"\u0417\u0430\u043b\u043e\u0433\u0456\u043d\u0438\u0442\u0438\u0441\u044c"})]})}),r&&(0,m.jsx)(l.J9,{initialValues:{name:"",mail:"",zoomMail:"",password:"",crmId:"",contactId:"",pupilId:"",marathonNumber:"",age:"",adult:!0,lang:"",course:"",package:"",knowledge:"",manager:""},onSubmit:async(e,r)=>{let{resetForm:a}=r;t((e=>!0)),e.name=e.name.trim().trimStart(),e.mail=e.mail.toLowerCase().trim().trimStart(),e.zoomMail=e.zoomMail.toLowerCase().trim().trimStart(),e.password=e.password.trim().trimStart(),e.crmId=e.crmId?+e.crmId.trim().trimStart():void 0,e.contactId=e.contactId?+e.contactId.trim().trimStart():void 0,e.pupilId=e.pupilId.trim().trimStart(),e.marathonNumber=e.marathonNumber.trim().trimStart(),e.age=e.age.trim().trimStart(),e.adult=+e.age>=18,e.lang=e.lang.toLowerCase().trim().trimStart(),e.package=e.package.toLowerCase().trim().trimStart(),e.knowledge=e.knowledge.toLowerCase().trim().trimStart(),e.manager=e.manager.toLowerCase().trim().trimStart();try{const r=await n.Z.post("/users/new",e);console.log(r),a(),alert("\u042e\u0437\u0435\u0440\u0430 \u0434\u043e\u0434\u0430\u043d\u043e")}catch(s){console.error(s),alert("\u0414\u0435\u0441\u044c \u044f\u043a\u0430\u0441\u044c \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430 - \u043a\u043b\u0430\u0446\u0430\u0439 F12, \u0440\u043e\u0431\u0438 \u0441\u043a\u0440\u0456\u043d \u043a\u043e\u043d\u0441\u043e\u043b\u0456, \u0432\u0456\u0434\u043f\u0440\u0430\u0432\u043b\u044f\u0439 \u041a\u0438\u0440\u0438\u043b\u0443")}finally{t((e=>!1))}},validationSchema:Q,children:(0,m.jsxs)(d.P_,{children:[(0,m.jsxs)(s.__,{children:[(0,m.jsx)(d.vD,{type:"text",name:"name",placeholder:"\u041f\u0440\u0456\u0437\u0432\u0438\u0449\u0435 \u0442\u0430 \u0456\u043c'\u044f"}),(0,m.jsx)(d.aC,{component:"p",name:"name"})]}),(0,m.jsxs)(s.__,{children:[(0,m.jsx)(d.vD,{type:"email",name:"mail",placeholder:"\u0415\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0430 \u043f\u043e\u0448\u0442\u0430 (\u043b\u043e\u0433\u0456\u043d)"}),(0,m.jsx)(d.aC,{component:"p",name:"mail"})]}),(0,m.jsxs)(s.__,{children:[(0,m.jsx)(d.vD,{type:"email",name:"zoomMail",placeholder:"\u0415\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0430 \u043f\u043e\u0448\u0442\u0430 (Zoom)"}),(0,m.jsx)(d.aC,{component:"p",name:"zoomMail"})]}),(0,m.jsxs)(s.__,{children:[(0,m.jsx)(d.vD,{type:"text",name:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c"}),(0,m.jsx)(d.aC,{component:"p",name:"password"})]}),(0,m.jsxs)(s.__,{children:[(0,m.jsx)(d.vD,{type:"text",name:"crmId",placeholder:"ID \u043b\u0456\u0434\u0430 \u0432 CRM"}),(0,m.jsx)(d.aC,{component:"p",name:"crmId"})]}),(0,m.jsxs)(s.__,{children:[(0,m.jsx)(d.vD,{type:"text",name:"contactId",placeholder:"ID \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0443 \u0432 CRM"}),(0,m.jsx)(d.aC,{component:"p",name:"contactId"})]}),(0,m.jsxs)(s.__,{children:[(0,m.jsx)(d.vD,{type:"text",name:"pupilId",placeholder:"ID \u0443\u0447\u043d\u044f \u043d\u0430 \u043f\u043b\u0430\u0442\u0444\u043e\u0440\u043c\u0456"}),(0,m.jsx)(d.aC,{component:"p",name:"pupilId"})]}),(0,m.jsxs)(s.__,{children:[(0,m.jsx)(d.vD,{type:"text",name:"marathonNumber",placeholder:"\u2116 \u043c\u0430\u0440\u0430\u0444\u043e\u043d\u0443 \u043d\u0430 \u043f\u043b\u0430\u0442\u0444\u043e\u0440\u043c\u0456"}),(0,m.jsx)(d.aC,{component:"p",name:"marathonNumber"})]}),(0,m.jsxs)(s.__,{children:[(0,m.jsx)(d.vD,{type:"text",name:"age",placeholder:"\u0412\u0456\u043a"}),(0,m.jsx)(d.aC,{component:"p",name:"age"})]}),(0,m.jsxs)(s.__,{children:[(0,m.jsx)(d.vD,{type:"text",name:"lang",placeholder:"\u041c\u043e\u0432\u0430"}),(0,m.jsx)(d.aC,{component:"p",name:"lang"})]}),(0,m.jsxs)(s.__,{children:[(0,m.jsx)(d.vD,{type:"text",name:"course",placeholder:"\u041f\u043e\u0442\u0456\u043a"}),(0,m.jsx)(d.aC,{component:"p",name:"course"})]}),(0,m.jsxs)(s.__,{children:[(0,m.jsx)(d.vD,{type:"text",name:"package",placeholder:"\u041f\u0430\u043a\u0435\u0442 \u043f\u043e\u0441\u043b\u0443\u0433"}),(0,m.jsx)(d.aC,{component:"p",name:"package"})]}),(0,m.jsxs)(s.__,{children:[(0,m.jsx)(d.vD,{type:"text",name:"knowledge",placeholder:"\u0420\u0456\u0432\u0435\u043d\u044c \u0437\u043d\u0430\u043d\u044c"}),(0,m.jsx)(d.aC,{component:"p",name:"knowledge"})]}),(0,m.jsxs)(s.__,{children:[(0,m.jsx)(d.vD,{type:"text",name:"manager",placeholder:"\u041f\u0440\u0456\u0437\u0432\u0438\u0449\u0435 \u0432\u0456\u0434\u043f\u043e\u0432\u0456\u0434\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u0430"}),(0,m.jsx)(d.aC,{component:"p",name:"manager"})]}),(0,m.jsx)(d.Gh,{type:"submit",children:"\u0414\u043e\u0434\u0430\u0442\u0438 \u044e\u0437\u0435\u0440\u0430"})]})}),r&&u&&(0,m.jsxs)(d.OD,{children:[(0,m.jsx)(d.az,{children:"\u0421\u043f\u0438\u0441\u043e\u043a \u044e\u0437\u0435\u0440\u0456\u0432 \u0437 \u0434\u043e\u0441\u0442\u0443\u043f\u043e\u043c \u0434\u043e \u0443\u0440\u043e\u043a\u0456\u0432"}),(0,m.jsx)("thead",{children:(0,m.jsxs)(d.me,{children:[(0,m.jsx)(d.Sb,{children:"CRM\xa0\u041b\u0456\u0434 \u041a\u043e\u043d\u0442\u0430\u043a\u0442"}),(0,m.jsx)(d.Sb,{children:"\u0406\u043c'\u044f"}),(0,m.jsx)(d.Sb,{children:"\u041f\u043e\u0448\u0442\u0430 (\u043b\u043e\u0433\u0456\u043d)"}),(0,m.jsx)(d.Sb,{children:"Zoom-\u043f\u043e\u0448\u0442\u0430"}),(0,m.jsx)(d.Sb,{children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),(0,m.jsx)(d.Sb,{children:"ID \u043d\u0430 \u043f\u043b\u0430\u0442\u0444\u043e\u0440\u043c\u0456"}),(0,m.jsx)(d.Sb,{children:"\u041d\u043e\u043c\u0435\u0440 \u043c\u0430\u0440\u0430\u0444\u043e\u043d\u0443"}),(0,m.jsx)(d.Sb,{children:"\u042e\u0437\u0435\u0440\u0430 \u0441\u0442\u0432\u043e\u0440\u0435\u043d\u043e"}),(0,m.jsx)(d.Sb,{children:(0,m.jsxs)(d.xu,{children:["\u0412\u0456\u0434\u0432\u0456\u0434\u0438\u043d\u0438",(0,m.jsx)(d.Lb,{onClick:X}),q&&(0,m.jsxs)(d.t2,{children:[p.map(((e,t)=>(0,m.jsx)(d.IW,{onClick:()=>{V(e),L(e),X()},children:void 0===e?"\u2014":e},t))),(0,m.jsx)(d.IW,{onClick:()=>{V(""),L(7),X()},children:"\u0412\u0421\u0406"})]}),Z]})}),(0,m.jsx)(d.Sb,{children:(0,m.jsx)(d.xu,{children:"\u0412\u0456\u0434\u0432\u0456\u0434\u0438\u043d\u0438 \u0437 \u0447\u0430\u0441\u043e\u043c"})}),(0,m.jsx)(d.Sb,{children:(0,m.jsxs)(d.xu,{children:["\u041c\u043e\u0432\u0430",(0,m.jsx)(d.Lb,{onClick:re}),z&&(0,m.jsxs)(d.t2,{children:[S.map(((e,t)=>(0,m.jsx)(d.IW,{onClick:()=>{J(e),re()},children:void 0===e?"\u2014":e},t))),(0,m.jsx)(d.IW,{onClick:()=>{J(""),re()},children:"\u0412\u0421\u0406"})]})]})}),(0,m.jsx)(d.Sb,{children:(0,m.jsxs)(d.xu,{children:["\u041f\u043e\u0442\u0456\u043a",(0,m.jsx)(d.Lb,{onClick:te}),F&&(0,m.jsxs)(d.t2,{children:[k.map(((e,t)=>(0,m.jsx)(d.IW,{onClick:()=>{G(e),te()},children:void 0===e?"\u2014":e},t))),(0,m.jsx)(d.IW,{onClick:()=>{G(""),te()},children:"\u0412\u0421\u0406"})]})]})}),(0,m.jsx)(d.Sb,{children:(0,m.jsxs)(d.xu,{children:["\u0417\u043d\u0430\u043d\u043d\u044f",(0,m.jsx)(d.Lb,{onClick:ee}),R&&(0,m.jsxs)(d.t2,{children:[v.map(((e,t)=>(0,m.jsx)(d.IW,{onClick:()=>{K(e),ee()},children:void 0===e?"\u2014":e},t))),(0,m.jsx)(d.IW,{onClick:()=>{K(""),ee()},children:"\u0412\u0421\u0406"})]})]})}),(0,m.jsx)(d.Sb,{children:"\u041f\u0430\u043a\u0435\u0442 \u043f\u043e\u0441\u043b\u0443\u0433"}),(0,m.jsx)(d.Sb,{className:"filterable",children:(0,m.jsxs)(d.xu,{children:["\u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440",(0,m.jsx)(d.Lb,{onClick:ne}),N&&(0,m.jsxs)(d.t2,{children:[g.map(((e,t)=>(0,m.jsx)(d.IW,{onClick:()=>{P(e),ne()},children:void 0===e?"\u2014":e},t))),(0,m.jsx)(d.IW,{onClick:()=>{P(""),ne()},children:"\u0412\u0421\u0406"})]})]})}),(0,m.jsx)(d.Sb,{children:"Edit"}),(0,m.jsx)(d.Sb,{children:"Delete"}),(0,m.jsx)(d.Sb,{children:"Ban"})]})}),(0,m.jsx)("tbody",{children:u.map((e=>{var r;return(0,m.jsxs)(d.me,{children:[(0,m.jsxs)(d.He,{children:[(0,m.jsx)("a",{href:"https://apeducation.kommo.com/leads/detail/".concat(e.crmId),target:"_blank",rel:"noreferrer",children:e.crmId})," ",(0,m.jsx)("a",{href:"https://apeducation.kommo.com/contacts/detail/".concat(e.contactId),target:"_blank",rel:"noreferrer",children:e.contactId})]}),(0,m.jsx)(d.He,{children:e.name}),(0,m.jsx)(d.He,{children:e.mail}),(0,m.jsx)(d.He,{children:e.zoomMail}),(0,m.jsx)(d.He,{children:e.password}),(0,m.jsx)(d.He,{children:e.pupilId}),(0,m.jsx)(d.He,{children:e.marathonNumber}),(0,m.jsx)(d.He,{children:new Date(e.createdAt).toLocaleDateString("uk-UA")}),(0,m.jsx)(d.He,{className:Math.floor((Date.now()-O(e.visited[e.visited.length-1]))/864e5)>Z?"attention":"",children:e.visited[e.visited.length-1]}),(0,m.jsx)(d.He,{children:e.visitedTime[e.visitedTime.length-1]?e.visitedTime[e.visitedTime.length-1].match("^202")?new Date(e.visitedTime[e.visitedTime.length-1]).toLocaleString("uk-UA"):new Date(O(e.visitedTime[e.visitedTime.length-1])).toLocaleString("uk-UA",{timeZone:"+06:00"}):""}),(0,m.jsx)(d.He,{children:e.lang}),(0,m.jsx)(d.He,{children:e.course}),(0,m.jsx)(d.He,{className:(null===(r=e.knowledge)||void 0===r?void 0:r.includes("\u0430"))&&"error",children:e.knowledge}),(0,m.jsx)(d.He,{children:e.package}),(0,m.jsx)(d.He,{className:"last-name",children:e.manager}),(0,m.jsx)(d.He,{children:"Dev Acc"===e.name?null:(0,m.jsx)(d.Hx,{onClick:()=>(async e=>{f(!0),D((t=>u.find((t=>t._id===e))))})(e._id),children:"Edit"})}),(0,m.jsx)(d.He,{children:"Dev Acc"===e.name?null:(0,m.jsx)(d.hj,{onClick:()=>(async e=>{t((e=>!0));try{const r=await n.Z.delete("/users/".concat(e));console.log(r),alert("\u042e\u0437\u0435\u0440\u0430 \u0432\u0438\u0434\u0430\u043b\u0435\u043d\u043e")}catch(r){console.error(r),alert("\u0414\u0435\u0441\u044c \u044f\u043a\u0430\u0441\u044c \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430 - \u043a\u043b\u0430\u0446\u0430\u0439 F12, \u0440\u043e\u0431\u0438 \u0441\u043a\u0440\u0456\u043d \u043a\u043e\u043d\u0441\u043e\u043b\u0456, \u0432\u0456\u0434\u043f\u0440\u0430\u0432\u043b\u044f\u0439 \u041a\u0438\u0440\u0438\u043b\u0443")}finally{t((e=>!1))}})(e._id),children:"Del"})}),(0,m.jsx)(d.He,{children:"Dev Acc"===e.name?null:(0,m.jsx)(d.Q$,{className:e.isBanned?"banned":"not_banned",onClick:()=>(async(e,r)=>{t((e=>!0));try{const a=await n.Z.patch("/users/".concat(e),r?{isBanned:!1}:{isBanned:!0});console.log(a),r?alert("\u042e\u0437\u0435\u0440\u0430 \u0440\u043e\u0437\u0431\u043b\u043e\u043a\u043e\u0432\u0430\u043d\u043e"):alert("\u042e\u0437\u0435\u0440\u0430 \u0437\u0430\u0431\u043b\u043e\u043a\u043e\u0432\u0430\u043d\u043e")}catch(a){console.error(a),alert("\u0414\u0435\u0441\u044c \u044f\u043a\u0430\u0441\u044c \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430 - \u043a\u043b\u0430\u0446\u0430\u0439 F12, \u0440\u043e\u0431\u0438 \u0441\u043a\u0440\u0456\u043d \u043a\u043e\u043d\u0441\u043e\u043b\u0456, \u0432\u0456\u0434\u043f\u0440\u0430\u0432\u043b\u044f\u0439 \u041a\u0438\u0440\u0438\u043b\u0443")}finally{t((e=>!1))}})(e._id,e.isBanned),children:e.isBanned?"Unban":"Ban"})})]},e._id)}))})]}),y&&(0,m.jsx)(a.Y,{onClick:e=>{"close-on-click"===e.target.id&&f(!1)},id:"close-on-click",children:(0,m.jsx)(h,{userToEdit:b,closeEditForm:Y})}),e&&(0,m.jsx)(c.a,{})]})})}}}]);
//# sourceMappingURL=User Admin Panel page.77d6e878.chunk.js.map