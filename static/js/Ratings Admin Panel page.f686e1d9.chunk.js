"use strict";(self.webpackChunkap_education=self.webpackChunkap_education||[]).push([[3303],{73333:(e,a,t)=>{t.r(a),t.d(a,{default:()=>h});var n=t(55294),s=t(97723),o=t(8313),r=t(55705),i=t(72791),l=t(8007),c=t(61814),d=t(80184);n.Z.defaults.baseURL="https://ap-server-8qi1.onrender.com";const p=e=>{n.Z.defaults.headers.common.Authorization="Bearer ".concat(e)},h=()=>{const[e,a]=(0,i.useState)(!1),[t,h]=(0,i.useState)(!1);(0,i.useEffect)((()=>{document.title="Ratings Admin Panel | AP Education";(async()=>{console.log("token refresher");try{if(localStorage.getItem("isAdmin")){const e=await n.Z.post("admins/refresh/users",{});console.log(e),h((e=>!0)),p(e.data.newToken)}}catch(e){console.log(e)}})()}),[t]);const m=l.Ry().shape({login:l.Z_().required("\u0412\u043a\u0430\u0436\u0456\u0442\u044c \u043b\u043e\u0433\u0456\u043d!"),password:l.Z_().required("\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c!")}),g=l.Ry().shape({rating:l.Z_().required("\u0412\u043d\u0435\u0441\u0438 \u0431\u0430\u043b\u0438!")});return(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)(c.Kq,{children:[!t&&(0,d.jsx)(r.J9,{initialValues:{login:"",password:""},onSubmit:async(e,t)=>{let{resetForm:s}=t;a((e=>!0));try{const t=await n.Z.post("/admins/login/users",e);p(t.data.token),h((e=>!0)),localStorage.setItem("isAdmin",!0),s()}catch(o){console.error(o)}finally{a((e=>!1))}},validationSchema:m,children:(0,d.jsxs)(c.U0,{children:[(0,d.jsxs)(s.__,{children:[(0,d.jsx)(c.vD,{type:"text",name:"login",placeholder:"Login"}),(0,d.jsx)(c.aC,{component:"p",name:"login"})]}),(0,d.jsxs)(s.__,{children:[(0,d.jsx)(c.vD,{type:"password",name:"password",placeholder:"Password"}),(0,d.jsx)(c.aC,{component:"p",name:"password"})]}),(0,d.jsx)(c.Gh,{type:"submit",children:"\u0417\u0430\u043b\u043e\u0433\u0456\u043d\u0438\u0442\u0438\u0441\u044c"})]})}),t&&(0,d.jsx)(r.J9,{initialValues:{period:"all",rating:""},onSubmit:async(e,t)=>{let{resetForm:s}=t;a((e=>!0)),e.rating=JSON.parse(e.rating);try{console.log(e);const t=await n.Z.patch("/ratings",e);console.log(t),s(),alert("\u0420\u0435\u0439\u0442\u0438\u043d\u0433\u0438 \u0437\u0430\u043c\u0456\u043d\u0438\u043b\u0438\u0441\u044f, \u043c\u043e\u043b\u043e\u0434\u0435\u0446\u044c")}catch(o){console.error(o),alert("\u0429\u043e\u0441\u044c \u043d\u0435 \u043f\u0440\u043e\u043a\u043d\u0443\u043b\u043e!")}finally{a((e=>!1))}},validationSchema:g,children:(0,d.jsxs)(c.Od,{children:[(0,d.jsxs)(s.__,{children:[(0,d.jsx)(c.gB,{type:"text",name:"rating",component:"textarea",placeholder:"\u0411\u0430\u043b\u0438 \u0432\u0441\u0456\u0445-\u0432\u0441\u0456\u0445-\u0432\u0441\u0456\u0445 \u0437\u0430 \u0432\u0441\u0435-\u0432\u0441\u0435-\u0432\u0441\u0435"}),(0,d.jsx)(c.aC,{component:"p",name:"rating"})]}),(0,d.jsx)(c.Gh,{type:"submit",children:"\u041e\u043d\u043e\u0432\u0438\u0442\u0438 \u0437\u0430\u0433\u0430\u043b\u044c\u043d\u0438\u0439 \u0440\u0435\u0439\u0442\u0438\u043d\u0433"})]})}),t&&(0,d.jsx)(r.J9,{initialValues:{period:"monthly",rating:""},onSubmit:async(e,t)=>{let{resetForm:s}=t;a((e=>!0)),e.rating=JSON.parse(e.rating);try{console.log(e);const t=await n.Z.patch("/ratings",e);console.log(t),s(),alert("\u0420\u0435\u0439\u0442\u0438\u043d\u0433\u0438 \u0437\u0430\u043c\u0456\u043d\u0438\u043b\u0438\u0441\u044f, \u043c\u043e\u043b\u043e\u0434\u0435\u0446\u044c")}catch(o){console.error(o),alert("\u0429\u043e\u0441\u044c \u043d\u0435 \u043f\u0440\u043e\u043a\u043d\u0443\u043b\u043e!")}finally{a((e=>!1))}},validationSchema:g,children:(0,d.jsxs)(c.Od,{children:[(0,d.jsxs)(s.__,{children:[(0,d.jsx)(c.gB,{type:"text",name:"rating",component:"textarea",placeholder:"\u0411\u0430\u043b\u0438 \u0432\u0441\u0456\u0445-\u0432\u0441\u0456\u0445-\u0432\u0441\u0456\u0445 \u0437\u0430 \u043c\u0456\u0441\u044f\u0446\u044c-\u043c\u0456\u0441\u044f\u0446\u044c-\u043c\u0456\u0441\u044f\u0446\u044c"}),(0,d.jsx)(c.aC,{component:"p",name:"rating"})]}),(0,d.jsx)(c.Gh,{type:"submit",children:"\u041e\u043d\u043e\u0432\u0438\u0442\u0438 \u043c\u0456\u0441\u044f\u0447\u043d\u0438\u0439 \u0440\u0435\u0439\u0442\u0438\u043d\u0433"})]})}),e&&(0,d.jsx)(o.a,{})]})})}}}]);
//# sourceMappingURL=Ratings Admin Panel page.f686e1d9.chunk.js.map