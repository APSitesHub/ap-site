"use strict";(self.webpackChunkap_education=self.webpackChunkap_education||[]).push([[9179],{23565:(n,e,t)=>{t.d(e,{r:()=>s});var o,a=t(72791);function r(){return r=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o])}return n},r.apply(this,arguments)}function i(n,e){let{title:t,titleId:i,...s}=n;return a.createElement("svg",r({width:16,height:26,viewBox:"0 0 8 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:e,"aria-labelledby":i},s),t?a.createElement("title",{id:i},t):null,o||(o=a.createElement("path",{d:"M6.5 1L1 6.5L6.5 12",stroke:"#0b4943",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})))}const s=a.forwardRef(i);t.p},84113:(n,e,t)=>{t.d(e,{r:()=>s});var o,a=t(72791);function r(){return r=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o])}return n},r.apply(this,arguments)}function i(n,e){let{title:t,titleId:i,...s}=n;return a.createElement("svg",r({width:16,height:26,viewBox:"0 0 8 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:e,"aria-labelledby":i},s),t?a.createElement("title",{id:i},t):null,o||(o=a.createElement("path",{d:"M1 12L6.5 6.5L1 1",stroke:"#0b4943",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})))}const s=a.forwardRef(i);t.p},57400:(n,e,t)=>{t.d(e,{t:()=>s});var o=t(55294),a=t(72791),r=t(27269),i=t(80184);const s=n=>{let{page:e,sectionWidth:t,sectionHeight:s,isKahootOpen:l,isOpenedLast:c}=n;const[d,p]=(0,a.useState)(!1),[h,g]=(0,a.useState)(!1),[m,x]=(0,a.useState)({}),[u,f]=(0,a.useState)(1),b=h?"1024px":t/10*4,v="124px",w="70px",Z=async n=>{const e=parseInt(n.currentTarget.innerText);x((await o.Z.get("/host-kahoots")).data),f(e)};(0,a.useLayoutEffect)((()=>{(async()=>{try{x((await o.Z.get("/host-kahoots")).data)}catch(n){console.log(n)}})()}),[]);return(0,i.jsx)(i.Fragment,{children:Object.keys(m).length&&(0,i.jsxs)(r.K1,{className:(()=>{let n="";return n=l?"shown":"hidden",n=d?n+" minimized":n,n})(),style:{zIndex:"kahoot"===c?"3":d?"5":"1",width:d?v:b,height:d?w:s},onTransitionEnd:async n=>{n.target===n.currentTarget&&x((await o.Z.get("/host-kahoots")).data)},children:[d&&(0,i.jsxs)(r.zD,{children:[(0,i.jsx)(r.Tv,{}),(0,i.jsx)(r.sc,{})]}),(0,i.jsx)(r.PM,{onClick:()=>{p((n=>!n))},className:l?"":"hidden",children:d?(0,i.jsx)(r.$M,{}):(0,i.jsx)(r.cA,{})}),(0,i.jsx)(r.sN,{onClick:()=>{g(!h)},children:"+"}),Object.values(m[e].links).length>1&&(0,i.jsx)(r.X$,{children:Object.values(m[e].links).map(((n,e)=>(0,i.jsx)(r._L,{onClick:Z,className:u===e+1?"active":"",tabIndex:-1,children:e+1},e)))}),(()=>{const n=[];return Object.values(m[e].links).map((e=>(n.push(e),n))),n})().map(((n,e)=>(0,i.jsx)(r.qe,{className:u===e+1?"active":"",children:(0,i.jsx)("iframe",{id:"host-kahoot-window-".concat(e+1),title:"host-kahoot-".concat(e+1),src:n,width:d?v:b,height:d?w:s})},e)))]})})}},9889:(n,e,t)=>{t.d(e,{t:()=>s});var o=t(72791),a=t(27269),r=t(97364),i=t(80184);const s=n=>{let{page:e,isPlatformOpen:t,isOpenedLast:s,sectionWidth:l}=n;const[c,d]=(0,o.useState)(1),[p,h]=(0,o.useState)(1),[g,m]=(0,o.useState)([c]),x=async n=>{const e=parseInt(n.currentTarget.innerText);h(e)};return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(r.vn,{className:t?"shown":"hidden",style:{zIndex:"platform"===s?"4":"1",width:l/10*4},children:[1===c&&(0,i.jsx)(r.gs,{onClick:()=>{e.includes("polski")&&(d((n=>n+2)),m((n=>[...n,c+2]))),d((n=>n+1)),m((n=>[...n,c+1]))},children:"+"}),c>1&&(0,i.jsx)(a.X$,{children:g.map(((n,e)=>(0,i.jsx)(a._L,{onClick:x,className:p===e+1?"active":"",tabIndex:-1,children:e+1},e)))}),(0,i.jsx)("iframe",{className:1===p&&"active",id:"platform-window",title:"platform-pin",src:"https://online.ap.education/school/",width:"58.83%",height:"58.83%"},c),c>1&&(0,i.jsx)("iframe",{className:2===p&&"active",id:"platform-window-".concat(c),title:"platform-pin-".concat(c),src:"https://online.ap.education/school/",width:"58.83%",height:"58.83%"},c+1),c>2&&(0,i.jsx)("iframe",{className:3===p&&"active",id:"platform-window-".concat(c),title:"platform-pin-".concat(c),src:"https://online.ap.education/school/",width:"58.83%",height:"58.83%"},c+2)]})})}},47232:(n,e,t)=>{t.d(e,{Z:()=>qn});var o,a,r,i,s,l,c,d,p,h,g,m,x,u,f,b,v,w,Z,k,j,y,P,I,S,z,N,D,L,_,C,O,T,M,E,H,B,A,F,W,Y,R,X,$,q,K=t(55294),G=t(25984),J=t(72791),Q=t(91608),U=t(35070),V=t(30168),nn=t(67527),en=t(76487),tn=t(34770),on=t(73509),an=t(18025),rn=t(13260),sn=t(35484),ln=t(23677),cn=t(23565),dn=t(84113);const pn=en.ZP.div(o||(o=(0,V.Z)(["\n  position: absolute;\n  top: 0;\n  right: 0;\n  z-index: 8;\n  height: 40vh;\n  width: 40%;\n  /* overflow: hidden; */\n  border-top-left-radius: 5px;\n\n  font-family: var(--streams-font-family);\n  background-color: #0f0f0f;\n\n  box-shadow: -10px -10px 30px 0px rgba(0, 0, 0, 0.25);\n\n  transition: transform var(--animation-global);\n\n  &.hidden {\n    transform: translateX(100%);\n  }\n\n  &.shown {\n    transform: translateX(0);\n  }\n"]))),hn=(en.ZP.form(a||(a=(0,V.Z)(["\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n  justify-content: center;\n  align-items: center;\n\n  background-size: 100% auto;\n  background-position: top 40% center;\n  background-repeat: no-repeat;\n\n  @media screen and (min-width: 1280px) {\n    height: 100vh;\n  }\n"]))),en.ZP.h2(r||(r=(0,V.Z)(["\n  font-size: 30px;\n  color: var(--chat-font-color);\n"]))),en.ZP.label(i||(i=(0,V.Z)(["\n  font-size: 18px;\n  max-width: 280px;\n  text-align: center;\n"]))),en.ZP.input(s||(s=(0,V.Z)(["\n  border: 1.5px solid var(--accent-color);\n  border-radius: 8px;\n  padding: 8px;\n  font-size: 18px;\n  width: 80%;\n\n  transition: background-color var(--animation-global);\n\n  &:hover,\n  &:focus {\n    background-color: var(--accent-transparent-color);\n  }\n"]))),en.ZP.p(l||(l=(0,V.Z)(["\n  color: red;\n  font-size: 14px;\n  max-width: 250px;\n  text-align: center;\n"]))),en.ZP.button(c||(c=(0,V.Z)(["\n  width: 55%;\n  padding: 8px;\n  font-size: 18px;\n  cursor: pointer;\n  background-color: #607eaa;\n  color: #f9f5eb;\n  outline: none;\n  border: none;\n  border-radius: 5px;\n\n  transition: background-color var(--animation-global),\n    color var(--animation-global);\n\n  &:hover,\n  &:focus {\n    background-color: var(--main-color);\n    color: var(--accent-color);\n  }\n"]))),en.ZP.div(d||(d=(0,V.Z)(["\n  position: relative;\n\n  width: 100%;\n  height: 100%;\n\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n\n  background-size: auto 40%;\n  background-position: top 30px right -44px;\n  background-repeat: no-repeat;\n  background-color: transparent;\n"])))),gn=en.ZP.div(p||(p=(0,V.Z)(["\n  width: 100%;\n  height: 95%;\n  padding: 10px;\n  padding-top: 0;\n  overflow-x: hidden;\n  overflow-y: scroll;\n\n  display: flex;\n  flex-direction: column;\n  flex-wrap: nowrap;\n\n  scrollbar-width: none;\n  scrollbar-gutter: stable;\n\n  & :first-child:not(#chat-pin):not(svg) {\n    margin-top: auto;\n  }\n\n  & :nth-child(2) {\n    margin-top: auto;\n  }\n\n  & #chat-pin {\n    margin-top: 0;\n  }\n"]))),mn=(0,en.ZP)(gn)(h||(h=(0,V.Z)(["\n  padding-top: 8px;\n  height: 95vh;\n\n  & :first-child:not(svg) {\n    margin-top: auto !important;\n  }\n\n  & :nth-child(2) {\n    margin-top: 0;\n  }\n"]))),xn=en.ZP.div(g||(g=(0,V.Z)(["\n  position: relative;\n  margin-bottom: 8px;\n"]))),un=en.ZP.p(m||(m=(0,V.Z)(["\n  color: #fff;\n  text-align: right;\n  font-size: 18px;\n  line-height: 22px;\n  margin-bottom: 1px;\n"]))),fn=en.ZP.p(x||(x=(0,V.Z)(["\n  color: #fff;\n  font-size: 18px;\n  line-height: 22px;\n  font-weight: 500;\n  margin-bottom: 1px;\n"]))),bn=en.ZP.span(u||(u=(0,V.Z)(["\n  color: #fff;\n  font-size: 18px;\n  line-height: 22px;\n  font-weight: 500;\n  margin-bottom: 1px;\n\n  display: flex;\n  gap: 6px;\n  align-items: center;\n"]))),vn=en.ZP.div(f||(f=(0,V.Z)(["\n  position: relative;\n  background-color: var(--accent-transparent-color);\n  max-width: 65%;\n  padding: 8px;\n  border-radius: 10px;\n  margin-left: auto;\n  font-size: 15px;\n  line-height: 18px;\n\n  @media screen and (orientation: landscape) {\n    max-width: 230px;\n  }\n\n  @media screen and (min-width: 1280px) {\n    max-width: 230px;\n  }\n"]))),wn=(0,en.ZP)(vn)(b||(b=(0,V.Z)(["\n  max-width: 95%;\n  font-size: 32px;\n  line-height: 36px;\n\n  @media screen and (orientation: landscape) {\n    max-width: 95%;\n  }\n\n  @media screen and (min-width: 1280px) {\n    max-width: 95%;\n  }\n"]))),Zn=en.ZP.div(v||(v=(0,V.Z)(["\n  position: relative;\n  background-color: var(--main-transparent-color);\n  max-width: 65%;\n  padding: 8px;\n  border-radius: 10px;\n  font-size: 15px;\n  line-height: 18px;\n\n  @media screen and (orientation: landscape) {\n    max-width: 230px;\n  }\n\n  @media screen and (min-width: 1280px) {\n    max-width: 230px;\n  }\n"]))),kn=(0,en.ZP)(Zn)(w||(w=(0,V.Z)(["\n  max-width: 95%;\n  font-size: 32px;\n  line-height: 36px;\n\n  @media screen and (orientation: landscape) {\n    max-width: 95%;\n  }\n\n  @media screen and (min-width: 1280px) {\n    max-width: 95%;\n  }\n"]))),jn=((0,en.ZP)(Zn)(Z||(Z=(0,V.Z)(["\n  background-color: transparent;\n  max-width: 95%;\n"]))),en.ZP.p(k||(k=(0,V.Z)(["\n  word-wrap: break-word;\n  white-space: normal;\n  color: var(--chat-font-color);\n\n  & > a {\n    color: var(--link-color);\n  }\n"])))),yn=(0,en.ZP)(jn)(j||(j=(0,V.Z)(["\n  color: #ffffffdd;\n\n  & > a {\n    color: var(--accent-color);\n  }\n"]))),Pn=(en.ZP.p(y||(y=(0,V.Z)(["\n  position: absolute;\n  bottom: 5px;\n  right: 5px;\n  font-size: 11px;\n  color: #00000081;\n"]))),en.ZP.div(P||(P=(0,V.Z)(["\n  width: 100%;\n  padding: 10px;\n  height: 5vh;\n  min-height: 48px;\n"])))),In=en.ZP.form(I||(I=(0,V.Z)(["\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  justify-content: space-between;\n"]))),Sn=en.ZP.input(S||(S=(0,V.Z)(["\n  width: 100%;\n  height: 100%;\n  border-radius: 10px;\n  border: 1px solid #ddd;\n  outline: none;\n  padding: 8px;\n  padding-right: 32px;\n\n  font-family: var(--streams-secondary-font-family);\n  font-weight: 500;\n  font-size: 16px;\n\n  word-wrap: break-word;\n  white-space: normal;\n  background-color: var(--chat-background-color);\n  color: var(--chat-font-color);\n\n  &::placeholder {\n    user-select: none;\n\n    color: var(--chat-font-color);\n    font-size: 12px;\n  }\n"]))),zn=(0,en.ZP)(Sn)(z||(z=(0,V.Z)(["\n  width: calc(100% - 54px);\n\n  background-color: #0f0f0f;\n  color: #ffffffdd;\n\n  &::placeholder {\n    color: #ffffffdd;\n  }\n"]))),Nn=(0,en.ZP)(ln.r)(N||(N=(0,V.Z)(["\n  width: 24px;\n  height: 24px;\n  fill: var(--accent-color);\n\n  transition: fill var(--animation-global);\n"]))),Dn=en.ZP.button(D||(D=(0,V.Z)(["\n  background-color: var(--main-color);\n  padding: 10px;\n  border: none;\n  border-radius: 50%;\n  outline: none;\n  color: #eae3d2;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: background-color var(--animation-global),\n    box-shadow var(--animation-global);\n\n  &:hover,\n  &:focus {\n    box-shadow: 2px 2px 12px 0px rgba(0, 0, 0, 0.5);\n  }\n\n  &:hover > svg,\n  &:focus > svg {\n    fill: var(--chat-background-color);\n  }\n"]))),Ln=(0,en.ZP)(Dn)(L||(L=(0,V.Z)(["\n  position: absolute;\n  bottom: 75px;\n  z-index: 5;\n\n  width: 36px;\n  height: 36px;\n\n  background-color: var(--main-semi-transparent-color);\n\n  &:hover > svg,\n  &:focus > svg {\n    fill: none;\n  }\n"]))),_n=(0,en.ZP)(an.r)(_||(_=(0,V.Z)(["\n  flex-shrink: 0;\n  stroke-width: 2;\n"]))),Cn=(en.ZP.div(C||(C=(0,V.Z)(["\n  position: sticky;\n  top: 0;\n  right: 0;\n  z-index: 1;\n  padding: 4px;\n\n  margin-left: auto;\n  margin-bottom: 8px;\n\n  width: 100%;\n\n  background-color: var(--pinned-message-color);\n\n  border-radius: 10px;\n\n  transition: all var(--animation-global);\n\n  & div:last-child {\n    margin-bottom: 0;\n  }\n\n  & > p {\n    font-size: 12px;\n    line-height: 14px;\n    transition: font-size var(--animation-global);\n  }\n\n  & div {\n    font-size: 15px;\n    line-height: 18px;\n    transition: font-size var(--animation-global);\n  }\n\n  &.minimized {\n    width: 25px;\n    height: 25px;\n\n    right: 0;\n\n    border-radius: 50%;\n\n    & p,\n    & div {\n      font-size: 0px;\n      margin: 0px;\n      opacity: 0;\n    }\n\n    & svg {\n      visibility: visible;\n    }\n  }\n"]))),(0,en.ZP)(sn.r)(O||(O=(0,V.Z)(["\n  position: absolute;\n  top: 2px;\n  right: 1px;\n  z-index: 5;\n\n  width: 22px;\n  height: 22px;\n\n  fill: var(--pin-icon-fill);\n\n  transition: transform var(--animation-global);\n\n  &.minimized {\n    transform: rotate(60deg);\n  }\n"])))),On=(0,en.ZP)(Cn)(T||(T=(0,V.Z)(["\n  top: 2px;\n  right: 0;\n  fill: var(--accent-color);\n  transform: rotate(60deg);\n  transition: transform var(--animation-global);\n\n  &.pinned {\n    transform: rotate(0deg);\n  }\n"]))),Tn=(0,en.ZP)(on.r)(M||(M=(0,V.Z)(["\n  position: absolute;\n  top: 2px;\n  right: 2px;\n\n  width: 22px;\n  height: 22px;\n\n  fill: #f9c8389e;\n\n  &:hover,\n  &:focus {\n    fill: var(--accent-color);\n  }\n"]))),Mn=(0,en.ZP)(Tn)(E||(E=(0,V.Z)(["\n  top: 2px;\n  right: 22px;\n"]))),En=(0,en.ZP)(tn.r)(H||(H=(0,V.Z)(["\n  width: 12px;\n  height: 12px;\n\n  fill: #800000;\n\n  &:hover,\n  &:focus {\n    fill: var(--accent-color);\n  }\n"]))),Hn=((0,en.ZP)(rn.r)(B||(B=(0,V.Z)(["\n  width: 20px;\n  height: 20px;\n\n  position: absolute;\n  top: 50%;\n  right: 6px;\n\n  transform: translateY(-50%);\n\n  fill: var(--link-color);\n\n  &:hover,\n  &:focus {\n    fill: var(--pinned-message-color);\n  }\n"]))),en.ZP.label(A||(A=(0,V.Z)(["\n  position: relative;\n  width: 100%;\n"]))),en.ZP.header(F||(F=(0,V.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n\n  width: 100%;\n  padding: 8px 12px;\n"]))),en.ZP.h2(W||(W=(0,V.Z)(["\n  display: flex;\n  align-items: center;\n  gap: 10px;\n\n  color: var(--chat-font-color);\n  font-size: 12px;\n  font-family: var(--streams-secondary-font-family);\n"]))),(0,en.ZP)(nn.DS)(Y||(Y=(0,V.Z)(["\n  width: 20px;\n  height: 20px;\n"]))),en.ZP.button(R||(R=(0,V.Z)(["\n  position: absolute;\n  bottom: 40px;\n  left: -40px;\n\n  border: none;\n  outline: transparent;\n  border-top-left-radius: 5px;\n  border-bottom-left-radius: 5px;\n  padding: 0;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  height: 60px;\n  width: 42px;\n"])))),Bn=en.ZP.div(X||(X=(0,V.Z)(["\n  position: absolute;\n  bottom: 5px;\n  left: -35px;\n\n  color: var(--main-color);\n  background-color: rgb(240, 240, 240);\n  border-radius: 50%;\n  overflow: hidden;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  font-size: 18px;\n  font-weight: 600;\n  height: 30px;\n  width: 30px;\n\n  &.big-number{\n    bottom: -5px;\n    left: -40px;\n\n    height: 40px;\n  width: 40px;\n  }\n"]))),An=(0,en.ZP)(cn.r)($||($=(0,V.Z)(["\n  stroke: var(--main-color);\n  transition: stroke var(--animation-global);\n"]))),Fn=(0,en.ZP)(dn.r)(q||(q=(0,V.Z)(["\n  stroke: var(--main-color);\n  transition: stroke var(--animation-global);\n"])));var Wn=t(35667),Yn=t(80184);const Rn=n=>{let{messages:e,socket:t,room:o}=n;const a=(0,J.useRef)(),[r,i]=(0,J.useState)(!0),s=/\b(?:https?|ftp):\/\/\S+\b/g;(0,J.useEffect)((()=>{l()})),console.log(29,"chatbody - room",o);const l=()=>{r&&Wn.NY.scrollToBottom({containerId:"chat-box",duration:0})},c=async n=>{t.emit("message:delete",n.id)};return(0,Yn.jsxs)(Yn.Fragment,{children:[(0,Yn.jsx)(mn,{id:"chat-box",ref:a,onScroll:()=>{i((n=>a.current.offsetHeight===a.current.scrollHeight-Math.ceil(a.current.scrollTop)||a.current.scrollHeight-Math.floor(a.current.scrollTop)&&a.current.scrollHeight-Math.ceil(a.current.scrollTop)<=a.current.offsetHeight&&a.current.scrollHeight-Math.floor(a.current.scrollTop)<=a.current.offsetHeight))},children:e.map((n=>n.roomLocation===o?n.username===localStorage.getItem("userName")&&n.userID===localStorage.getItem("userID")?(0,Yn.jsxs)(xn,{children:[(0,Yn.jsxs)(un,{className:"sender__name",children:["\u0412\u0438 (",n.username,")"]}),(0,Yn.jsxs)(wn,{children:[(0,Yn.jsx)(Mn,{onClick:()=>c(n),id:n._id}),(0,Yn.jsx)(On,{className:n.isPinned?"pinned":"",onClick:()=>(n=>{t.emit("message:pin",n.id,{isPinned:!n.isPinned})})(n),id:n.id}),(0,Yn.jsx)(yn,{dangerouslySetInnerHTML:{__html:n.text.replace(s,(n=>'<a href="'.concat(n,'" target="_blank">').concat(n,"</a>")))}})]})]},n.id):(0,Yn.jsxs)(xn,{children:[(0,Yn.jsx)(fn,{children:(0,Yn.jsxs)(bn,{children:[n.username,(0,Yn.jsx)(En,{onClick:()=>(async(n,e)=>{console.log(n,e),t.emit("user:ban",n,e)})(n.userID,n.userIP)})]})}),(0,Yn.jsxs)(kn,{className:"message__recipient",children:[(0,Yn.jsx)(Tn,{onClick:()=>c(n),id:n._id}),(0,Yn.jsx)(yn,{dangerouslySetInnerHTML:{__html:n.text.replace(s,(n=>'<a href="'.concat(n,'" target="_blank">').concat(n,"</a>")))}})]})]},n.id):null))}),!r&&(0,Yn.jsx)(Ln,{onClick:()=>{Wn.NY.scrollToBottom({containerId:"chat-box",duration:0})},children:(0,Yn.jsx)(_n,{})})]})},Xn=n=>{let{socket:e,room:t}=n;const[o,a]=(0,J.useState)("");return(0,Yn.jsx)(Pn,{children:(0,Yn.jsxs)(In,{className:"form",onSubmit:async n=>{n.preventDefault(),console.log(o),console.log(o.trim()&&localStorage.getItem("userName"));const r=await K.Z.get("https://jsonip.com/");o.trim()&&localStorage.getItem("userName")&&e.emit("message",{text:o,username:localStorage.getItem("userName"),userID:localStorage.getItem("userID"),userIP:r.data.ip,id:"".concat(e.id).concat(Math.random()),socketID:e.id,roomLocation:t}),console.log({userName:localStorage.getItem("userName"),message:o}),a(""),Wn.NY.scrollToBottom({containerId:"chat-box",duration:0})},children:[(0,Yn.jsx)(zn,{type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043f\u043e\u0432\u0456\u0434\u043e\u043c\u043b\u0435\u043d\u043d\u044f",value:o,onChange:n=>a(n.target.value)}),(0,Yn.jsx)(Dn,{children:(0,Yn.jsx)(Nn,{})})]})})},$n=n=>{let{socket:e,messages:t,room:o}=n;return(0,Yn.jsxs)(hn,{children:[(0,Yn.jsx)(Rn,{socket:e,messages:t,room:o}),(0,Yn.jsx)(Xn,{socket:e,room:o})]})},qn=n=>{let{page:e}=n;const[t,o]=(0,J.useState)(""),[a,r]=(0,J.useState)(""),[i,s]=(0,J.useState)(!1),[l,c]=(0,J.useState)(!1),[d,p]=(0,J.useState)([]),[h,g]=(0,J.useState)(0);console.log(33,e);const m=(n=>n.includes("dekidsfree")||n.includes("plkidsfree")?"/streams-kids/"+n.replace("kids","a1"):n.includes("kidsfree")||n.includes("kidspre")||n.includes("kidsbeg")||n.includes("kidsmid")||n.includes("kidshigh")||n.includes("beginner")?"/streams-kids/"+n.replace("kids",""):n.includes("kids")?"/streams-kids/"+n.split("kids")[0]:n.includes("trendets")||n.includes("preschool")?"/streams-kids/"+n:"/streams/"+n)(e);console.log(46,m);console.log("counter",h);const x=(0,J.useRef)(null);return(0,J.useEffect)((()=>{document.title="AP Chat Window",x.current=(0,Q.io)("https://ap-chat-server.onrender.com/"),(n=>{const e=localStorage.getItem("userName"),t=localStorage.getItem("userID");if(!t&&e){const n=(0,G.x0)(8);r((e=>n)),localStorage.setItem("userID",n)}t&&e&&s((n=>!0))})(),x.current.on("connected",((n,e)=>{console.log(n),console.log(e),g((n=>n+1))})),x.current.on("connected:user",((n,e)=>{console.log("connected:user"),console.log("90",new Date),console.log("91",n),console.log("92",e),m===e&&g((n=>n+1))})),x.current.on("connected:disconnect",((n,e)=>{console.log("connected:disconnect"),console.log("99",new Date),console.log("100",n),console.log("101",e),m===e&&g((n=>n-1))}));return(async()=>{console.log("get");try{var n,e,t,o;const a=await K.Z.get("https://ap-chat-server.onrender.com/messages/room",{params:{room:m}});let r={},i={};"/streams-kids/a2"===m&&(r=await K.Z.get("https://ap-chat-server.onrender.com/messages/room",{params:{room:"/streams-kids/b1beginner"}}),i=await K.Z.get("https://ap-chat-server.onrender.com/messages/room",{params:{room:"/streams-kids/b1beginner"}}));const s=null!==(n=r)&&void 0!==n&&null!==(e=n.data)&&void 0!==e&&e.length&&null!==(t=i)&&void 0!==t&&null!==(o=t.data)&&void 0!==o&&o.length?[...r.data,...i.data]:[],l=(s.length?[...a.data,...s]:[...a.data]).filter((n=>new Date(n.createdAt).getDate()===(new Date).getDate()));p((n=>l))}catch(a){console.log(a)}})(),x.current.on("message",(async n=>{p((e=>[...e,n]));await(async()=>{try{await K.Z.post("https://ap-chat-server.onrender.com/messages",n)}catch(e){console.log(e)}})()})),x.current.on("message:get",(async n=>{console.log(n),p((e=>[...e,n]))})),x.current.on("message:pin",(async(n,e)=>{p((t=>(t[t.findIndex((e=>e.id===n))].isPinned=e.isPinned,[...t])));await(async()=>{try{await K.Z.patch("https://ap-chat-server.onrender.com/messages/".concat(n),e)}catch(t){console.log(t)}})()})),x.current.on("message:delete",(async n=>{console.log("delete fired"),p((e=>[...e.filter((e=>e.id!==n))]));await(async()=>{try{await K.Z.delete("https://ap-chat-server.onrender.com/messages/".concat(n))}catch(e){console.log(e)}})()})),x.current.on("user:ban",(async(n,e)=>{console.log("ban fired");await(async()=>{console.log("request fired"),console.log(n),console.log(e);try{await K.Z.patch("https://ap-chat-server.onrender.com/users/".concat(n),{isBanned:!0})}catch(t){console.log(t)}})()})),()=>{x.current.off("connected"),x.current.off("message"),x.current.disconnect()}}),[m]),(0,Yn.jsx)(Yn.Fragment,{children:(0,Yn.jsxs)(pn,{className:l?"shown":"hidden",children:[(0,Yn.jsx)(Hn,{onClick:()=>{c(!l)},children:l?(0,Yn.jsx)(Fn,{}):(0,Yn.jsx)(An,{})}),(0,Yn.jsx)(Bn,{className:h>99&&"big-number",children:h}),i?(0,Yn.jsx)($n,{socket:x.current,messages:d,room:m}):(0,Yn.jsxs)(U._Y,{onSubmit:n=>{n.preventDefault();const e=(0,G.x0)(8);r((n=>e)),localStorage.setItem("userName",t.trim()),localStorage.setItem("userID",e),localStorage.setItem("APLoggedIn",!0),s((n=>!n))},children:[(0,Yn.jsx)(U.mD,{children:"AP Open Chat"}),(0,Yn.jsx)(U.bt,{htmlFor:"username",children:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u0432\u0430\u0448\u0435 \u0456\u043c'\u044f \u0442\u0430 \u043f\u0440\u0456\u0437\u0432\u0438\u0449\u0435 \u043f\u043e\u0432\u043d\u0456\u0441\u0442\u044e"}),(0,Yn.jsx)(U._8,{type:"text",minLength:3,name:"username",id:"username",value:t,onChange:n=>o(n.target.value)}),(0,Yn.jsx)(U.bh,{children:"\u0413\u043e\u0442\u043e\u0432\u043e!"})]})]})})}}}]);
//# sourceMappingURL=9179.24c3f378.chunk.js.map