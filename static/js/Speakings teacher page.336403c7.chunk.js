"use strict";(self.webpackChunkap_education=self.webpackChunkap_education||[]).push([[2341],{31431:(e,t,s)=>{s.r(t),s.d(t,{default:()=>m});var a=s(55294),o=s(2605),r=s(97723),n=s(8313),c=s(10610),l=s(55705),i=s(72791),d=s(57689),h=s(8007),p=s(3201),u=s(17102),g=s(80184);a.Z.defaults.baseURL="https://ap-server-8qi1.onrender.com";const x=e=>{a.Z.defaults.headers.common.Authorization="Bearer ".concat(e)},m=()=>{const[e,t]=(0,i.useState)(!1),[s,m]=(0,i.useState)({}),[j,w]=(0,i.useState)(!1),[y,S]=(0,i.useState)(!1),f=h.Ry().shape({login:h.Z_().required("\u0412\u043a\u0430\u0436\u0456\u0442\u044c \u043b\u043e\u0433\u0456\u043d!"),password:h.Z_().required("\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c!")});return(0,i.useLayoutEffect)((()=>{(async()=>{try{const e=await a.Z.get("/");console.log(e.data)}catch(e){console.log(e)}})();(async()=>{if(console.log("token refresher"),localStorage.getItem("teacherLogin"))try{t(!0);const e=await a.Z.post("/teachers/refresh",{login:localStorage.getItem("teacherLogin")});x(e.data.token),m((t=>e.data.teacher)),w((e=>!0))}catch(e){console.log(e)}finally{t(!1)}})()}),[]),(0,g.jsx)(g.Fragment,{children:(0,g.jsxs)(o.CS,{children:[j?(0,g.jsx)(d.j3,{context:[s]}):(0,g.jsx)(l.J9,{initialValues:{login:"",password:""},onSubmit:async(e,t)=>{let{resetForm:s}=t;e.login=e.login.toLowerCase().trim().trimStart(),e.password=e.password.trim().trimStart();try{const t=await a.Z.post("/teachers/login",e);x(t.data.token),w((e=>!0)),m((e=>t.data.teacher)),localStorage.setItem("teacherLogin",e.login),S(!1),s()}catch(o){401===o.response.status&&S(!0),console.error(o)}},validationSchema:f,children:(0,g.jsxs)(u.U0,{children:[(0,g.jsx)(p.P6,{}),(0,g.jsxs)(p.DO,{children:[(0,g.jsx)(p.Qw,{children:"\u041f\u0440\u0438\u0432\u0456\u0442!"}),"\u0426\u0435 \u0441\u0442\u043e\u0440\u0456\u043d\u043a\u0430 \u0434\u043b\u044f \u0432\u0438\u043a\u043b\u0430\u0434\u0430\u0447\u0456\u0432. ",(0,g.jsx)("br",{}),"\u042f\u043a\u0449\u043e \u0432\u0438 \u0432\u0438\u043a\u043b\u0430\u0434\u0430\u0447, \u0432\u0432\u0435\u0434\u0456\u0442\u044c \u0432\u0430\u0448\u0456 \u043b\u043e\u0433\u0456\u043d \u0442\u0430 \u043f\u0430\u0440\u043e\u043b\u044c."]}),(0,g.jsxs)(r.__,{children:[(0,g.jsx)(p.vJ,{type:"text",name:"login",placeholder:"Login",onBlur:()=>S(!1)}),(0,g.jsx)(p.NK,{component:"p",name:"login"})]}),(0,g.jsxs)(r.__,{children:[(0,g.jsx)(p.vJ,{type:"password",name:"password",placeholder:"Password",onBlur:()=>S(!1)}),(0,g.jsx)(p.NK,{component:"p",name:"password"})]}),(0,g.jsx)(u.Gh,{type:"submit",children:"\u0423\u0432\u0456\u0439\u0442\u0438"}),(0,g.jsx)(p.Yx,{style:y?{opacity:"1"}:{opacity:"0"},children:"\u041b\u043e\u0433\u0456\u043d \u0430\u0431\u043e \u043f\u0430\u0440\u043e\u043b\u044c \u0432\u0432\u0435\u0434\u0435\u043d\u043e \u043d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e!"})]})}),e&&(0,g.jsx)(c.sb,{children:(0,g.jsx)(n.a,{})})]})})}}}]);
//# sourceMappingURL=Speakings teacher page.336403c7.chunk.js.map