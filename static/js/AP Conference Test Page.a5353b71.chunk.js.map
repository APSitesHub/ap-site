{"version":3,"file":"static/js/AP Conference Test Page.a5353b71.chunk.js","mappings":"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","sources":["pages/MyAP/My Platform/TestPlatform.jsx","pages/MyAP/ConferenceTest.jsx","pages/MyAP/My Platform/MyPlatform.styled.js"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport {\n  BackgroundVideo,\n  MyAPBackground,\n  MyPlatformBox,\n  TestLogo,\n  TestPlatformSpoiler,\n} from './MyPlatform.styled';\n\nexport const TestPlatform = ({ platformLink }) => {\n  const [src, setSrc] = useState('https://online.ap.education/school/');\n  const location = useLocation().search.slice(1);\n\n  useEffect(() => {\n    const setIframeSRC = () => {\n      !platformLink && !location\n        ? setSrc('https://online.ap.education/school/')\n        : !location\n        ? setSrc(platformLink)\n        : setSrc(location);\n    };\n\n    setIframeSRC();\n  }, [platformLink, location]);\n\n  const removeVideo = () => {\n    setTimeout(() => {\n      document.querySelector('[title=\"AP Education\"]').remove();\n    }, 15000);\n  };\n\n  removeVideo();\n\n  return (\n    <MyAPBackground>\n      <BackgroundVideo\n        playsInline\n        loop\n        autoPlay\n        muted\n        src=\"https://www.ap.education/assets/video/Logo_Green.mp4\"\n        title=\"AP Education\"\n      />\n      <TestPlatformSpoiler>\n        <TestLogo />\n      </TestPlatformSpoiler>\n      <MyPlatformBox>\n        <iframe\n          id=\"platform-window\"\n          title=\"platform-pin\"\n          src={src}\n          width=\"100%\"\n          height=\"100%\"\n          allow=\"microphone *\"\n        ></iframe>\n      </MyPlatformBox>\n    </MyAPBackground>\n  );\n};\n","import axios from 'axios';\nimport {\n  Label,\n  LeftFormBackgroundStar,\n  RightFormBackgroundStar,\n} from 'components/LeadForm/LeadForm.styled';\nimport { LoginFormText, StreamSection } from 'components/Stream/Stream.styled';\nimport { Formik } from 'formik';\nimport {\n  AdminFormBtn,\n  AdminInput,\n  AdminInputNote,\n  LoginForm,\n} from 'pages/Streams/AdminPanel/AdminPanel.styled';\nimport { useEffect, useState } from 'react';\nimport * as yup from 'yup';\nimport { TestPlatform } from './My Platform/TestPlatform';\n\nconst ConferenceTest = () => {\n  const [isUserLogged, setIsUserLogged] = useState(false);\n  const [user, setUser] = useState({});\n  const [language, setLanguage] = useState('');\n  const [platformLink, setPlatformLink] = useState(\n    `https://online.ap.education/`\n  );\n\n  axios.defaults.baseURL = 'https://ap-server-8qi1.onrender.com';\n\n  useEffect(() => {\n    document.title = 'My AP | AP Education';\n\n    const refreshToken = async () => {\n      console.log('token refresher');\n      try {\n        const res = await axios.post('/users/refresh', {\n          mail: localStorage.getItem('mail'),\n        });\n        setIsUserLogged(isLogged => (isLogged = true));\n        console.log(73, res.data.user.platformToken);\n        setUser(user => (user = { ...res.data.user }));\n        const lang = res.data.user.lang.split('/');\n        if (lang.length > 1 && !language) {\n          setLanguage(lang[0]);\n        } else if (lang.length <= 1) {\n          setLanguage(res.data.user.lang);\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    };\n    refreshToken();\n\n    const setIframeLinks = async () => {\n      const LINKS = {\n        en1: user.platformToken\n          ? `https://online.ap.education/Account/LoginByToken?token=${\n              user.platformToken\n            }&redirectUrl=${encodeURIComponent(\n              `https://online.ap.education/MarathonClass/?marathonId=37835&pupilId=${user.pupilId}&marathonLessonId=1143131`\n            )}`\n          : `https://online.ap.education/MarathonClass/?marathonId=37835&pupilId=${user.pupilId}&marathonLessonId=1143131`,\n        en2: user.platformToken\n          ? `https://online.ap.education/Account/LoginByToken?token=${\n              user.platformToken\n            }&redirectUrl=${encodeURIComponent(\n              `https://online.ap.education/MarathonClass/?marathonId=49509&pupilId=${user.pupilId}&marathonLessonId=1143132`\n            )}`\n          : `https://online.ap.education/MarathonClass/?marathonId=49509&pupilId=${user.pupilId}&marathonLessonId=1143132`,\n\n        enkids1: user.platformToken\n          ? `https://online.ap.education/Account/LoginByToken?token=${\n              user.platformToken\n            }&redirectUrl=${encodeURIComponent(\n              `https://online.ap.education/MarathonClass/?marathonId=40552&pupilId=${user.pupilId}&marathonLessonId=1143134`\n            )}`\n          : `https://online.ap.education/MarathonClass/?marathonId=40552&pupilId=${user.pupilId}&marathonLessonId=1143134`,\n        enkids2: user.platformToken\n          ? `https://online.ap.education/Account/LoginByToken?token=${\n              user.platformToken\n            }&redirectUrl=${encodeURIComponent(\n              `https://online.ap.education/MarathonClass/?marathonId=50784&pupilId=${user.pupilId}&marathonLessonId=1143133`\n            )}`\n          : `https://online.ap.education/MarathonClass/?marathonId=50784&pupilId=${user.pupilId}&marathonLessonId=1143133`,\n      };\n\n      const marathonLink =\n        language === 'en' && user.marathonNumber === '1'\n          ? 'en1'\n          : language === 'en' && user.marathonNumber === '2'\n          ? 'en2'\n          : language === 'en' && !user.marathonNumber\n          ? 'en2'\n          : language === 'enkids' && user.marathonNumber === '1'\n          ? 'enkids1'\n          : language === 'enkids' && user.marathonNumber === '2'\n          ? 'enkids2'\n          : language === 'enkids' && !user.marathonNumber\n          ? 'enkids2'\n          : '';\n\n      console.log(LINKS[marathonLink]);\n\n      setPlatformLink(link => (link = LINKS[marathonLink]));\n    };\n\n    setIframeLinks();\n  }, [language, user.pupilId, user.marathonNumber, user.platformToken]);\n\n  const setAuthToken = token => {\n    axios.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n  };\n\n  const initialLoginValues = {\n    mail: '',\n    password: '',\n  };\n\n  const loginSchema = yup.object().shape({\n    mail: yup\n      .string()\n      .required('Вкажіть пошту, за якою ви зареєстровані на нашій платформі!'),\n    password: yup\n      .string()\n      .required(\n        'Введіть пароль, який ви використовуєте для входу на нашу платформу!'\n      ),\n  });\n\n  const handleLoginSubmit = async (values, { resetForm }) => {\n    values.mail = values.mail.toLowerCase().trim().trimStart();\n    values.password = values.password.trim().trimStart();\n    try {\n      const response = await axios.post('/users/login', values);\n      console.log(response);\n\n      setAuthToken(response.data.token);\n      setIsUserLogged(isLogged => (isLogged = true));\n      setUser(user => (user = { ...response.data.user }));\n      const lang = response.data.user.lang.split('/');\n      if (lang.length > 1) {\n        setLanguage(lang[0]);\n      }\n      localStorage.setItem('mail', values.mail);\n      resetForm();\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  return (\n    <StreamSection>\n      {!isUserLogged ? (\n        <Formik\n          initialValues={initialLoginValues}\n          onSubmit={handleLoginSubmit}\n          validationSchema={loginSchema}\n        >\n          <LoginForm>\n            <LeftFormBackgroundStar />\n            <RightFormBackgroundStar />\n            <LoginFormText>\n              Привіт!\n              <br />\n              Ця сторінка недоступна для неавторизованих користувачів. Але якщо\n              ви маєте доступ до нашої платформи, то й до цієї сторінки теж.\n              Введіть дані, які ви використовуєте для входу на платформу.\n            </LoginFormText>\n            <Label>\n              <AdminInput type=\"text\" name=\"mail\" placeholder=\"Login\" />\n              <AdminInputNote component=\"p\" name=\"mail\" type=\"email\" />\n            </Label>\n            <Label>\n              <AdminInput\n                type=\"password\"\n                name=\"password\"\n                placeholder=\"Password\"\n              />\n              <AdminInputNote component=\"p\" name=\"password\" />\n            </Label>\n            <AdminFormBtn type=\"submit\">Увійти</AdminFormBtn>\n          </LoginForm>\n        </Formik>\n      ) : (\n        <TestPlatform platformLink={platformLink} />\n      )}\n    </StreamSection>\n  );\n};\n\nexport default ConferenceTest;\n","import { Logo } from 'pages/Quiz/Quiz.styled';\nimport styled from 'styled-components';\n\nexport const MyPlatformBox = styled.div`\n  height: 100vh;\n  width: 100vw;\n\n  overflow: hidden;\n\n  position: absolute;\n  top: 0;\n  left: 0;\n\n  font-family: var(--streams-font-family);\n\n  transition: transform var(--animation-global);\n\n  &.hidden {\n    transform: translateX(-100%);\n  }\n\n  &.shown {\n    transform: translateX(0);\n  }\n`;\n\nexport const TestPlatformSpoiler = styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  width: calc(100% - 17.5px);\n  height: 64px;\n  z-index: 5;\n\n  background-color: white;\n`;\n\nexport const TestLogo = styled(Logo)`\n  display: block;\n  flex-shrink: 0;\n  width: 173px;\n  height: 34px;\n\n  margin: 0 auto;\n`;\n\nexport const MyAPBackground = styled.div`\n  width: 100%;\n  height: 100%;\n`;\n\nexport const BackgroundVideo = styled.video`\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  object-fit: cover;\n\n  width: 100%;\n  height: calc(100% - 64px);\n`;\n"],"names":["TestPlatform","_ref","platformLink","src","setSrc","useState","location","useLocation","search","slice","useEffect","setTimeout","document","querySelector","remove","_jsxs","MyAPBackground","children","_jsx","BackgroundVideo","playsInline","loop","autoPlay","muted","title","TestPlatformSpoiler","TestLogo","MyPlatformBox","id","width","height","allow","ConferenceTest","isUserLogged","setIsUserLogged","user","setUser","language","setLanguage","setPlatformLink","axios","async","console","log","res","mail","localStorage","getItem","isLogged","data","platformToken","lang","split","length","error","refreshToken","LINKS","en1","concat","encodeURIComponent","pupilId","en2","enkids1","enkids2","marathonLink","marathonNumber","link","setIframeLinks","loginSchema","yup","shape","required","password","StreamSection","Formik","initialValues","onSubmit","values","resetForm","toLowerCase","trim","trimStart","response","token","setItem","validationSchema","LoginForm","LeftFormBackgroundStar","RightFormBackgroundStar","LoginFormText","Label","AdminInput","type","name","placeholder","AdminInputNote","component","AdminFormBtn","styled","_templateObject","_taggedTemplateLiteral","_templateObject2","Logo","_templateObject3","_templateObject4","_templateObject5"],"sourceRoot":""}