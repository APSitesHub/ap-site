"use strict";(self.webpackChunkap_education=self.webpackChunkap_education||[]).push([[3303],{9259:(n,e,t)=>{t.r(e),t.d(e,{default:()=>k});var a,o,s,r,i,l,c,d=t(5294),p=t(7723),m=t(8313),h=t(5705),g=t(2791),x=t(8007),u=t(168),j=t(6487);const y=j.ZP.section(a||(a=(0,u.Z)(["\n  height: max-content;\n  padding: 30px 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]))),f=(0,j.ZP)(h.l0)(o||(o=(0,u.Z)(["\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 35px;\n"]))),Z=(0,j.ZP)(h.l0)(s||(s=(0,u.Z)(["\n  margin: 0 auto;\n\n  display: flex;\n  flex-direction: column;\n  gap: 35px;\n"]))),w=(0,j.ZP)(p.Mg)(r||(r=(0,u.Z)(["\n  margin: 0 auto;\n"]))),b=(0,j.ZP)(p.II)(i||(i=(0,u.Z)(["\n  border: 2px solid var(--main-color);\n"]))),_=(0,j.ZP)(p.II)(l||(l=(0,u.Z)(["\n  border-radius: 0;\n  width: 35vw;\n  height: 75vh;\n  scrollbar-width: thin;\n  background-color: transparent;\n"]))),S=(0,j.ZP)(p.r2)(c||(c=(0,u.Z)(["\n  position: static;\n  color: var(--main-color);\n  font-size: 24px;\n  font-weight: 700;\n  bottom: -1.1em;\n"])));var v=t(184);d.Z.defaults.baseURL="https://ap-server-8qi1.onrender.com";const P=n=>{d.Z.defaults.headers.common.Authorization="Bearer ".concat(n)},k=()=>{const[n,e]=(0,g.useState)(!1),[t,a]=(0,g.useState)(!1);(0,g.useEffect)((()=>{document.title="Ratings Admin Panel | AP Education";(async()=>{console.log("token refresher");try{if(localStorage.getItem("isAdmin")){const n=await d.Z.post("admins/refresh/users",{});console.log(n),a((n=>!0)),P(n.data.newToken)}}catch(n){console.log(n)}})()}),[t]);const o=x.Ry().shape({login:x.Z_().required("\u0412\u043a\u0430\u0436\u0456\u0442\u044c \u043b\u043e\u0433\u0456\u043d!"),password:x.Z_().required("\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c!")}),s=x.Ry().shape({rating:x.Z_().required("\u0412\u043d\u0435\u0441\u0438 \u0431\u0430\u043b\u0438!")});return(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)(y,{children:[!t&&(0,v.jsx)(h.J9,{initialValues:{login:"",password:""},onSubmit:async(n,t)=>{let{resetForm:o}=t;e((n=>!0));try{const t=await d.Z.post("/admins/login/users",n);P(t.data.token),a((n=>!0)),localStorage.setItem("isAdmin",!0),o()}catch(s){console.error(s)}finally{e((n=>!1))}},validationSchema:o,children:(0,v.jsxs)(f,{children:[(0,v.jsxs)(p.__,{children:[(0,v.jsx)(b,{type:"text",name:"login",placeholder:"Login"}),(0,v.jsx)(S,{component:"p",name:"login"})]}),(0,v.jsxs)(p.__,{children:[(0,v.jsx)(b,{type:"password",name:"password",placeholder:"Password"}),(0,v.jsx)(S,{component:"p",name:"password"})]}),(0,v.jsx)(w,{type:"submit",children:"\u0417\u0430\u043b\u043e\u0433\u0456\u043d\u0438\u0442\u0438\u0441\u044c"})]})}),t&&(0,v.jsx)(h.J9,{initialValues:{period:"all",rating:""},onSubmit:async(n,t)=>{let{resetForm:a}=t;e((n=>!0)),n.rating=JSON.parse(n.rating);try{console.log(n);const t=await d.Z.patch("/ratings",n);console.log(t),a(),alert("\u0420\u0435\u0439\u0442\u0438\u043d\u0433\u0438 \u0437\u0430\u043c\u0456\u043d\u0438\u043b\u0438\u0441\u044f, \u043c\u043e\u043b\u043e\u0434\u0435\u0446\u044c")}catch(o){console.error(o),alert("\u0429\u043e\u0441\u044c \u043d\u0435 \u043f\u0440\u043e\u043a\u043d\u0443\u043b\u043e!")}finally{e((n=>!1))}},validationSchema:s,children:(0,v.jsxs)(Z,{children:[(0,v.jsxs)(p.__,{children:[(0,v.jsx)(_,{type:"text",name:"rating",component:"textarea",placeholder:"\u0411\u0430\u043b\u0438 \u0432\u0441\u0456\u0445-\u0432\u0441\u0456\u0445-\u0432\u0441\u0456\u0445 \u0437\u0430 \u0432\u0441\u0435-\u0432\u0441\u0435-\u0432\u0441\u0435"}),(0,v.jsx)(S,{component:"p",name:"rating"})]}),(0,v.jsx)(w,{type:"submit",children:"\u041e\u043d\u043e\u0432\u0438\u0442\u0438 \u0437\u0430\u0433\u0430\u043b\u044c\u043d\u0438\u0439 \u0440\u0435\u0439\u0442\u0438\u043d\u0433"})]})}),t&&(0,v.jsx)(h.J9,{initialValues:{period:"monthly",rating:""},onSubmit:async(n,t)=>{let{resetForm:a}=t;e((n=>!0)),n.rating=JSON.parse(n.rating);try{console.log(n);const t=await d.Z.patch("/ratings",n);console.log(t),a(),alert("\u0420\u0435\u0439\u0442\u0438\u043d\u0433\u0438 \u0437\u0430\u043c\u0456\u043d\u0438\u043b\u0438\u0441\u044f, \u043c\u043e\u043b\u043e\u0434\u0435\u0446\u044c")}catch(o){console.error(o),alert("\u0429\u043e\u0441\u044c \u043d\u0435 \u043f\u0440\u043e\u043a\u043d\u0443\u043b\u043e!")}finally{e((n=>!1))}},validationSchema:s,children:(0,v.jsxs)(Z,{children:[(0,v.jsxs)(p.__,{children:[(0,v.jsx)(_,{type:"text",name:"rating",component:"textarea",placeholder:"\u0411\u0430\u043b\u0438 \u0432\u0441\u0456\u0445-\u0432\u0441\u0456\u0445-\u0432\u0441\u0456\u0445 \u0437\u0430 \u043c\u0456\u0441\u044f\u0446\u044c-\u043c\u0456\u0441\u044f\u0446\u044c-\u043c\u0456\u0441\u044f\u0446\u044c"}),(0,v.jsx)(S,{component:"p",name:"rating"})]}),(0,v.jsx)(w,{type:"submit",children:"\u041e\u043d\u043e\u0432\u0438\u0442\u0438 \u043c\u0456\u0441\u044f\u0447\u043d\u0438\u0439 \u0440\u0435\u0439\u0442\u0438\u043d\u0433"})]})}),n&&(0,v.jsx)(m.a,{})]})})}}}]);
//# sourceMappingURL=Ratings Admin Panel page.4fdfaad6.chunk.js.map