"use strict";(self.webpackChunkap_education=self.webpackChunkap_education||[]).push([[2262],{19731:(t,e,n)=>{n.r(e),n.d(e,{default:()=>S});var o=n(55294),a=n(97723),s=n(67527),r=n(55705),i=n(17102),l=n(72791),c=n(8007),d=n(57689),p=n(84528),h=n(47418),u=n(93874),m=n(80184);const x=t=>{let{platformLink:e,handleExit:n}=t;const[o,a]=(0,l.useState)("https://online.ap.education/school/"),s=(0,d.TH)().search.slice(1),[r,i]=(0,l.useState)(0);(0,l.useEffect)((()=>{a(e||s?s||e:"https://online.ap.education/school/")}),[e,s]),(0,l.useEffect)((()=>{const t=new Date("2024-12-14T14:15:00+02:00"),e=()=>{const e=new Date,o=(0,p.zW)(e,"Europe/Kiev"),a=(0,h.c)(t,o);i(a),a<=0&&n()};e();const o=setInterval((()=>{e()}),1e3);return()=>clearInterval(o)}),[n]);return(0,m.jsxs)(u.ll,{children:[(0,m.jsxs)(u.lp,{children:[(0,m.jsxs)("div",{style:{marginLeft:"20px",fontWeight:"700"},children:["Time Left: ",(t=>{const e=Math.floor(t/60),n=t%60;return"".concat(e,":").concat(n<10?"0":"").concat(n)})(r)]})," ",(0,m.jsx)(u.zY,{})]}),(0,m.jsx)(u._$,{children:(0,m.jsx)("iframe",{id:"platform-window",title:"platform-pin",src:o,width:"100%",height:"100%",allow:"microphone *"})})]})},I={position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},f={color:"white",fontSize:"20px",marginBottom:"20px",margintLeft:"10px",margintRight:"10px",maxWidth:"375px",textAlign:"center"},g={display:"flex",flexDirection:"column",color:"white",fontSize:"20px",marginBottom:"20px"},j={fontSize:"40px"},k={display:"flex",flexDirection:"column",gap:"4px",textAlign:"center"},w={padding:"10px 20px",backgroundColor:"#4CAF50",color:"white",border:"none",cursor:"pointer"},y={position:"absolute",bottom:"20px",right:"20px",cursor:"pointer",zIndex:9999},v={fill:"white",fontWeight:"bold"},S=()=>{const[t,e]=(0,l.useState)(!1),[n,d]=(0,l.useState)({}),[u,S]=(0,l.useState)(""),[b,C]=(0,l.useState)("https://online.ap.education/"),[T,L]=(0,l.useState)(!0),[A,D]=(0,l.useState)(!1),[M,U]=(0,l.useState)(!1),[z,B]=(0,l.useState)(!1),[_,E]=(0,l.useState)(null),[N,R]=(0,l.useState)(!1);o.Z.defaults.baseURL="https://ap-server-8qi1.onrender.com",(0,l.useEffect)((()=>{document.title="My AP | AP Education";(async()=>{console.log("token refresher");try{const t=await o.Z.post("/users/refresh",{mail:localStorage.getItem("mail")});e((t=>!0)),console.log(73,t.data.user.platformToken),d((e=>({...t.data.user})));const n=t.data.user.lang.split("/");n.length>1&&!u?S(n[0]):n.length<=1&&S(t.data.user.lang)}catch(t){console.log(t)}})();(async()=>{const t={en1:n.platformToken?"https://online.ap.education/Account/LoginByToken?token=".concat(n.platformToken,"&redirectUrl=").concat(encodeURIComponent("https://online.ap.education/MarathonClass/?marathonId=37835&pupilId=".concat(n.pupilId,"&marathonLessonId=1157251"))):"https://online.ap.education/MarathonClass/?marathonId=37835&pupilId=".concat(n.pupilId,"&marathonLessonId=1157251"),en2:n.platformToken?"https://online.ap.education/Account/LoginByToken?token=".concat(n.platformToken,"&redirectUrl=").concat(encodeURIComponent("https://online.ap.education/MarathonClass/?marathonId=49509&pupilId=".concat(n.pupilId,"&marathonLessonId=1157255"))):"https://online.ap.education/MarathonClass/?marathonId=49509&pupilId=".concat(n.pupilId,"&marathonLessonId=1157255"),enkids1:n.platformToken?"https://online.ap.education/Account/LoginByToken?token=".concat(n.platformToken,"&redirectUrl=").concat(encodeURIComponent("https://online.ap.education/MarathonClass/?marathonId=40552&pupilId=".concat(n.pupilId,"&marathonLessonId=1157234"))):"https://online.ap.education/MarathonClass/?marathonId=40552&pupilId=".concat(n.pupilId,"&marathonLessonId=1157234"),enkids2:n.platformToken?"https://online.ap.education/Account/LoginByToken?token=".concat(n.platformToken,"&redirectUrl=").concat(encodeURIComponent("https://online.ap.education/MarathonClass/?marathonId=50784&pupilId=".concat(n.pupilId,"&marathonLessonId=1157243"))):"https://online.ap.education/MarathonClass/?marathonId=50784&pupilId=".concat(n.pupilId,"&marathonLessonId=1157243")},e="en"===u&&"1"===n.marathonNumber?"en1":"en"===u&&"2"===n.marathonNumber?"en2":"en"!==u||n.marathonNumber?"enkids"===u&&"1"===n.marathonNumber?"enkids1":"enkids"===u&&"2"===n.marathonNumber?"enkids2":"enkids"!==u||n.marathonNumber?"":"enkids2":"en2";console.log(t[e]),C((n=>t[e]))})();const t=setInterval((()=>{(()=>{const t=new Date,e=(0,p.zW)(t,"Europe/Kiev"),n=new Date("2024-12-14T13:29:30+02:00"),o=new Date("2024-12-14T14:15:00+02:00"),a=(0,h.c)(n,e),s=(0,h.c)(o,e);a<0&&L(!1),s<=0&&D(!0)})()}),1e3);return()=>clearInterval(t)}),[u,n.pupilId,n.marathonNumber,n.platformToken]);const Z=c.Ry().shape({mail:c.Z_().required("\u0412\u043a\u0430\u0436\u0456\u0442\u044c \u043f\u043e\u0448\u0442\u0443, \u0437\u0430 \u044f\u043a\u043e\u044e \u0432\u0438 \u0437\u0430\u0440\u0435\u0454\u0441\u0442\u0440\u043e\u0432\u0430\u043d\u0456 \u043d\u0430 \u043d\u0430\u0448\u0456\u0439 \u043f\u043b\u0430\u0442\u0444\u043e\u0440\u043c\u0456!"),password:c.Z_().required("\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c, \u044f\u043a\u0438\u0439 \u0432\u0438 \u0432\u0438\u043a\u043e\u0440\u0438\u0441\u0442\u043e\u0432\u0443\u0454\u0442\u0435 \u0434\u043b\u044f \u0432\u0445\u043e\u0434\u0443 \u043d\u0430 \u043d\u0430\u0448\u0443 \u043f\u043b\u0430\u0442\u0444\u043e\u0440\u043c\u0443!")});return(0,m.jsxs)(s.QU,{children:[t?!M&&!A&&!z&&(0,m.jsx)("div",{style:I,children:T?(0,m.jsx)("div",{style:f,children:(0,m.jsx)("p",{children:"\u0422\u0435\u0441\u0442 \u0433\u043e\u0442\u0443\u0454\u0442\u044c\u0441\u044f \u0434\u043e \u0442\u0435\u0431\u0435, \u0442\u0430\u043a \u044f\u043a \u0442\u0438 \u0433\u043e\u0442\u0443\u0432\u0430\u0432\u0441\u044f \u0434\u043e \u043d\u044c\u043e\u0433\u043e. \u0429\u0435 \u0442\u0440\u043e\u0445\u0438 \u0447\u0430\u0441\u0443, \u0449\u043e\u0431 \u043f\u0435\u0440\u0435\u043a\u043e\u043d\u0430\u0442\u0438\u0441\u044f, \u0449\u043e \u0442\u0438 \u0432\u0441\u0435 \u0437\u043d\u0430\u0454\u0448) \u0421\u043a\u043e\u0440\u043e \u043f\u043e\u0447\u043d\u0435\u043c\u043e!"})}):(0,m.jsx)("button",{onClick:()=>{const t=(new Date).toISOString();localStorage.setItem("testStartTime",t),E(t),U(!0)},style:w,children:"\u0420\u043e\u0437\u043f\u043e\u0447\u0430\u0442\u0438 \u0442\u0435\u0441\u0442"})}):(0,m.jsx)(r.J9,{initialValues:{mail:"",password:""},onSubmit:async(t,n)=>{let{resetForm:a}=n;t.mail=t.mail.toLowerCase().trim().trimStart(),t.password=t.password.trim().trimStart();try{const n=await o.Z.post("/users/login",t);console.log(n),s=n.data.token,o.Z.defaults.headers.common.Authorization="Bearer ".concat(s),e((t=>!0)),d((t=>({...n.data.user})));const r=n.data.user.lang.split("/");r.length>1&&S(r[0]),localStorage.setItem("mail",t.mail),R(!1),a()}catch(r){401===r.response.status&&R(!0),console.error(r)}var s},validationSchema:Z,children:(0,m.jsxs)(i.U0,{children:[(0,m.jsx)(a.hQ,{}),(0,m.jsx)(a.T$,{}),(0,m.jsx)(s.YA,{children:"\u041f\u0440\u0438\u0432\u0456\u0442! \u0412\u0432\u0435\u0434\u0456\u0442\u044c \u0434\u0430\u043d\u0456 \u0434\u043b\u044f \u0432\u0445\u043e\u0434\u0443 \u043d\u0430 \u043f\u043b\u0430\u0442\u0444\u043e\u0440\u043c\u0443."}),(0,m.jsxs)(a.__,{children:[(0,m.jsx)(i.vD,{type:"text",name:"mail",placeholder:"Login",onBlur:()=>R(!1)}),(0,m.jsx)(i.aC,{component:"p",name:"mail",type:"email"})]}),(0,m.jsxs)(a.__,{children:[(0,m.jsx)(i.vD,{type:"password",name:"password",placeholder:"Password",onBlur:()=>R(!1)}),(0,m.jsx)(i.aC,{component:"p",name:"password"})]}),(0,m.jsx)(i.Gh,{type:"submit",children:"\u0423\u0432\u0456\u0439\u0442\u0438"}),(0,m.jsx)(s.Yx,{style:N?{opacity:"1"}:{opacity:"0"},children:"\u041b\u043e\u0433\u0456\u043d \u0430\u0431\u043e \u043f\u0430\u0440\u043e\u043b\u044c \u0432\u0432\u0435\u0434\u0435\u043d\u043e \u043d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e!"})]})}),M&&!z&&(0,m.jsx)(x,{platformLink:b,handleExit:()=>{localStorage.removeItem("testStartTime"),B(!0),U(!1)}}),(z||A)&&(0,m.jsx)("div",{style:I,children:(0,m.jsxs)("div",{children:[(0,m.jsxs)("div",{style:k,children:[(0,m.jsx)("div",{style:f,children:"\u0422\u0435\u0441\u0442 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043e"}),(0,m.jsxs)("div",{style:g,children:[(0,m.jsx)("p",{children:"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043b\u044f \u0432\u0438\u0445\u043e\u0434\u0443"}),(0,m.jsx)("p",{style:j,children:(0,m.jsx)("b",{children:"quitconf2024"})})]})]}),(0,m.jsx)("div",{style:y,children:(0,m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",width:"32",height:"32",style:v,children:(0,m.jsx)("path",{d:"M30 15v13.59L1.71.29.29 1.71 28.59 30H16v2h15a1 1 0 0 0 1-1V15z","data-name":"8-Arrow Down"})})})]})})]})}}}]);
//# sourceMappingURL=AP Conference Test Page.86008a62.chunk.js.map