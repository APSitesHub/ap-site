"use strict";(self.webpackChunkap_education=self.webpackChunkap_education||[]).push([[463],{41251:(e,a,s)=>{s.r(a),s.d(a,{default:()=>u});var t=s(55294),n=s(97723),o=s(8313),r=s(55705),c=s(72791),i=s(8007),l=s(31356),d=s(80184);t.Z.defaults.baseURL="https://ap-server-8qi1.onrender.com";const m=e=>{t.Z.defaults.headers.common.Authorization="Bearer ".concat(e)},u=()=>{const[e,a]=(0,c.useState)(!1),[s,u]=(0,c.useState)(!1),[p,h]=(0,c.useState)([]);(0,c.useEffect)((()=>{document.title="User JSON Panel | AP Education";(async()=>{console.log("token refresher");try{if(localStorage.getItem("isAdmin")){const e=await t.Z.post("admins/refresh/users/",{});m(e.data.newToken),u((e=>!0))}}catch(e){console.log(e)}})();(async()=>{a((e=>!0));try{if(s){const e=(await t.Z.get("/users/admin")).data.map((e=>{let{_id:a,name:s,age:t,mail:n,zoomMail:o,lang:r,course:c,crmId:i,contactId:l,successRate:d,temperament:m}=e;return{_id:a,name:s,age:t,mail:n,zoomMail:o,lang:r,course:c,crmId:i,contactId:l,successRate:d,temperament:m}}));h((a=>e))}}catch(e){console.error(e)}finally{a((e=>!1))}})()}),[s]);const g=i.Ry().shape({login:i.Z_().required("\u0412\u043a\u0430\u0436\u0456\u0442\u044c \u043b\u043e\u0433\u0456\u043d!"),password:i.Z_().required("\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c!")});return(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)(l.Kq,{children:[!s&&(0,d.jsx)(r.J9,{initialValues:{login:"",password:""},onSubmit:async(e,s)=>{let{resetForm:n}=s;a((e=>!0));try{const s=await t.Z.post("/admins/login/users",e);m(s.data.token),u((e=>!0)),localStorage.setItem("isAdmin",!0),n()}catch(o){console.error(o)}finally{a((e=>!1))}},validationSchema:g,children:(0,d.jsxs)(l.U0,{children:[(0,d.jsxs)(n.__,{children:[(0,d.jsx)(l.vD,{type:"text",name:"login",placeholder:"Login"}),(0,d.jsx)(l.aC,{component:"p",name:"login"})]}),(0,d.jsxs)(n.__,{children:[(0,d.jsx)(l.vD,{type:"password",name:"password",placeholder:"Password"}),(0,d.jsx)(l.aC,{component:"p",name:"password"})]}),(0,d.jsx)(l.Gh,{type:"submit",children:"\u0417\u0430\u043b\u043e\u0433\u0456\u043d\u0438\u0442\u0438\u0441\u044c"})]})}),p&&JSON.stringify(p),e&&(0,d.jsx)(o.a,{})]})})}}}]);
//# sourceMappingURL=User Json Panel page.a557cfc8.chunk.js.map