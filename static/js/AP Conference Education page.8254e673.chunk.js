"use strict";(self.webpackChunkap_education=self.webpackChunkap_education||[]).push([[5446],{95746:(e,s,t)=>{t.r(s),t.d(s,{default:()=>g});var n=t(1488),c=t(55294),a=t(49527),o=t(72791),r=t(96710),l=t(57689),d=t(91608),i=t(29901),u=t(3201),h=t(80184);const g=()=>{const[e,s]=(0,o.useState)(!1),[t,g]=(0,o.useState)(!1),[m,p]=(0,o.useState)(!1),[x,f]=(0,o.useState)(!0),[y,j]=(0,o.useState)(""),[k,w]=(0,o.useState)(!1),[b,v]=(0,o.useState)(""),[C,S,I,Z]=(0,l.bx)(),_=(0,o.useRef)(),[z,N]=(0,n.Z)(_),[O,D]=(0,n.Z)(document.body),[P,A]=(0,o.useState)([]),F=0===z&&O>D?O-300:O-z,R=(0,o.useRef)(null);return(0,o.useEffect)((()=>{document.title="AP Conference | AP Education",R.current=(0,d.io)("https://ap-chat-server.onrender.com/"),R.current.on("connected",((e,s)=>{console.log(e),console.log(s.time)}));return(async()=>{console.log("get");try{const e=(await c.Z.get("https://ap-chat-server.onrender.com/messages/room",{params:{room:Z}})).data.filter((e=>new Date(e.createdAt).getDate()===(new Date).getDate()));A((s=>e))}catch(e){console.log(e)}})(),R.current.on("message",(async e=>{A((s=>[...s,e]));await(async()=>{try{await c.Z.post("https://ap-chat-server.onrender.com/messages",e)}catch(s){console.log(s)}})()})),R.current.on("message:get",(async e=>{A((s=>[...s,e]))})),R.current.on("message:pinned",(async(e,s)=>{console.log(e),console.log(s),A((t=>(t[t.findIndex((s=>s.id===e))].isPinned=s.isPinned,[...t])))})),R.current.on("message:delete",(async e=>{console.log("delete fired"),A((s=>[...s.filter((s=>s.id!==e))]));await(async()=>{try{await c.Z.delete("https://ap-chat-server.onrender.com/messages/".concat(e))}catch(s){console.log(s)}})()})),R.current.on("message:deleted",(async e=>{console.log(e),A((s=>[...s.filter((s=>s.id!==e))]))})),()=>{R.current.off("connected"),R.current.off("message"),R.current.disconnect()}}),[I,Z]),(0,h.jsx)(h.Fragment,{children:(void 0===C.nmt_ukr||C.nmt_ukr[0]<10)&&!S?(0,h.jsx)(u.r,{children:(0,h.jsxs)(u.Rq,{children:["\u041f\u0440\u0438\u0432\u0456\u0442! ",(0,h.jsx)("br",{}),"\u041d\u0430\u0440\u0430\u0437\u0456 \u0443\u0440\u043e\u043a \u043d\u0430 \u0446\u0456\u0439 \u0441\u0442\u043e\u0440\u0456\u043d\u0446\u0456 \u043d\u0435 \u043f\u0440\u043e\u0432\u043e\u0434\u0438\u0442\u044c\u0441\u044f! \u041f\u0435\u0440\u0435\u0432\u0456\u0440\u0442\u0435, \u0447\u0438 \u0432\u0438 \u043f\u0435\u0440\u0435\u0439\u0448\u043b\u0438 \u0437\u0430 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u0438\u043c \u043f\u043e\u0441\u0438\u043b\u0430\u043d\u043d\u044f\u043c \u0430\u0431\u043e \u0441\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u0456\u0437\u043d\u0456\u0448\u0435."]})}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(u.QU,{style:{width:e&&O>D?"".concat(F,"px"):"100%"},children:[(0,h.jsx)(u.c6,{children:(0,h.jsx)(r.Z,{playing:!0,muted:!0,controls:!0,config:{youtube:{playerVars:{rel:0}}},style:{display:"block",position:"absolute",top:0,left:0},width:"100%",height:"100vh",url:C.nmt_ukr})}),(0,h.jsx)(u.KN,{className:x?"":"hidden",children:(0,h.jsx)(u.kd,{onClick:s=>{g((e=>!e)),j(e||m?e=>"kahoot":e=>"")},className:k&&"kahoot_open"===b?"animated":"",children:(0,h.jsx)(u.ev,{})})}),(0,h.jsx)(u.gF,{id:"no-transform",onClick:()=>{f((e=>!e))},children:x?(0,h.jsx)(u.cz,{}):(0,h.jsx)(u.IL,{})}),D>O&&(0,h.jsx)(u.rW,{ref:_,className:e?"shown":"hidden",style:"chat"===y?{zIndex:"2"}:{zIndex:"1"},children:(0,h.jsx)(i.e,{socket:R.current,messages:P,isChatOpen:e,currentUser:I})}),(0,h.jsx)(a.M,{sectionWidth:O,sectionHeight:D,isKahootOpen:t,isChatOpen:e,isOpenedLast:y})]}),O>=D&&(0,h.jsx)(u.rW,{ref:_,className:e?"shown":"hidden",style:"chat"===y?{zIndex:"2"}:{zIndex:"1"},children:(0,h.jsx)(i.e,{socket:R.current,messages:P,isChatOpen:e,currentUser:I})})]})})}}}]);
//# sourceMappingURL=AP Conference Education page.8254e673.chunk.js.map