"use strict";(self.webpackChunkap_education=self.webpackChunkap_education||[]).push([[2262],{19731:(n,t,a)=>{a.r(t),a.d(t,{default:()=>u});var o=a(55294),e=a(97723),s=a(3201),i=a(55705),r=a(17102),l=a(72791),c=a(8007),p=a(57689),d=a(93874),h=a(80184);const m=n=>{let{platformLink:t}=n;const[a,o]=(0,l.useState)("https://online.ap.education/school/"),e=(0,p.TH)().search.slice(1);return(0,l.useEffect)((()=>{o(t||e?e||t:"https://online.ap.education/school/")}),[t,e]),(0,h.jsxs)(d.ll,{children:[(0,h.jsx)(d.lp,{children:(0,h.jsx)(d.zY,{})}),(0,h.jsx)(d._$,{children:(0,h.jsx)("iframe",{id:"platform-window",title:"platform-pin",src:a,width:"100%",height:"100%",allow:"microphone *"})})]})},u=()=>{const[n,t]=(0,l.useState)(!1),[a,p]=(0,l.useState)({}),[d,u]=(0,l.useState)(""),[f,I]=(0,l.useState)("https://online.ap.education/");o.Z.defaults.baseURL="https://ap-server-8qi1.onrender.com",(0,l.useEffect)((()=>{document.title="My AP | AP Education";(async()=>{console.log("token refresher");try{const n=await o.Z.post("/users/refresh",{mail:localStorage.getItem("mail")});t((n=>!0)),console.log(73,n.data.user.platformToken),p((t=>({...n.data.user})));const a=n.data.user.lang.split("/");a.length>1&&!d?u(a[0]):a.length<=1&&u(n.data.user.lang)}catch(n){console.log(n)}})();(async()=>{const n={en1:a.platformToken?"https://online.ap.education/Account/LoginByToken?token=".concat(a.platformToken,"&redirectUrl=").concat(encodeURIComponent("https://online.ap.education/MarathonClass/?marathonId=37835&pupilId=".concat(a.pupilId,"&marathonLessonId=1143131"))):"https://online.ap.education/MarathonClass/?marathonId=37835&pupilId=".concat(a.pupilId,"&marathonLessonId=1143131"),en2:a.platformToken?"https://online.ap.education/Account/LoginByToken?token=".concat(a.platformToken,"&redirectUrl=").concat(encodeURIComponent("https://online.ap.education/MarathonClass/?marathonId=49509&pupilId=".concat(a.pupilId,"&marathonLessonId=1143132"))):"https://online.ap.education/MarathonClass/?marathonId=49509&pupilId=".concat(a.pupilId,"&marathonLessonId=1143132"),enkids1:a.platformToken?"https://online.ap.education/Account/LoginByToken?token=".concat(a.platformToken,"&redirectUrl=").concat(encodeURIComponent("https://online.ap.education/MarathonClass/?marathonId=40552&pupilId=".concat(a.pupilId,"&marathonLessonId=1143134"))):"https://online.ap.education/MarathonClass/?marathonId=40552&pupilId=".concat(a.pupilId,"&marathonLessonId=1143134"),enkids2:a.platformToken?"https://online.ap.education/Account/LoginByToken?token=".concat(a.platformToken,"&redirectUrl=").concat(encodeURIComponent("https://online.ap.education/MarathonClass/?marathonId=50784&pupilId=".concat(a.pupilId,"&marathonLessonId=1143133"))):"https://online.ap.education/MarathonClass/?marathonId=50784&pupilId=".concat(a.pupilId,"&marathonLessonId=1143133")},t="en"===d&&"1"===a.marathonNumber?"en1":"en"===d&&"2"===a.marathonNumber?"en2":"en"!==d||a.marathonNumber?"enkids"===d&&"1"===a.marathonNumber?"enkids1":"enkids"===d&&"2"===a.marathonNumber?"enkids2":"enkids"!==d||a.marathonNumber?"":"enkids2":"en2";console.log(n[t]),I((a=>n[t]))})()}),[d,a.pupilId,a.marathonNumber,a.platformToken]);const k=c.Ry().shape({mail:c.Z_().required("\u0412\u043a\u0430\u0436\u0456\u0442\u044c \u043f\u043e\u0448\u0442\u0443, \u0437\u0430 \u044f\u043a\u043e\u044e \u0432\u0438 \u0437\u0430\u0440\u0435\u0454\u0441\u0442\u0440\u043e\u0432\u0430\u043d\u0456 \u043d\u0430 \u043d\u0430\u0448\u0456\u0439 \u043f\u043b\u0430\u0442\u0444\u043e\u0440\u043c\u0456!"),password:c.Z_().required("\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c, \u044f\u043a\u0438\u0439 \u0432\u0438 \u0432\u0438\u043a\u043e\u0440\u0438\u0441\u0442\u043e\u0432\u0443\u0454\u0442\u0435 \u0434\u043b\u044f \u0432\u0445\u043e\u0434\u0443 \u043d\u0430 \u043d\u0430\u0448\u0443 \u043f\u043b\u0430\u0442\u0444\u043e\u0440\u043c\u0443!")});return(0,h.jsx)(s.QU,{children:n?(0,h.jsx)(m,{platformLink:f}):(0,h.jsx)(i.J9,{initialValues:{mail:"",password:""},onSubmit:async(n,a)=>{let{resetForm:e}=a;n.mail=n.mail.toLowerCase().trim().trimStart(),n.password=n.password.trim().trimStart();try{const a=await o.Z.post("/users/login",n);console.log(a),s=a.data.token,o.Z.defaults.headers.common.Authorization="Bearer ".concat(s),t((n=>!0)),p((n=>({...a.data.user})));const i=a.data.user.lang.split("/");i.length>1&&u(i[0]),localStorage.setItem("mail",n.mail),e()}catch(i){console.error(i)}var s},validationSchema:k,children:(0,h.jsxs)(r.U0,{children:[(0,h.jsx)(e.hQ,{}),(0,h.jsx)(e.T$,{}),(0,h.jsxs)(s.YA,{children:["\u041f\u0440\u0438\u0432\u0456\u0442!",(0,h.jsx)("br",{}),"\u0426\u044f \u0441\u0442\u043e\u0440\u0456\u043d\u043a\u0430 \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0430 \u0434\u043b\u044f \u043d\u0435\u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u043d\u0438\u0445 \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0456\u0432. \u0410\u043b\u0435 \u044f\u043a\u0449\u043e \u0432\u0438 \u043c\u0430\u0454\u0442\u0435 \u0434\u043e\u0441\u0442\u0443\u043f \u0434\u043e \u043d\u0430\u0448\u043e\u0457 \u043f\u043b\u0430\u0442\u0444\u043e\u0440\u043c\u0438, \u0442\u043e \u0439 \u0434\u043e \u0446\u0456\u0454\u0457 \u0441\u0442\u043e\u0440\u0456\u043d\u043a\u0438 \u0442\u0435\u0436. \u0412\u0432\u0435\u0434\u0456\u0442\u044c \u0434\u0430\u043d\u0456, \u044f\u043a\u0456 \u0432\u0438 \u0432\u0438\u043a\u043e\u0440\u0438\u0441\u0442\u043e\u0432\u0443\u0454\u0442\u0435 \u0434\u043b\u044f \u0432\u0445\u043e\u0434\u0443 \u043d\u0430 \u043f\u043b\u0430\u0442\u0444\u043e\u0440\u043c\u0443."]}),(0,h.jsxs)(e.__,{children:[(0,h.jsx)(r.vD,{type:"text",name:"mail",placeholder:"Login"}),(0,h.jsx)(r.aC,{component:"p",name:"mail",type:"email"})]}),(0,h.jsxs)(e.__,{children:[(0,h.jsx)(r.vD,{type:"password",name:"password",placeholder:"Password"}),(0,h.jsx)(r.aC,{component:"p",name:"password"})]}),(0,h.jsx)(r.Gh,{type:"submit",children:"\u0423\u0432\u0456\u0439\u0442\u0438"})]})})})}},93874:(n,t,a)=>{a.d(t,{_$:()=>d,ll:()=>u,lp:()=>h,zY:()=>m});var o,e,s,i,r,l=a(30168),c=a(96739),p=a(76487);const d=p.ZP.div(o||(o=(0,l.Z)(["\n  height: 100vh;\n  width: 100vw;\n\n  overflow: hidden;\n\n  position: absolute;\n  top: 0;\n  left: 0;\n\n  font-family: var(--streams-font-family);\n\n  transition: transform var(--animation-global);\n\n  &.hidden {\n    transform: translateX(-100%);\n  }\n\n  &.shown {\n    transform: translateX(0);\n  }\n"]))),h=p.ZP.div(e||(e=(0,l.Z)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  width: calc(100% - 17.5px);\n  height: 64px;\n  z-index: 5;\n\n  background-color: white;\n"]))),m=(0,p.ZP)(c.TR)(s||(s=(0,l.Z)(["\n  display: block;\n  flex-shrink: 0;\n  width: 173px;\n  height: 34px;\n\n  margin: 0 auto;\n"]))),u=p.ZP.div(i||(i=(0,l.Z)(["\n  width: 100%;\n  height: 100%;\n"])));p.ZP.video(r||(r=(0,l.Z)(["\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  object-fit: cover;\n\n  width: 100%;\n  height: calc(100% - 64px);\n"])))}}]);
//# sourceMappingURL=AP Conference Test Page.70171682.chunk.js.map