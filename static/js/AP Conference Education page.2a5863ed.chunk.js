"use strict";(self.webpackChunkap_education=self.webpackChunkap_education||[]).push([[5446],{95746:(e,t,s)=>{s.r(t),s.d(t,{default:()=>g});var n=s(1488),c=s(55294),a=s(49527),o=s(72791),r=s(96710),d=s(57689),i=s(91608),l=s(29901),u=s(3201),h=s(80184);const g=()=>{const[e,t]=(0,o.useState)(!1),[s,g]=(0,o.useState)(!1),[m,p]=(0,o.useState)(!1),[x,f]=(0,o.useState)(!0),[y,j]=(0,o.useState)(""),[k,w]=(0,o.useState)(!1),[C,b]=(0,o.useState)(""),[v,S,I,Z]=(0,d.bx)(),_=(0,o.useRef)(),[z,N]=(0,n.Z)(_),[O,P]=(0,n.Z)(document.body),[A,D]=(0,o.useState)([]),E=0===z&&O>P?O-300:O-z,F=(0,o.useRef)(null);return(0,o.useEffect)((()=>{document.title="AP Conference | AP Education",F.current=(0,i.io)("https://ap-chat-server.onrender.com/"),F.current.on("connected",((e,t)=>{console.log(e),console.log(t.time)}));return(async()=>{console.log("get");try{const e=(await c.Z.get("https://ap-chat-server.onrender.com/messages/room",{params:{room:Z}})).data.filter((e=>new Date(e.createdAt).getDate()===(new Date).getDate()));D((t=>e))}catch(e){console.log(e)}})(),F.current.on("message",(async e=>{D((t=>[...t,e]));await(async()=>{try{await c.Z.post("https://ap-chat-server.onrender.com/messages",e)}catch(t){console.log(t)}})()})),F.current.on("message:get",(async e=>{D((t=>[...t,e]))})),F.current.on("message:pinned",(async(e,t)=>{console.log(e),console.log(t),D((s=>(s[s.findIndex((t=>t.id===e))].isPinned=t.isPinned,[...s])))})),F.current.on("message:delete",(async e=>{console.log("delete fired"),D((t=>[...t.filter((t=>t.id!==e))]));await(async()=>{try{await c.Z.delete("https://ap-chat-server.onrender.com/messages/".concat(e))}catch(t){console.log(t)}})()})),F.current.on("message:deleted",(async e=>{console.log(e),D((t=>[...t.filter((t=>t.id!==e))]))})),()=>{F.current.off("connected"),F.current.off("message"),F.current.disconnect()}}),[I,Z]),(0,h.jsx)(h.Fragment,{children:(void 0===v.nmt_ukr||v.nmt_ukr[0]<10)&&!S?(0,h.jsx)(u.r,{children:(0,h.jsxs)(u.Rq,{children:["\u041f\u0440\u0438\u0432\u0456\u0442! ",(0,h.jsx)("br",{}),"AP Education Center \u043d\u0430 \u043a\u0430\u043d\u0456\u043a\u0443\u043b\u0430\u0445 \u0434\u043e 06.01. \u0413\u0430\u0440\u043d\u0438\u0445 \u0441\u0432\u044f\u0442!"]})}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(u.QU,{style:{width:e&&O>P?"".concat(E,"px"):"100%"},children:[(0,h.jsx)(u.c6,{children:(0,h.jsx)(r.Z,{playing:!0,muted:!0,controls:!0,config:{youtube:{playerVars:{rel:0}}},style:{display:"block",position:"absolute",top:0,left:0},width:"100%",height:"100vh",url:v.nmt_ukr})}),(0,h.jsx)(u.KN,{className:x?"":"hidden",children:(0,h.jsx)(u.kd,{onClick:t=>{g((e=>!e)),j(e||m?e=>"kahoot":e=>"")},className:k&&"kahoot_open"===C?"animated":"",children:(0,h.jsx)(u.ev,{})})}),(0,h.jsx)(u.gF,{id:"no-transform",onClick:()=>{f((e=>!e))},children:x?(0,h.jsx)(u.cz,{}):(0,h.jsx)(u.IL,{})}),P>O&&(0,h.jsx)(u.rW,{ref:_,className:e?"shown":"hidden",style:"chat"===y?{zIndex:"2"}:{zIndex:"1"},children:(0,h.jsx)(l.e,{socket:F.current,messages:A,isChatOpen:e,currentUser:I})}),(0,h.jsx)(a.M,{sectionWidth:O,sectionHeight:P,isKahootOpen:s,isChatOpen:e,isOpenedLast:y})]}),O>=P&&(0,h.jsx)(u.rW,{ref:_,className:e?"shown":"hidden",style:"chat"===y?{zIndex:"2"}:{zIndex:"1"},children:(0,h.jsx)(l.e,{socket:F.current,messages:A,isChatOpen:e,currentUser:I})})]})})}}}]);
//# sourceMappingURL=AP Conference Education page.2a5863ed.chunk.js.map