{"version":3,"file":"static/js/Speakings teacher page.c3e8427b.chunk.js","mappings":"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","sources":["pages/Streams/Speakings.jsx"],"sourcesContent":["import axios from 'axios';\nimport { StreamsBackgroundWrapper } from 'components/BackgroundWrapper/BackgroundWrappers';\nimport { Label } from 'components/LeadForm/LeadForm.styled';\nimport { Loader } from 'components/SharedLayout/Loaders/Loader';\nimport { LoaderWrapper } from 'components/SharedLayout/Loaders/Loader.styled';\nimport { Formik } from 'formik';\nimport { useLayoutEffect, useState } from 'react';\nimport { Outlet } from 'react-router-dom';\nimport * as yup from 'yup';\nimport {\n  LoginInput,\n  LoginInputNote,\n  LoginLogo,\n  StreamAuthText,\n  StreamAuthTextHello,\n} from '../../components/Stream/Stream.styled';\nimport { AdminFormBtn, LoginForm } from './AdminPanel/AdminPanel.styled';\n\naxios.defaults.baseURL = 'https://ap-server-8qi1.onrender.com';\n\nconst setAuthToken = token => {\n  axios.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n};\n\nconst Speakings = () => {\n  const [isLoading, setIsLoading] = useState(false);\n  const [currentUser, setCurrentUser] = useState({});\n  const [isUserLogged, setIsUserLogged] = useState(false);\n\n  const wakeupRequest = async () => {\n    try {\n      const wake = await axios.get('/');\n      console.log(wake.data);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const initialLoginValues = {\n    login: '',\n    password: '',\n  };\n\n  const loginSchema = yup.object().shape({\n    login: yup.string().required('Вкажіть логін!'),\n    password: yup.string().required('Введіть пароль!'),\n  });\n\n  const handleLoginSubmit = async (values, { resetForm }) => {\n    values.login = values.login.toLowerCase().trim().trimStart();\n    values.password = values.password.trim().trimStart();\n    try {\n      const response = await axios.post('/teachers/login', values);\n      setAuthToken(response.data.token);\n      setIsUserLogged(isLogged => (isLogged = true));\n      setCurrentUser(currentUser => (currentUser = response.data.teacher));\n      localStorage.setItem('teacherLogin', values.login);\n      resetForm();\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  useLayoutEffect(() => {\n    wakeupRequest();\n\n    const refreshToken = async () => {\n      console.log('token refresher');\n      try {\n        setIsLoading(true);\n        const res = await axios.post('/teachers/refresh', {\n          login: localStorage.getItem('teacherLogin'),\n        });\n        setCurrentUser(currentUser => (currentUser = res.data.teacher));\n        setIsUserLogged(isLogged => (isLogged = true));\n      } catch (error) {\n        console.log(error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    refreshToken();\n  }, []);\n\n  return (\n    <>\n      <StreamsBackgroundWrapper>\n        {!isUserLogged ? (\n          <Formik\n            initialValues={initialLoginValues}\n            onSubmit={handleLoginSubmit}\n            validationSchema={loginSchema}\n          >\n            <LoginForm>\n              <LoginLogo />\n              <StreamAuthText>\n                <StreamAuthTextHello>Привіт!</StreamAuthTextHello>\n                Це сторінка для викладачів. <br />\n                Якщо ви викладач, введіть ваші логін та пароль.\n              </StreamAuthText>\n              <Label>\n                <LoginInput type=\"text\" name=\"login\" placeholder=\"Login\" />\n                <LoginInputNote component=\"p\" name=\"login\" />\n              </Label>\n              <Label>\n                <LoginInput\n                  type=\"password\"\n                  name=\"password\"\n                  placeholder=\"Password\"\n                />\n                <LoginInputNote component=\"p\" name=\"password\" />\n              </Label>\n              <AdminFormBtn type=\"submit\">Увійти</AdminFormBtn>\n            </LoginForm>\n          </Formik>\n        ) : (\n          <Outlet context={[currentUser]} />\n        )}\n\n        {isLoading && (\n          <LoaderWrapper>\n            <Loader />\n          </LoaderWrapper>\n        )}\n      </StreamsBackgroundWrapper>\n    </>\n  );\n};\n\nexport default Speakings;\n"],"names":["axios","Speakings","isLoading","setIsLoading","useState","currentUser","setCurrentUser","isUserLogged","setIsUserLogged","loginSchema","yup","shape","login","required","password","useLayoutEffect","async","wake","console","log","data","error","wakeupRequest","res","localStorage","getItem","teacher","isLogged","refreshToken","_jsx","_Fragment","children","_jsxs","StreamsBackgroundWrapper","Outlet","context","Formik","initialValues","onSubmit","values","_ref","resetForm","toLowerCase","trim","trimStart","response","token","concat","setItem","validationSchema","LoginForm","LoginLogo","StreamAuthText","StreamAuthTextHello","Label","LoginInput","type","name","placeholder","LoginInputNote","component","AdminFormBtn","LoaderWrapper","Loader"],"sourceRoot":""}