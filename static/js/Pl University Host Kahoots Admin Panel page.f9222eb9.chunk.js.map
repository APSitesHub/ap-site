{"version":3,"file":"static/js/Pl University Host Kahoots Admin Panel page.f9222eb9.chunk.js","mappings":"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","sources":["pages/Streams/HostKahootAdminPanel/UniHostKahootAdminPanel.jsx"],"sourcesContent":["import axios from 'axios';\nimport { Label } from 'components/LeadForm/LeadForm.styled';\nimport { Loader } from 'components/SharedLayout/Loaders/Loader';\nimport { Formik } from 'formik';\nimport { useEffect, useState } from 'react';\nimport * as yup from 'yup';\nimport { EWSPALogisticsKahootForm } from '../KahootAdminPanel/EWSPALogisticsKahootForm';\nimport { EWSPAPrepKahootForm } from '../KahootAdminPanel/EWSPAPrepKahootForm';\nimport {\n  AdminFormBtn,\n  AdminInput,\n  AdminInputNote,\n  AdminPanelSection,\n  KahootFormBox,\n  KahootLvlBtn,\n  KahootLvlBtnBox,\n  LoginForm,\n} from '../KahootAdminPanel/KahootAdminPanel.styled';\nimport { MeritoLogisticsKahootForm } from '../KahootAdminPanel/MeritoLogisticsKahootForm';\nimport { MeritoPrepKahootForm } from '../KahootAdminPanel/MeritoPrepKahootForm';\nimport { PedagogiumLogisticsKahootForm } from '../KahootAdminPanel/PedagogiumLogisticsKahootForm';\nimport { PedagogiumPrepKahootForm } from '../KahootAdminPanel/PedagogiumPrepKahootForm';\nimport { WSBMIRLogisticsKahootForm } from '../KahootAdminPanel/WSBMIRLogisticsKahootForm';\nimport { WSBMIRPrepKahootForm } from '../KahootAdminPanel/WSBMIRPrepKahootForm';\nimport { WSTIJOLogisticsKahootForm } from '../KahootAdminPanel/WSTIJOLogisticsKahootForm';\nimport { WSTIJOPrepKahootForm } from '../KahootAdminPanel/WSTIJOPrepKahootForm';\n\naxios.defaults.baseURL = 'https://ap-server-8qi1.onrender.com';\nconst setAuthToken = token => {\n  axios.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n};\n\nconst UniHostKahootAdminPanel = () => {\n  const [isLoading, setIsLoading] = useState(false);\n  const [isUserAdmin, setIsUserAdmin] = useState(false);\n  const [levels, setLevels] = useState([]);\n  const destination = '/unihostkahoots';\n\n  useEffect(() => {\n    document.title = 'Pl University Host Kahoot Admin Panel | AP Education';\n\n    const refreshToken = async () => {\n      console.log('token refresher');\n      try {\n        if (localStorage.getItem('isAdmin')) {\n          const res = await axios.post('admins/refresh/kahoot/', {});\n          console.log(res);\n          setIsUserAdmin(isAdmin => (isAdmin = true));\n          setAuthToken(res.data.newToken);\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    };\n    refreshToken();\n  }, [isUserAdmin]);\n\n  const initialLoginValues = {\n    login: '',\n    password: '',\n  };\n\n  const loginSchema = yup.object().shape({\n    login: yup.string().required('Вкажіть логін!'),\n    password: yup.string().required('Введіть пароль!'),\n  });\n\n  const handleBtnClick = lvl => {\n    levels.includes(lvl) ? setLevels(levels => [...levels].filter(level => level !== lvl)) : setLevels(levels => [...levels, lvl]);\n  };\n\n  const handleLoginSubmit = async (values, { resetForm }) => {\n    setIsLoading(isLoading => (isLoading = true));\n\n    try {\n      const response = await axios.post('/admins/login/kahoot', values);\n      setAuthToken(response.data.token);\n      setIsUserAdmin(isAdmin => (isAdmin = true));\n      localStorage.setItem('isAdmin', true);\n      resetForm();\n    } catch (error) {\n      console.error(error);\n    } finally {\n      setIsLoading(isLoading => (isLoading = false));\n    }\n  };\n\n  return (\n    <>\n      <AdminPanelSection>\n        {!isUserAdmin && (\n          <Formik initialValues={initialLoginValues} onSubmit={handleLoginSubmit} validationSchema={loginSchema}>\n            <LoginForm>\n              <Label>\n                <AdminInput type=\"text\" name=\"login\" placeholder=\"Login\" />\n                <AdminInputNote component=\"p\" name=\"login\" />\n              </Label>\n              <Label>\n                <AdminInput type=\"password\" name=\"password\" placeholder=\"Password\" />\n                <AdminInputNote component=\"p\" name=\"password\" />\n              </Label>\n              <AdminFormBtn type=\"submit\">Залогінитись</AdminFormBtn>\n            </LoginForm>\n          </Formik>\n        )}\n\n        {isUserAdmin && (\n          <KahootLvlBtnBox>\n            <KahootLvlBtn onClick={() => handleBtnClick('pedagogium_logistics')}>Pedagogium Logistics</KahootLvlBtn>\n            <KahootLvlBtn onClick={() => handleBtnClick('pedagogium_prep')}>Pedagogium Prep</KahootLvlBtn>\n            <KahootLvlBtn onClick={() => handleBtnClick('wstijo_logistics')}>WSTIJO Logistics</KahootLvlBtn>\n            <KahootLvlBtn onClick={() => handleBtnClick('wstijo_prep')}>WSTIJO Prep</KahootLvlBtn>\n            <KahootLvlBtn onClick={() => handleBtnClick('wsbmir_logistics')}>WSBMIR Logistics</KahootLvlBtn>\n            <KahootLvlBtn onClick={() => handleBtnClick('wsbmir_prep')}>WSBMIR Prep</KahootLvlBtn>\n            <KahootLvlBtn onClick={() => handleBtnClick('ewspa_logistics')}>EWSPA Logistics</KahootLvlBtn>\n            <KahootLvlBtn onClick={() => handleBtnClick('ewspa_prep')}>EWSPA Prep</KahootLvlBtn>\n            <KahootLvlBtn onClick={() => handleBtnClick('merito_logistics')}>Merito Logistics</KahootLvlBtn>\n            <KahootLvlBtn onClick={() => handleBtnClick('merito_prep')}>Merito Prep</KahootLvlBtn>\n          </KahootLvlBtnBox>\n        )}\n        <KahootFormBox>\n          {levels.includes('pedagogium_logistics') && <PedagogiumLogisticsKahootForm destination={destination} />}\n          {levels.includes('pedagogium_prep') && <PedagogiumPrepKahootForm destination={destination} />}\n          {levels.includes('wstijo_logistics') && <WSTIJOLogisticsKahootForm destination={destination} />}\n          {levels.includes('wstijo_prep') && <WSTIJOPrepKahootForm destination={destination} />}\n          {levels.includes('wsbmir_logistics') && <WSBMIRLogisticsKahootForm destination={destination} />}\n          {levels.includes('wsbmir_prep') && <WSBMIRPrepKahootForm destination={destination} />}\n          {levels.includes('ewspa_logistics') && <EWSPALogisticsKahootForm destination={destination} />}\n          {levels.includes('ewspa_prep') && <EWSPAPrepKahootForm destination={destination} />}\n          {levels.includes('merito_logistics') && <MeritoLogisticsKahootForm destination={destination} />}\n          {levels.includes('merito_prep') && <MeritoPrepKahootForm destination={destination} />}\n        </KahootFormBox>\n        {isLoading && <Loader />}\n      </AdminPanelSection>\n    </>\n  );\n};\n\nexport default UniHostKahootAdminPanel;\n"],"names":["axios","setAuthToken","token","concat","UniHostKahootAdminPanel","isLoading","setIsLoading","useState","isUserAdmin","setIsUserAdmin","levels","setLevels","destination","useEffect","document","title","async","console","log","localStorage","getItem","res","isAdmin","data","newToken","error","refreshToken","loginSchema","yup","shape","login","required","password","handleBtnClick","lvl","includes","filter","level","_jsx","_Fragment","children","_jsxs","AdminPanelSection","Formik","initialValues","onSubmit","values","_ref","resetForm","response","setItem","validationSchema","LoginForm","Label","AdminInput","type","name","placeholder","AdminInputNote","component","AdminFormBtn","KahootLvlBtnBox","KahootLvlBtn","onClick","KahootFormBox","PedagogiumLogisticsKahootForm","PedagogiumPrepKahootForm","WSTIJOLogisticsKahootForm","WSTIJOPrepKahootForm","WSBMIRLogisticsKahootForm","WSBMIRPrepKahootForm","EWSPALogisticsKahootForm","EWSPAPrepKahootForm","MeritoLogisticsKahootForm","MeritoPrepKahootForm","Loader"],"sourceRoot":""}