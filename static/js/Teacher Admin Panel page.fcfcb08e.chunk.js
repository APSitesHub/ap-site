"use strict";(self.webpackChunkap_education=self.webpackChunkap_education||[]).push([[2946],{43685:(n,e,t)=>{t.r(e),t.d(e,{default:()=>X});var r,o,a,i,s,l,d,c,p,x,m,h,g,u,j,w,Z,f,b,y,_,v=t(55294),P=t(60091),S=t(97723),k=t(8313),E=t(55705),q=t(72791),F=t(8007),A=t(30168),D=t(37269),L=t(76487);const C=L.ZP.section(r||(r=(0,A.Z)(["\n  height: max-content;\n  padding: 30px 20px;\n  display: flex;\n  align-items: flex-start;\n\n  gap: 30px;\n"]))),T=(0,L.ZP)(E.l0)(o||(o=(0,A.Z)(["\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n\n  display: flex;\n  flex-direction: column;\n  gap: 35px;\n"]))),z=(0,L.ZP)(E.l0)(a||(a=(0,A.Z)(["\n  margin: 0 auto;\n\n  position: sticky;\n  top: 50%;\n\n  transform: translateY(-50%);\n\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n"]))),R=(0,L.ZP)(E.l0)(i||(i=(0,A.Z)(["\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: 100%;\n  max-width: 400px;\n\n  background-color: white;\n  padding: 24px;\n  border-radius: 24px;\n\n  display: flex;\n  flex-direction: column;\n  gap: 15px;\n"]))),I=(0,L.ZP)(S.Mg)(s||(s=(0,A.Z)(["\n  margin: 0 auto;\n  height: 48px;\n  padding: 0;\n"]))),J=(0,L.ZP)(S.II)(l||(l=(0,A.Z)(["\n  width: 240px;\n  padding: 8px 10px;\n  font-size: 16px;\n  height: 40px;\n  -webkit-text-stroke: 0px;\n\n  border: 2px solid var(--main-color);\n\n  &.error {\n    border-color: red;\n  }\n\n  @media screen and (min-width: 768px) {\n    width: 360px;\n  }\n"]))),U=(0,L.ZP)(S.r2)(d||(d=(0,A.Z)(["\n  color: var(--main-color);\n  font-size: 12px;\n  font-weight: 500;\n  position: static;\n  max-width: 240px;\n\n  @media screen and (min-width: 768px) {\n    max-width: 360px;\n  }\n"]))),V=L.ZP.table(c||(c=(0,A.Z)(["\n  max-width: 50vw;\n  min-height: 80vh;\n  margin: 0 auto;\n\n  table-layout: auto;\n  width: 100%;\n\n  text-align: center;\n  border: 1px solid #000;\n  border-collapse: collapse;\n"]))),M=L.ZP.caption(p||(p=(0,A.Z)(["\n  caption-side: top;\n  margin-bottom: 20px;\n"]))),Y=(L.ZP.span(x||(x=(0,A.Z)(["\n  font-size: 11px;\n"]))),L.ZP.tr(m||(m=(0,A.Z)(["\n  border: 1px solid #000;\n"])))),B=L.ZP.th(h||(h=(0,A.Z)(["\n  border: 1px solid #000;\n  padding: 3px;\n"]))),G=(L.ZP.div(g||(g=(0,A.Z)(["\n  display: flex;\n  align-items: center;\n  gap: 6px;\n\n  position: relative;\n"]))),L.ZP.td(u||(u=(0,A.Z)(["\n  border: 1px solid #000;\n  padding: 3px;\n  height: 3em;\n\n  &.last-name {\n    text-transform: capitalize;\n  }\n\n  &.attention {\n    color: red;\n  }\n\n  &.error {\n    background-color: #ff0000;\n  }\n"])))),H=((0,L.ZP)(G)(j||(j=(0,A.Z)(["\n  text-align: start;\n  padding-left: 8px;\n  max-width: 50vw;\n"]))),L.ZP.button(w||(w=(0,A.Z)(["\n  background-color: transparent;\n  border: 1px solid var(--accent-color);\n  border-radius: 5px;\n"])))),K=L.ZP.button(Z||(Z=(0,A.Z)(["\n  background-color: transparent;\n  border: 1px solid var(--main-color);\n  border-radius: 5px;\n"])));(0,L.ZP)(K)(f||(f=(0,A.Z)(["\n  &.banned {\n    border-color: #023020;\n  }\n  &.not_banned {\n    border-color: #8b0000;\n  }\n"]))),(0,L.ZP)(D.r)(b||(b=(0,A.Z)(["\n  width: 18px;\n  height: 12px;\n\n  color: #000;\n\n  transition: color var(--animation-global);\n\n  &:hover {\n    color: var(--main-color);\n  }\n"]))),L.ZP.div(y||(y=(0,A.Z)(["\n  position: absolute;\n  top: 100%;\n  left: 0;\n"]))),L.ZP.button(_||(_=(0,A.Z)(["\n  width: 100%;\n  text-transform: capitalize;\n"])));var N=t(13084),O=t(80184);v.Z.defaults.baseURL="https://ap-server-8qi1.onrender.com";const Q=n=>{let{teacherToEdit:e,closeEditForm:t}=n;const[r,o]=(0,q.useState)(!1),a={name:e.name,login:e.login,password:e.password},i=F.Ry().shape({name:F.Z_().required("\u0406\u043c'\u044f - \u043e\u0431\u043e\u0432'\u044f\u0437\u043a\u043e\u0432\u0435 \u043f\u043e\u043b\u0435"),login:F.Z_().required("\u041b\u043e\u0433\u0456\u043d - \u043e\u0431\u043e\u0432'\u044f\u0437\u043a\u043e\u0432\u0435 \u043f\u043e\u043b\u0435!"),password:F.Z_().required("\u041f\u0430\u0440\u043e\u043b\u044c - \u043e\u0431\u043e\u0432'\u044f\u0437\u043a\u043e\u0432\u0435 \u043f\u043e\u043b\u0435!")});return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(E.J9,{initialValues:a,onSubmit:async(n,r)=>{let{resetForm:a}=r;o((n=>!0)),n.name=n.name.trim().trimStart(),n.login=n.login.toLowerCase().trim().trimStart(),n.password=n.password.trim().trimStart();try{const r=await v.Z.put("/teachers/".concat(e._id),n);console.log(r),a(),alert("\u0422\u0456\u0447\u0435\u0440\u0430 \u0432\u0456\u0434\u0440\u0435\u0434\u0430\u0433\u043e\u0432\u0430\u043d\u043e"),t()}catch(i){console.error(i),alert("\u0414\u0435\u0441\u044c \u044f\u043a\u0430\u0441\u044c \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430 - \u043a\u043b\u0430\u0446\u0430\u0439 F12, \u0440\u043e\u0431\u0438 \u0441\u043a\u0440\u0456\u043d \u043a\u043e\u043d\u0441\u043e\u043b\u0456, \u0432\u0456\u0434\u043f\u0440\u0430\u0432\u043b\u044f\u0439 \u041a\u0438\u0440\u0438\u043b\u0443")}finally{o((n=>!1))}},validationSchema:i,children:(0,O.jsxs)(R,{children:[(0,O.jsx)(N.xA,{children:e.name}),(0,O.jsxs)(S.__,{children:[(0,O.jsx)(J,{type:"text",name:"name",placeholder:"\u041f\u0440\u0456\u0437\u0432\u0438\u0449\u0435 \u0442\u0430 \u0456\u043c'\u044f"}),(0,O.jsx)(U,{component:"p",name:"name"})]}),(0,O.jsxs)(S.__,{children:[(0,O.jsx)(J,{type:"text",name:"login",placeholder:"\u041b\u043e\u0433\u0456\u043d"}),(0,O.jsx)(U,{component:"p",name:"login"})]}),(0,O.jsxs)(S.__,{children:[(0,O.jsx)(J,{type:"text",name:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c"}),(0,O.jsx)(U,{component:"p",name:"password"})]}),(0,O.jsx)(I,{type:"submit",children:"\u041f\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0438 \u0437\u043c\u0456\u043d\u0438"})]})}),r&&(0,O.jsx)(k.a,{})]})};v.Z.defaults.baseURL="https://ap-server-8qi1.onrender.com";const W=n=>{v.Z.defaults.headers.common.Authorization="Bearer ".concat(n)},X=()=>{const[n,e]=(0,q.useState)(!1),[t,r]=(0,q.useState)(!1),[o,a]=(0,q.useState)([]),[i,s]=(0,q.useState)(!1),[l,d]=(0,q.useState)({}),[c,p]=(0,q.useState)(!1);(0,q.useEffect)((()=>{document.title="Teacher Admin Panel | AP Education";(async()=>{console.log("token refresher");try{if(localStorage.getItem("isAdmin")){const n=await v.Z.post("admins/refresh/teachers/",{});W(n.data.newToken),console.log(n),r((n=>!0))}}catch(n){console.log(n)}})();(async()=>{try{if(t){const n=await v.Z.get("/teachers/");a((e=>[...n.data.reverse()]))}}catch(n){console.error(n)}})();const n=n=>{"Escape"===n.code&&i&&g()};return window.addEventListener("keydown",n),()=>{window.removeEventListener("keydown",n)}}),[t,i,c]);const x=F.Ry().shape({login:F.Z_().required("\u0412\u043a\u0430\u0436\u0456\u0442\u044c \u043b\u043e\u0433\u0456\u043d!"),password:F.Z_().required("\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c!")}),m=n=>{if(n){const e=n.split(".");return e.length>2?Date.parse([e[1],e[0],e[2]].join("/")):Date.parse(n)}},h=F.Ry().shape({name:F.Z_().required("\u0406\u043c'\u044f - \u043e\u0431\u043e\u0432'\u044f\u0437\u043a\u043e\u0432\u0435 \u043f\u043e\u043b\u0435"),login:F.Z_().required("\u041b\u043e\u0433\u0456\u043d - \u043e\u0431\u043e\u0432'\u044f\u0437\u043a\u043e\u0432\u0435 \u043f\u043e\u043b\u0435!"),password:F.Z_().required("\u041f\u0430\u0440\u043e\u043b\u044c - \u043e\u0431\u043e\u0432'\u044f\u0437\u043a\u043e\u0432\u0435 \u043f\u043e\u043b\u0435!")}),g=n=>{s(!1)};return(0,O.jsx)(O.Fragment,{children:(0,O.jsxs)(C,{children:[!t&&(0,O.jsx)(E.J9,{initialValues:{login:"",password:""},onSubmit:async(n,t)=>{let{resetForm:o}=t;e((n=>!0));try{const t=await v.Z.post("/admins/login/teachers",n);W(t.data.token),r((n=>!0)),localStorage.setItem("isAdmin",!0),o()}catch(a){console.error(a)}finally{e((n=>!1))}},validationSchema:x,children:(0,O.jsxs)(T,{children:[(0,O.jsxs)(S.__,{children:[(0,O.jsx)(J,{type:"text",name:"login",placeholder:"Login"}),(0,O.jsx)(U,{component:"p",name:"login"})]}),(0,O.jsxs)(S.__,{children:[(0,O.jsx)(J,{type:"password",name:"password",placeholder:"Password"}),(0,O.jsx)(U,{component:"p",name:"password"})]}),(0,O.jsx)(I,{type:"submit",children:"\u0417\u0430\u043b\u043e\u0433\u0456\u043d\u0438\u0442\u0438\u0441\u044c"})]})}),t&&(0,O.jsx)(E.J9,{initialValues:{name:"",login:"",password:""},onSubmit:async(n,t)=>{let{resetForm:r}=t;e((n=>!0)),n.name=n.name.trim().trimStart(),n.login=n.login.toLowerCase().trim().trimStart(),n.password=n.password.trim().trimStart();try{const t=await v.Z.post("/teachers/new",n);console.log(t),r(),alert("\u042e\u0437\u0435\u0440\u0430 \u0434\u043e\u0434\u0430\u043d\u043e"),p((n=>!n))}catch(o){console.error(o),alert("\u0414\u0435\u0441\u044c \u044f\u043a\u0430\u0441\u044c \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430 - \u043a\u043b\u0430\u0446\u0430\u0439 F12, \u0440\u043e\u0431\u0438 \u0441\u043a\u0440\u0456\u043d \u043a\u043e\u043d\u0441\u043e\u043b\u0456, \u0432\u0456\u0434\u043f\u0440\u0430\u0432\u043b\u044f\u0439 \u041a\u0438\u0440\u0438\u043b\u0443")}finally{e((n=>!1))}},validationSchema:h,children:(0,O.jsxs)(z,{children:[(0,O.jsxs)(S.__,{children:[(0,O.jsx)(J,{type:"text",name:"name",placeholder:"\u041f\u0440\u0456\u0437\u0432\u0438\u0449\u0435 \u0442\u0430 \u0456\u043c'\u044f"}),(0,O.jsx)(U,{component:"p",name:"name"})]}),(0,O.jsxs)(S.__,{children:[(0,O.jsx)(J,{type:"text",name:"login",placeholder:"\u041b\u043e\u0433\u0456\u043d"}),(0,O.jsx)(U,{component:"p",name:"login"})]}),(0,O.jsxs)(S.__,{children:[(0,O.jsx)(J,{type:"text",name:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c"}),(0,O.jsx)(U,{component:"p",name:"password"})]}),(0,O.jsx)(I,{type:"submit",children:"\u0414\u043e\u0434\u0430\u0442\u0438 \u0442\u0456\u0447\u0435\u0440\u0430"})]})}),t&&o.length&&(0,O.jsxs)(V,{children:[(0,O.jsx)(M,{children:"\u0421\u043f\u0438\u0441\u043e\u043a \u0430\u043a\u0430\u0443\u043d\u0442\u0456\u0432 \u0442\u0456\u0447\u0435\u0440\u0456\u0432 \u0437 \u0434\u043e\u0441\u0442\u0443\u043f\u043e\u043c \u0434\u043e \u0442\u0430\u0431\u043b\u0438\u0447\u043e\u043a \u0432\u0456\u0434\u0433\u0443\u043a\u0456\u0432"}),(0,O.jsx)("thead",{children:(0,O.jsxs)(Y,{children:[(0,O.jsx)(B,{children:"\u0406\u043c'\u044f"}),(0,O.jsx)(B,{children:"\u041b\u043e\u0433\u0456\u043d"}),(0,O.jsx)(B,{children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),(0,O.jsx)(B,{children:"\u0412\u0456\u0434\u0432\u0456\u0434\u0438\u043d\u0438"}),(0,O.jsx)(B,{children:"\u0412\u0456\u0434\u0432\u0456\u0434\u0438\u043d\u0438 \u0437 \u0447\u0430\u0441\u043e\u043c"}),(0,O.jsx)(B,{children:"Edit"}),(0,O.jsx)(B,{children:"Delete"})]})}),(0,O.jsx)("tbody",{children:o.sort(((n,e)=>n.name.localeCompare(e.name))).map((n=>(0,O.jsxs)(Y,{children:[(0,O.jsx)(G,{children:n.name}),(0,O.jsx)(G,{children:n.login}),(0,O.jsx)(G,{children:n.password}),(0,O.jsx)(G,{children:n.visited[n.visited.length-1]}),(0,O.jsx)(G,{children:n.visitedTime.length?new Date(m(n.visitedTime[n.visitedTime.length-1])).toLocaleString("uk-UA",{timeZone:"+03:00"}):""}),(0,O.jsx)(G,{children:"Dev Acc"===n.name?null:(0,O.jsx)(H,{onClick:()=>(async n=>{s(!0),d((e=>o.find((e=>e._id===n))))})(n._id),children:"Edit"})}),(0,O.jsx)(G,{children:"Dev Acc"===n.name?null:(0,O.jsx)(K,{onClick:()=>(async n=>{if(e((n=>!0)),window.confirm("\u0422\u043e\u0447\u043d\u043e \u0432\u0438\u0434\u0430\u043b\u0438\u0442\u0438 ".concat(o.find((e=>e._id===n)).name,"?")))try{const t=await v.Z.delete("/teachers/".concat(n));console.log(t),alert("\u0422\u0456\u0447\u0435\u0440\u0430 \u0432\u0438\u0434\u0430\u043b\u0435\u043d\u043e"),a((e=>[...e.filter((e=>e._id!==n))]))}catch(t){console.error(t),alert("\u0414\u0435\u0441\u044c \u044f\u043a\u0430\u0441\u044c \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430 - \u043a\u043b\u0430\u0446\u0430\u0439 F12, \u0440\u043e\u0431\u0438 \u0441\u043a\u0440\u0456\u043d \u043a\u043e\u043d\u0441\u043e\u043b\u0456, \u0432\u0456\u0434\u043f\u0440\u0430\u0432\u043b\u044f\u0439 \u041a\u0438\u0440\u0438\u043b\u0443")}finally{e((n=>!1))}else e((n=>!1))})(n._id),children:"Del"})})]},n._id)))})]}),i&&(0,O.jsx)(P.Y,{onMouseDown:n=>{"close-on-click"===n.target.id&&s(!1)},id:"close-on-click",children:(0,O.jsx)(Q,{teacherToEdit:l,closeEditForm:g})}),n&&(0,O.jsx)(k.a,{})]})})}}}]);
//# sourceMappingURL=Teacher Admin Panel page.fcfcb08e.chunk.js.map