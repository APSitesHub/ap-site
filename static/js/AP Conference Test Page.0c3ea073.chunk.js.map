{"version":3,"file":"static/js/AP Conference Test Page.0c3ea073.chunk.js","mappings":"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","sources":["pages/MyAP/My Platform/TestPlatform.jsx","pages/MyAP/ConferenceTest.jsx","pages/MyAP/My Platform/MyPlatform.styled.js"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport {\n  MyAPBackground,\n  MyPlatformBox,\n  TestLogo,\n  TestPlatformSpoiler,\n} from './MyPlatform.styled';\n\nexport const TestPlatform = ({ platformLink }) => {\n  const [src, setSrc] = useState('https://online.ap.education/school/');\n  const location = useLocation().search.slice(1);\n\n  useEffect(() => {\n    const setIframeSRC = () => {\n      !platformLink && !location\n        ? setSrc('https://online.ap.education/school/')\n        : !location\n        ? setSrc(platformLink)\n        : setSrc(location);\n    };\n\n    setIframeSRC();\n  }, [platformLink, location]);\n\n  return (\n    <MyAPBackground>\n      <TestPlatformSpoiler>\n        <TestLogo />\n      </TestPlatformSpoiler>\n      <MyPlatformBox>\n        <iframe\n          id=\"platform-window\"\n          title=\"platform-pin\"\n          src={src}\n          width=\"100%\"\n          height=\"100%\"\n          allow=\"microphone *\"\n        ></iframe>\n      </MyPlatformBox>\n    </MyAPBackground>\n  );\n};\n","import axios from 'axios';\nimport {\n  Label,\n  LeftFormBackgroundStar,\n  RightFormBackgroundStar,\n} from 'components/LeadForm/LeadForm.styled';\nimport { LoginErrorNote, LoginFormText, StreamSection } from 'components/Stream/Stream.styled';\nimport { Formik } from 'formik';\nimport {\n  AdminFormBtn,\n  AdminInput,\n  AdminInputNote,\n  LoginForm,\n} from 'pages/Streams/AdminPanel/AdminPanel.styled';\nimport { useEffect, useState } from 'react';\nimport * as yup from 'yup';\nimport { TestPlatform } from './My Platform/TestPlatform';\n\nconst ConferenceTest = () => {\n  const [isUserLogged, setIsUserLogged] = useState(false);\n  const [user, setUser] = useState({});\n  const [language, setLanguage] = useState('');\n  const [platformLink, setPlatformLink] = useState(\n    `https://online.ap.education/`\n  );\n  const [isUserInfoIncorrect, setIsUserInfoIncorrect] = useState(false);\n\n  axios.defaults.baseURL = 'https://ap-server-8qi1.onrender.com';\n\n  useEffect(() => {\n    document.title = 'My AP | AP Education';\n\n    const refreshToken = async () => {\n      console.log('token refresher');\n      try {\n        const res = await axios.post('/users/refresh', {\n          mail: localStorage.getItem('mail'),\n        });\n        setIsUserLogged(isLogged => (isLogged = true));\n        console.log(73, res.data.user.platformToken);\n        setUser(user => (user = { ...res.data.user }));\n        const lang = res.data.user.lang.split('/');\n        if (lang.length > 1 && !language) {\n          setLanguage(lang[0]);\n        } else if (lang.length <= 1) {\n          setLanguage(res.data.user.lang);\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    };\n    refreshToken();\n\n    const setIframeLinks = async () => {\n      const LINKS = {\n        en1: user.platformToken\n          ? `https://online.ap.education/Account/LoginByToken?token=${\n              user.platformToken\n            }&redirectUrl=${encodeURIComponent(\n              `https://online.ap.education/MarathonClass/?marathonId=37835&pupilId=${user.pupilId}&marathonLessonId=1157251`\n            )}`\n          : `https://online.ap.education/MarathonClass/?marathonId=37835&pupilId=${user.pupilId}&marathonLessonId=1157251`,\n        en2: user.platformToken\n          ? `https://online.ap.education/Account/LoginByToken?token=${\n              user.platformToken\n            }&redirectUrl=${encodeURIComponent(\n              `https://online.ap.education/MarathonClass/?marathonId=49509&pupilId=${user.pupilId}&marathonLessonId=1157255`\n            )}`\n          : `https://online.ap.education/MarathonClass/?marathonId=49509&pupilId=${user.pupilId}&marathonLessonId=1157255`,\n\n        enkids1: user.platformToken\n          ? `https://online.ap.education/Account/LoginByToken?token=${\n              user.platformToken\n            }&redirectUrl=${encodeURIComponent(\n              `https://online.ap.education/MarathonClass/?marathonId=40552&pupilId=${user.pupilId}&marathonLessonId=1157234`\n            )}`\n          : `https://online.ap.education/MarathonClass/?marathonId=40552&pupilId=${user.pupilId}&marathonLessonId=1157234`,\n        enkids2: user.platformToken\n          ? `https://online.ap.education/Account/LoginByToken?token=${\n              user.platformToken\n            }&redirectUrl=${encodeURIComponent(\n              `https://online.ap.education/MarathonClass/?marathonId=50784&pupilId=${user.pupilId}&marathonLessonId=1157243`\n            )}`\n          : `https://online.ap.education/MarathonClass/?marathonId=50784&pupilId=${user.pupilId}&marathonLessonId=1157243`,\n      };\n\n      const marathonLink =\n        language === 'en' && user.marathonNumber === '1'\n          ? 'en1'\n          : language === 'en' && user.marathonNumber === '2'\n          ? 'en2'\n          : language === 'en' && !user.marathonNumber\n          ? 'en2'\n          : language === 'enkids' && user.marathonNumber === '1'\n          ? 'enkids1'\n          : language === 'enkids' && user.marathonNumber === '2'\n          ? 'enkids2'\n          : language === 'enkids' && !user.marathonNumber\n          ? 'enkids2'\n          : '';\n\n      console.log(LINKS[marathonLink]);\n\n      setPlatformLink(link => (link = LINKS[marathonLink]));\n    };\n\n    setIframeLinks();\n  }, [language, user.pupilId, user.marathonNumber, user.platformToken]);\n\n  const setAuthToken = token => {\n    axios.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n  };\n\n  const initialLoginValues = {\n    mail: '',\n    password: '',\n  };\n\n  const loginSchema = yup.object().shape({\n    mail: yup\n      .string()\n      .required('Вкажіть пошту, за якою ви зареєстровані на нашій платформі!'),\n    password: yup\n      .string()\n      .required(\n        'Введіть пароль, який ви використовуєте для входу на нашу платформу!'\n      ),\n  });\n\n  const handleLoginSubmit = async (values, { resetForm }) => {\n    values.mail = values.mail.toLowerCase().trim().trimStart();\n    values.password = values.password.trim().trimStart();\n    try {\n      const response = await axios.post('/users/login', values);\n      console.log(response);\n\n      setAuthToken(response.data.token);\n      setIsUserLogged(isLogged => (isLogged = true));\n      setUser(user => (user = { ...response.data.user }));\n      const lang = response.data.user.lang.split('/');\n      if (lang.length > 1) {\n        setLanguage(lang[0]);\n      }\n      localStorage.setItem('mail', values.mail);\n      setIsUserInfoIncorrect(false);\n      resetForm();\n    } catch (error) {\n      error.response.status === 401 && setIsUserInfoIncorrect(true);\n      console.error(error);\n    }\n  };\n\n  return (\n    <StreamSection>\n      {!isUserLogged ? (\n        <Formik\n          initialValues={initialLoginValues}\n          onSubmit={handleLoginSubmit}\n          validationSchema={loginSchema}\n        >\n          <LoginForm>\n            <LeftFormBackgroundStar />\n            <RightFormBackgroundStar />\n            <LoginFormText>\n              Привіт!\n              <br />\n              Ця сторінка недоступна для неавторизованих користувачів. Але якщо\n              ви маєте доступ до нашої платформи, то й до цієї сторінки теж.\n              Введіть дані, які ви використовуєте для входу на платформу.\n            </LoginFormText>\n            <Label>\n              <AdminInput\n                type=\"text\"\n                name=\"mail\"\n                placeholder=\"Login\"\n                onBlur={() => setIsUserInfoIncorrect(false)}\n              />\n              <AdminInputNote component=\"p\" name=\"mail\" type=\"email\" />\n            </Label>\n            <Label>\n              <AdminInput\n                type=\"password\"\n                name=\"password\"\n                placeholder=\"Password\"\n                onBlur={() => setIsUserInfoIncorrect(false)}\n              />\n              <AdminInputNote component=\"p\" name=\"password\" />\n            </Label>\n            <AdminFormBtn type=\"submit\">Увійти</AdminFormBtn>\n            <LoginErrorNote\n              style={isUserInfoIncorrect ? { opacity: '1' } : { opacity: '0' }}\n            >\n              Логін або пароль введено неправильно!\n            </LoginErrorNote>\n          </LoginForm>\n        </Formik>\n      ) : (\n        <TestPlatform platformLink={platformLink} />\n      )}\n    </StreamSection>\n  );\n};\n\nexport default ConferenceTest;\n","import { Logo } from 'pages/Quiz/Quiz.styled';\nimport styled from 'styled-components';\n\nexport const MyPlatformBox = styled.div`\n  height: 100vh;\n  width: 100vw;\n\n  overflow: hidden;\n\n  position: absolute;\n  top: 0;\n  left: 0;\n\n  font-family: var(--streams-font-family);\n\n  transition: transform var(--animation-global);\n\n  &.hidden {\n    transform: translateX(-100%);\n  }\n\n  &.shown {\n    transform: translateX(0);\n  }\n`;\n\nexport const TestPlatformSpoiler = styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  width: calc(100% - 17.5px);\n  height: 64px;\n  z-index: 5;\n\n  background-color: white;\n`;\n\nexport const TestLogo = styled(Logo)`\n  display: block;\n  flex-shrink: 0;\n  width: 173px;\n  height: 34px;\n\n  margin: 0 auto;\n`;\n\nexport const MyAPBackground = styled.div`\n  width: 100%;\n  height: 100%;\n`;\n\nexport const BackgroundVideo = styled.video`\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  object-fit: cover;\n\n  width: 100%;\n  height: calc(100% - 64px);\n`;\n"],"names":["TestPlatform","_ref","platformLink","src","setSrc","useState","location","useLocation","search","slice","useEffect","_jsxs","MyAPBackground","children","_jsx","TestPlatformSpoiler","TestLogo","MyPlatformBox","id","title","width","height","allow","ConferenceTest","isUserLogged","setIsUserLogged","user","setUser","language","setLanguage","setPlatformLink","isUserInfoIncorrect","setIsUserInfoIncorrect","axios","document","async","console","log","res","mail","localStorage","getItem","isLogged","data","platformToken","lang","split","length","error","refreshToken","LINKS","en1","concat","encodeURIComponent","pupilId","en2","enkids1","enkids2","marathonLink","marathonNumber","link","setIframeLinks","loginSchema","yup","shape","required","password","StreamSection","Formik","initialValues","onSubmit","values","resetForm","toLowerCase","trim","trimStart","response","token","setItem","status","validationSchema","LoginForm","LeftFormBackgroundStar","RightFormBackgroundStar","LoginFormText","Label","AdminInput","type","name","placeholder","onBlur","AdminInputNote","component","AdminFormBtn","LoginErrorNote","style","opacity","styled","_templateObject","_taggedTemplateLiteral","_templateObject2","Logo","_templateObject3","_templateObject4","_templateObject5"],"sourceRoot":""}