"use strict";(self.webpackChunkap_education=self.webpackChunkap_education||[]).push([[414],{93403:(e,s,o)=>{o.r(s),o.d(s,{default:()=>m});var i=o(55294),a=o(97723),t=o(8313),n=o(55705),r=o(72791),c=o(8007),l=o(17102),p=o(80184);i.Z.defaults.baseURL="https://ap-server-8qi1.onrender.com";const d=e=>{i.Z.defaults.headers.common.Authorization="Bearer ".concat(e)},m=()=>{const[e,s]=(0,r.useState)(!1),[o,m]=(0,r.useState)(!1);(0,r.useEffect)((()=>{document.title="Uni Link Admin Panel | AP Education";(async()=>{console.log("token refresher");try{if(localStorage.getItem("isAdmin")){const e=await i.Z.post("admins/refresh/",{});console.log(e),m((e=>!0)),d(e.data.newToken)}}catch(e){console.log(e)}})()}),[o]);const g=c.Ry().shape({login:c.Z_().required("\u0412\u043a\u0430\u0436\u0456\u0442\u044c \u043b\u043e\u0433\u0456\u043d!"),password:c.Z_().required("\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c!")}),h=c.Ry().shape({pedagogium_logistics:c.Z_().optional(),pedagogium_prep:c.Z_().optional(),wstijo_logistics:c.Z_().optional(),wstijo_prep:c.Z_().optional(),wsbmir_logistics:c.Z_().optional(),wsbmir_prep:c.Z_().optional()});return(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)(l.Kq,{children:[!o&&(0,p.jsx)(n.J9,{initialValues:{login:"",password:""},onSubmit:async(e,o)=>{let{resetForm:a}=o;s((e=>!0));try{const o=await i.Z.post("/admins/login",e);d(o.data.token),m((e=>!0)),localStorage.setItem("isAdmin",!0),a()}catch(t){console.error(t)}finally{s((e=>!1))}},validationSchema:g,children:(0,p.jsxs)(l.U0,{children:[(0,p.jsxs)(a.__,{children:[(0,p.jsx)(l.vD,{type:"text",name:"login",placeholder:"Login"}),(0,p.jsx)(l.aC,{component:"p",name:"login"})]}),(0,p.jsxs)(a.__,{children:[(0,p.jsx)(l.vD,{type:"password",name:"password",placeholder:"Password"}),(0,p.jsx)(l.aC,{component:"p",name:"password"})]}),(0,p.jsx)(l.Gh,{type:"submit",children:"\u0417\u0430\u043b\u043e\u0433\u0456\u043d\u0438\u0442\u0438\u0441\u044c"})]})}),o&&(0,p.jsx)(n.J9,{initialValues:{pedagogium_logistics:"",pedagogium_prep:"",wstijo_logistics:"",wstijo_prep:"",wsbmir_logistics:"",wsbmir_prep:""},onSubmit:async(e,o)=>{let{resetForm:a}=o;s((e=>!0));try{const o=await i.Z.patch("/unilinks",e);console.log(o),a(),alert("\u041b\u0456\u043d\u043a\u0438 \u0437\u0430\u043c\u0456\u043d\u0438\u043b\u0438\u0441\u044f, \u043c\u043e\u043b\u043e\u0434\u0435\u0446\u044c")}catch(t){console.error(t),alert("\u0429\u043e\u0441\u044c \u043d\u0435 \u043f\u0440\u043e\u043a\u043d\u0443\u043b\u043e!")}finally{s((e=>!1))}},validationSchema:h,children:(0,p.jsxs)(l.Od,{children:[(0,p.jsxs)(l.Sj,{children:[(0,p.jsx)(l.XG,{children:"Pedagogium (Wy\u017csza Szko\u0142a Nauk Spo\u0142ecznych)"}),(0,p.jsxs)(a.__,{children:[(0,p.jsx)(l.vD,{type:"text",name:"pedagogium_logistics",placeholder:"Pedagogium Logistics"}),(0,p.jsx)(l.aC,{component:"p",name:"pedagogium"})]}),(0,p.jsxs)(a.__,{children:[(0,p.jsx)(l.vD,{type:"text",name:"pedagogium_prep",placeholder:"Pedagogium Przygotowawczy Kurs"}),(0,p.jsx)(l.aC,{component:"p",name:"pedagogium"})]})]}),(0,p.jsxs)(l.Sj,{children:[(0,p.jsx)(l.XG,{children:"WSTIJO (Wyzsza Szko\u0142a Turystyki i Jezykow Obcych w Warszawie)"}),(0,p.jsxs)(a.__,{children:[(0,p.jsx)(l.vD,{type:"text",name:"wstijo_logistics",placeholder:"WSTIJO Logistics"}),(0,p.jsx)(l.aC,{component:"p",name:"wstijo_logistics"})]}),(0,p.jsxs)(a.__,{children:[(0,p.jsx)(l.vD,{type:"text",name:"wstijo_prep",placeholder:"WSTIJO Przygotowawczy Kurs"}),(0,p.jsx)(l.aC,{component:"p",name:"wstijo_prep"})]})]}),(0,p.jsxs)(l.Sj,{children:[(0,p.jsx)(l.XG,{children:"WSBMIR (Wy\u017csza Szko\u0142a Biznesu, Medi\xf3w i Reklamy)"}),(0,p.jsxs)(a.__,{children:[(0,p.jsx)(l.vD,{type:"text",name:"wsbmir_logistics",placeholder:"WSBMIR Logistics"}),(0,p.jsx)(l.aC,{component:"p",name:"wsbmir_logistics"})]}),(0,p.jsxs)(a.__,{children:[(0,p.jsx)(l.vD,{type:"text",name:"wsbmir_prep",placeholder:"WSBMIR Przygotowawczy Kurs"}),(0,p.jsx)(l.aC,{component:"p",name:"wsbmir_prep"})]})]}),(0,p.jsx)(l.Gh,{type:"submit",children:"\u0417\u0430\u043c\u0456\u043d\u0438\u0442\u0438 \u043b\u0456\u043d\u043a\u0438"})]})}),e&&(0,p.jsx)(t.a,{})]})})}}}]);
//# sourceMappingURL=Pl University Links Admin Panel page.32656377.chunk.js.map